const onDeviceReady=()=>{window.device&&"none"==navigator.connection.type?navigator.notification.alert("No network connection found. Please check your network settings and try again.",function(){navigator.app.exitApp()},"No Network","Ok"):angular.module("unifyedmobile",["MainCtrl","AppletCtrl","pageCtrl","siteGroupCtrl","MobileServices","convertSvg","cmsDirectives","siteGroupHeaderDirective","UnifyedActionIcon","BannerSrvc","sqlService","ngRoute","appRoutes"])};window.device?document.addEventListener("deviceready",onDeviceReady,!1):onDeviceReady(),angular.module("appRoutes",[]).config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:"app/components/main/mainView.html",controller:"mainController"}).when("/app/:appid/:pageid",{templateUrl:"app/components/applet/appletView.html",controller:"appletController"}).when("/:sitebaseurl/:id",{templateUrl:"app/components/cmspage/pageView.html",controller:"unifyedPageCtrl"}).when("/group/:sitebaseurl/:id",{templateUrl:"app/components/groups/grouppage.html",controller:"unifyedSiteGroupPageCtrl"}),t.hashPrefix("")}]),angular.module("BannerSrvc",[]).factory("BannerService",["$http","$rootScope",function(e,t){var a={},n={bypass:!1,productinfo:{},clearpass:"",bannerticket:"",roles:[],username:"",password:""};function o(e,a){return e.bypass=!1,t.bannerticket&&e.productinfo&&e.productinfo.middlewareUrl&&(e.bypass=!0),e.bannerticket=t.bannerticket,a(null,e)}function i(a,n){if(a.bypass)return n(null,a);a.bypass=!!t.bannerticket;var o=t.user.tenant,i={method:"GET",url:t.GatewayUrl+"/unifydplatform/open/tenant/search/findOneByTenantid?tenantid="+o,headers:{"Content-Type":"application/json",Accept:"application/json","X-TENANT-ID":"CEAI"}};e(i).then(function(e){var t;return e&&e.data&&(t=_.find(e.data.products,function(e){return"BANNER"==e.product})),a.productinfo=t,n(null,a)},function(e){return n(e)})}function r(e,t){return e.bypass?t(null,e):(e.username="dhorton",e.password="Tape1798",t(null,e))}function s(e,t){return t(null,e)}function l(t,a){if(t.bypass)return a(null,t);var n=t.username,o=t.password,i=t.productinfo.middlewareUrl+"/services/authenticate/login",r="username="+n+"&password="+encodeURIComponent(o);e({url:"/proxy",method:"POST",data:{url:i,method:"POST",body:r,headers:{"Content-Type":"application/x-www-form-urlencoded"}}}).then(function(e){return t.bannerticket=e.data.ticket,t.roles=e.data.roles,a(null,t)},function(e){return a(e)})}return a.getAPI=function(a,c){var d;d=function(o,i){if(o)return c(o);t.bannerticket=i.bannerticket,t.demoMode=i.productinfo.demoMode,t.bannerMiddlewareUrl=i.productinfo.middlewareUrl,n=i;var r=i.productinfo.middlewareUrl+"/services/student"+a+"?ticket="+t.bannerticket;e({url:"/proxy",method:"POST",data:{url:r,method:"GET",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}}}).then(function(e){return c(e)},function(e){if("403"!=e.status)return c(e);t.bannerticket="",n.bannerticket="",this.getAPI(a,c)})},async.waterfall([async.apply(o,n),i,r,s,l],function(e,t){return e?d(e):d(null,t)})},a.postAPI=function(a,c,d){async.waterfall([async.apply(o,n),i,r,s,l],function(n,o){if(n)return d(n);t.bannerticket=o.bannerticket;var i=o.productinfo.middlewareUrl+"/services/student"+a+"?ticket="+t.bannerticket;e({url:"/proxy",method:"POST",data:{url:i,method:"POST",body:c,headers:{"Content-Type":"application/x-www-form-urlencoded"}}}).then(function(e){return d(e)},function(e){return d(e)})})},a}]);var unifyedCMSDirectives=angular.module("cmsDirectives",[]);unifyedCMSDirectives.directive("uniApplet",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location","BannerService",function(e,t,a,n,o,i,r,s){return{restrict:"A",transclude:!1,scope:{apps:"=apps",comp:"=comp",span:"=span"},link:function(l,c,d){l.user=n.user,l.randomBackground=n.randomBackground,l.getWidgetHtml=function(e){window.eval(e.processor);var t=window["proc"+e.name](e.attribs);return o.trustAsHtml(t)};var p=function(c,d){if(c.widgetid&&null!=n.pagedata.widgetcomps){for(var p=null,u=n.pagedata.widgetcomps.length,g=0;g<u;g++)n.pagedata.widgetcomps[g]._id==c.widgetid&&(p=n.pagedata.widgetcomps[g].widget);p&&(c.widget=p)}if(c.widget){var m="<div ng-bind-html='getWidgetHtml(comp.widget)'></div>";return c.widget.editor&&1==c.widget.editor?m="<div id='ak' cid='ak' uni-editor compval='comp.widget.attribs[0]' ng-bind-html='getWidgetHtml(comp.widget)'></div>":c.widget.compile&&1==c.widget.compile&&(m="<div>"+l.getWidgetHtml(c.widget)+"</div>"),m}if(c.applet){console.log(c.applet);var v=c.applet.pages[0];window.eval(v.pageprocessor);var h={},f="pageprocessor"+c.applet.appkey;h.datatemplate=v.datatemplate,h.pageprocessor=v.pageprocessor,h.pageTemplate=v.pageTemplate;var w={BannerService:s};try{window[f](v,l,e,t,a,n,o,i,r,w,l.span)}catch(e){console.log("Error in processor..")}var b='<div><div class="applet-header hidden-xs" >'+c.applet.displayname+'</div><div class="applet-header visible-xs cmscellTitleResponsive" ng-class="" data-toggle="collapse" data-target="#'+c.applet._id+'" aria-expanded="true">'+c.applet.displayname+'<i class="fa fa-angle-down pull-right"></i></div><div class="applet-content cmscellReponsiveContent collapse in" id="'+c.applet._id+'">'+c.applet.pages[0].datatemplate+c.applet.pages[0].pageTemplate+"</div></div>";c.applet.id,c.applet.iconUrl,c.applet.displayname,t(b)(n);return b}return""};if(l.comp.applet){var u=l.comp.applet.appkey||l.comp.applet.name;console.log("vappkey="+u);var g="/studio/getmobileappletmetadata/"+n.tenantId+"/"+u+"/"+u;console.log("Before calling applet metadata API "+new Date);var m={headers:{"Content-Type":"application/json",Accept:"application/json"},url:g,method:"POST",data:{uuid:window.device?device.uuid:"9876543210"}};$.blockUI(),n.callCMSAPI(m,function(e,a){if($.unblockUI(),console.log("Applet Metadata response return time "+new Date),console.log(a),l.comp.applet.customconfig)for(var n=0;n<l.comp.applet.pages.length;n++)try{l.comp.applet.pages[n].pageprocessor=a.pages[n].pageprocessor,l.comp.applet.pages[n].datatemplate=a.pages[n].datatemplate}catch(e){console.log(e)}else l.comp.applet.pages=[a.pages[0]];var o=p(l.comp);$(c).append(t(o)(l))})}else{var v=p(l.comp);$(c).append(t(v)(l))}}}}]).directive("uniDraggable",["$document",function(e){return{scope:!1,link:function(t,a,n){var o=0,i=0,r=0,s=0;function l(e){s=e.pageY-i,r=e.pageX-o,a.css({top:s+"px",left:r+"px"}),t.selectedcomp.position.x=r,t.selectedcomp.position.y=s,$("#widgetposition").removeClass("hide"),$("#widgetposition").html("X: "+r+", Y : "+s)}function c(){e.off("mousemove",l),e.off("mouseup",c)}n.posx&&(r=n.posx),n.posy&&(s=n.posy),a.css({border:"1px solid transparent",cursor:"pointer",width:"auto",top:s+"px",left:r+"px"}),a.on("mousedown",function(t){t.preventDefault(),o=t.pageX-r,i=t.pageY-s,e.on("mousemove",l),e.on("mouseup",c),$("#widgetposition").removeClass("hide"),$("#widgetposition").html("X: "+t.pageX+", Y : "+t.pageY)})}}}]).directive("uniEditor",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"A",transclude:!0,scope:{attribute:"=compval"},link:function(e,t,a){}}}]).directive("cmssidebutton",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"E",transclude:!1,scope:{icon:"@icon",image:"@image",label:"@label"},template:'<div class="cmssidebutton"><div ng-class="icon" class=""></div><div class="cmssidbuttonlabel">{{label}}</div><div class="marker"></div></div>',link:function(e,t,a){t.on("click",function(e){$(".cmssidebutton").removeClass("selected"),$(t.children()[0]).addClass("selected")})}}}]).directive("cmsapp",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location","$route","FragmentLoaderService",function(e,t,a,n,o,i,r,s,l){return{restrict:"A",transclude:!0,template:'<div class="applicationpage"><nav  class="cmstopnav" ng-if="studiomode"><div style="" class="cmstopnavInner"><div style="float:left"  tabindex="0" aria-label="unifyed logo" class="tabFocusHighlighter"><span style="display:inline-block;height:100%;vertical-align:middle;"></span><img src="images/logo-300x83.png" alt="unifyed logo" style="width: 132px;"></div><div class="tabFocusHighlighter"  tabindex="0" aria-label="project dropdown" style="float: left;"><div class="proximaFont text-info" style="margin-top: 5px;margin-left: 20px;color: #525252;">PROJECT</div><a href="#" ng-click="openInstitutions();"  role="button" aria-haspopup="true"  style="padding-top: 0px;margin-left: 20px;padding-left: 0px;color: #000;">{{site.name}} <span class="caret"></span></a><ul class="dropdown-menu"></ul></div><div style="float:right;text-align:center;"></div><div style="float:right;text-align:center; margin: 3px 10px;"  tabindex="0" aria-label="publish icon" class="tabFocusHighlighter"><button class="btn primary-btn btn-cancel"  disabled title="Coming Soon" style="color: #000;">Publish</button></div><div style="float:right;text-align:center;margin: 3px 10px;"  tabindex="0" aria-label="save icon" class="tabFocusHighlighter"><button class="btn primary-btn btn-cancel" ng-click="savePage();" title="Save"  style="color: #000;">Save</button></div><div ng-if="cmsapplication || site.sitefeatureaccess.redo"  tabindex="0" aria-label="redo icon" class="tabFocusHighlighter" style="float:right;text-align:center;width:70px;"><a class="navbar-icon-container" ng-click="redoAction()"><img src="images/cmstools/redo.png" alt="redo icon" class="navbar-icons" /><br><div class="navbar-icon-label">Redo</div></a></div><div ng-if="cmsapplication || site.sitefeatureaccess.undo"  tabindex="0" aria-label="undo icon" class="tabFocusHighlighter" style="float:right;text-align:center;width:70px;"><a class="navbar-icon-container" ng-click="undoAction()">    <img src="images/cmstools/undo.png" alt="undo icon" class="navbar-icons" /> <br><div class="navbar-icon-label"  style="color: #525252;">Undo</div></a></div><div ng-if="cmsapplication || site.sitefeatureaccess.mobilesimu"  tabindex="0" aria-label="mobile view icon" class="tabFocusHighlighter" style="float:right;text-align:center;width:70px;"><a class="navbar-icon-container" ng-click="showmobileview();"><img src="images/cmstools/mobile-browser.png" alt="mobile browser icon" id="cmsdevicemobile" class="navbar-icons cmstooliconblur" /><br><div class="navbar-icon-label"  style="color: #525252;">Mobile</div></a></div><div ng-if="cmsapplication || site.sitefeatureaccess.tabsimu"  tabindex="0" aria-label="ipad view icon" class="tabFocusHighlighter" style="float:right;text-align:center;width:70px;"><a class="navbar-icon-container" ng-click="showtabletview();"><img src="images/cmstools/ipad.png" alt="ipad icon"  id="cmsdeviceipad" class="navbar-icons cmstooliconblur"/><br><div class="navbar-icon-label"  style="color: #525252;">iPad/Tab</div></a></div><div ng-if="cmsapplication || site.sitefeatureaccess.desktopsimu" tabindex="0" aria-label="desktop view icon" class="tabFocusHighlighter" style="float:right;text-align:center;width:70px;"><a class="navbar-icon-container" ng-click="showwebview();"><img src="images/cmstools/desktop.png" alt="desktop icon"  id="cmsdevicedesktop" class="navbar-icons cmstooliconblur"/><br><div class="navbar-icon-label-active"  style="color: #525252;">Desktop</div></a></div></div></nav><div class="leftmenu" id="leftmenu" ng-if="studiomode"><cmssidebutton ng-if="cmsapplication || site.sitefeatureaccess.design" icon="design-icon icon-design" label="Design" ng-click="loadDesign();"></cmssidebutton><cmssidebutton ng-if="cmsapplication || site.sitefeatureaccess.sitepage" icon="pages-icon icon-pages" label="Sites & Pages" ng-click="loadAppletPages();"></cmssidebutton><cmssidebutton ng-if="cmsapplication || site.sitefeatureaccess.widgets" icon="widgets-icon icon-widgets" label="Widgets" ng-click="loadWidgets();"></cmssidebutton><cmssidebutton ng-if="cmsapplication || site.sitefeatureaccess.content" icon="content-icon icon-files" label="Content" ng-click="loadContent();"></cmssidebutton><cmssidebutton icon="appmanager-icon icon-app-manager" label="App Manager" ng-click="loadAppManager();"></cmssidebutton><cmssidebutton ng-if="cmsapplication || site.sitefeatureaccess.settings" icon="settings-icon icon-settings" label="Settings" ng-click="loadSettings();"></cmssidebutton><cmssidebutton icon="usergroup-icon icon-UsersGroups_icon" label="User/Groups" ng-click="loadUserAndGroup();"></cmssidebutton><cmssidebutton icon="settings-icon icon-settings" label="Chat" ng-click="loadChat();"></cmssidebutton><cmssidebutton ng-if="cmsapplication" icon="settings-icon icon-settings" label="Tenant Setup" ng-click="tenantSetup();"></cmssidebutton></div><div ng-transclude class="apppagecontainer"></div></div>',replace:!0,link:function(e,t,o){n.tenantMsg="",e.getSchoolInfo=function(){console.log("calling school api");var e="/unifydplatform/open/school/search/findOneByTenantId?tenant="+n.selSite.tenantid;n.callAPI(e,"GET","",function(e){console.log(e),n.schoolInfo=e.data,n.schoolInfo||(n.schoolInfo={},n.tenantid=n.selSite.tenantid,n.schoolInfo.tenantId=n.selSite.tenantid),n.schoolInfo.tenantId=n.schoolInfo.tenantId?n.schoolInfo.tenantId:n.selSite.tenantid,n.schoolInfo.name=n.schoolInfo.name?n.schoolInfo.name:n.tenantDoc.name})},e.exitViewMode=function(){n.viewModeOn=!1},e.tenantSetup=function(){console.log(n.selSite),console.log("site"),console.log(n.site),n.tenantMsg="",n.schoolInfo=[],n.genderList=[],n.categoryList=[],a.get("/unifyed-platform/tenant/"+n.selSite.tenantid).then(function(t){n.tenantDoc=t.data,n.tenantDoc||(n.tenantDoc={}),n.tenantDoc._id&&(n.tenantDoc.id=n.tenantDoc._id),n.tenantDoc.tenantid=n.tenantDoc.tenantid?n.tenantDoc.tenantid:n.selSite.tenantid,n.tenantDoc.siteId=n.selSite._id,console.log("calling school info"),e.getSchoolInfo()},function(t){console.log("Could not retrieve  tenant info"),n.tenantDoc={},n.tenantid=n.selSite.tenantid,n.tenantDoc.siteId=n.selSite._id,e.getSchoolInfo()}),$("#selectTenantSetupModel").modal("show")},e.submitTenant=function(){if(console.log("Updating tenant"),console.log(n.tenantDoc),"string"==typeof n.tenantDoc.admins){var e=n.tenantDoc.admins;n.tenantDoc.admins=e?e.split(","):[]}if("string"==typeof n.tenantDoc.products){e=n.tenantDoc.products;n.tenantDoc.products=e?e.split(","):[]}console.log("before calling callAPI");n.callAPI("/unifydplatform/open/tenant","POST",n.tenantDoc,function(e){console.log(e)})},e.loadAppManager=function(){l.loadFragments(["appstorePanel","appstore","myapps","createApp"],function(){$(".submenucontainer").hide(),$("#appStorePanelContainer").removeClass("hide"),$("#appStorePanelContainer").show(),$("#appStorePanelContainer").addClass("animated"),$("#appStorePanelContainer").addClass("pulse")})},n.exitAppManager=function(){n.isappmanagerview=!1,$("#appmanagerframe").attr("src",""),$(".apppagecontainer").show()},e.loadUsers=function(){l.loadFragments(["userManagement"],function(){$(".submenucontainer").hide(),$("#usermgmtcontainer").removeClass("hide"),$("#usermgmtcontainer").show(),$("#usermgmtcontainer").addClass("animated"),$("#usermgmtcontainer").addClass("pulse")})},e.loadUserAndGroup=function(){l.loadFragments(["userAndGroup"],function(){$("#userAndGroup").removeClass("hide"),$("#designpanelcontainer").hide(),$("#contentscontainer").hide(),$("#controlpanelcontainer").hide(),$("#appletpagescontainer").hide(),$("#rolebaseRbackModal").modal("hide"),$("#appmanagerframe").attr("src","")})},e.loadRback=function(){l.loadFragments(["rolebaseRback"],function(){$("#rolebaseRbackModal").modal("show"),$("#userAndGroup").hide(),$("#designpanelcontainer").hide(),$("#controlpanelcontainer").hide(),$("#appletpagescontainer").hide()})},e.loadDesign=function(){l.loadFragments(["designPanel"],function(){$("#appmanagerframe").attr("src",""),$(".submenucontainer").hide(),$("#designpanelcontainer").removeClass("hide"),$("#designpanelcontainer").show(),$("#designpanelcontainer").addClass("animated"),$("#designpanelcontainer").addClass("pulse")}),$(".cmssidebutton").removeClass("selected")},e.loadChat=function(){l.loadFragments(["chatsettings"],function(){$(".submenucontainer").hide(),$("#chatsettingscontainer").removeClass("hide"),$("#chatsettingscontainer").show(),$("#chatsettingscontainer").addClass("animated"),$("#chatsettingscontainer").addClass("pulse")}),$(".cmssidebutton").removeClass("selected")};var i=function(e){a.get("/sites/site/"+n.selSite._id).then(function(t){n.site=t.data,n.navmenu=t.data.pages;try{if($("#tree1")){$("#tree1").tree("loadData",n.navmenu);$("#tree1").tree("getTree")}}catch(e){}n.pagetransition="pulse",e&&e()},function(t){return console.log("Error in loading site /sites/site "+t),e()})},c=function(e,t){if(!t.error){$("#brandingcss").html(t.customStyle);var a=[],o=[];n.otherApplets=[],n.tenantmetadata={},n.tenantmetadata.apps=t,n.applets=n.tenantmetadata.apps,angular.forEach(n.tenantmetadata.apps,function(t,i){if(t.tenantid=e,t.iconUrl="https://studio.unifyed.com/metaData/appLogo/"+t.globalappletid,t.url="/app/"+t.appkey+"/"+t.appkey,t.appletDisplayName=t.displayname,t.categorykey="",t.author="AppMaker",t.target="",t.type=t.type,t.orderVal=0,t.showInHome){var r=_.find(t.pages,function(e){if(e.appnames)return e.appnames});r&&r.appnames?a.push({appFeatureType:t.appletDisplayName,appFeatureTypeFormatted:t.appletDisplayName.replace(" ","_"),orderVal:0,iconUrl:t.iconUrl,appNames:r.appnames.split(","),expanded:!1,applets:[]}):n.otherApplets.push(t)}else o.push(t);t.pages=""}),console.log("$rootScope.tenantmetadata;",n.tenantmetadata),angular.forEach(a,function(e,t){angular.forEach(e.appNames,function(t,a){var n=_.find(o,function(e){return e.appletDisplayName==t});n&&e.applets.push(n)})}),n.appFeatureTypes=a}},d=function(e,t){var n="/studio/gettenantmetadata/"+e;a.get(n).then(function(n){n.data?(c(e,n.data),t&&(console.log("loadmetadata execution completed time "+new Date),t())):a({url:"/studio/updatestudiometadata/"+e,method:"POST",data:{}}).then(function(a){c(e,a.data.data.metadata),t&&t()})})};n.$on("launchsite",function(e,t){alert("launchsite directive"),n.selSite=t.site,n.site=t.site,async.parallel([i,d.bind(null,n.cmsapplication?n.site.tenantid:n.user.tenant)],function(e){$("#customcsscms").html(""),$("#customcsscms").html(n.site.customcss),console.log(JSON.stringify(n.site)),n.$broadcast("onAfterSiteFetched",{site:n.site}),t.pageid?r.path("/"+n.site.sitebaseurl+"/"+t.pageid):t.showfirstpage?r.path("/"+n.site.sitebaseurl+"/"+n.navmenu[0].pageid):n.$broadcast("onAfterSiteExecuted",{site:n.site})})}),n.studiomode=!1,n.toggleStudio=function(){n.studiomode=!n.studiomode,!n.studiomode&&(n.viewModeOn=!1),console.log("$rootScope.viewModeOn",n.viewModeOn),$("body").hasClass("studiomode")?($("body").removeClass("studiomode"),$(".movingEdit").hide(),n.previewmode=!0,$(".toolbargroup").addClass("hide"),$(".hideStudioMenuPage").hide(),$("#contentscontainer").hide(),$("#controlpanelcontainer").hide(),$("#userAndGroup").hide(),$("#designpanelcontainer").hide(),$("#mycellSettingmodel").remove(),$("#myrowSettingmodel").remove(),$("#cmsrowaddcellsetting").remove(),s.reload()):($("body").addClass("studiomode"),n.previewmode=!1,l.loadFragments(["widgetSettings","addWidget","deleteWidget","aboutproject","pagePermissions"],function(){}),$(".cmswidgetcontainer").removeClass("hide")),n.adjustMenuHeight(),$("#menu-block").getNiceScroll().remove(),$("#menu-block").niceScroll({cursorwidth:4,cursoropacitymin:.4,cursorcolor:"#ffffff",cursorborder:"none",cursorborderradius:4,autohidemode:"leave",horizrailenabled:!1})},e.openInstitutions=function(){$("#selectTenantModel").modal({keyboard:!1,backdrop:"static"})},$(".submenucontainer").hide(),e.loadSettings=function(){0==$("#jqtreejs").length&&$('<script id="jqtreejs" src="js/cmslib/tree.jquery.js"><\/script>').appendTo("head"),n.exitAppManager(),l.loadFragments(["controlpanel"],function(){$(".submenucontainer").hide(),$("#contentscontainer").hide(),$("#userAndGroup").hide(),$("#controlpanelcontainer").removeClass("hide"),$("#controlpanelcontainer").show(),$("#controlpanelcontainer").addClass("animated"),$("#controlpanelcontainer").addClass("pulse")}),$(".cmssidebutton").removeClass("selected")},e.loadIdentity=function(){n.exitAppManager(),l.loadFragments(["identityManager"],function(){$(".submenucontainer").hide(),$("#identitymanagercontainer").removeClass("hide"),$("#identitymanagercontainer").show(),$("#identitymanagercontainer").addClass("animated"),$("#identitymanagercontainer").addClass("pulse")}),$(".cmssidebutton").removeClass("selected")},e.loadAppletPages=function(){n.exitAppManager(),0==$("#jqtreejs").length&&$('<script id="jqtreejs" src="js/cmslib/tree.jquery.js"><\/script>').appendTo("head"),l.loadFragments(["sitespages","addPage","addExternalLink"],function(){$(".submenucontainer").hide(),$("#appletpagescontainer").removeClass("hide"),$("#contentscontainer").hide(),$("#userAndGroup").hide(),$("#appletpagescontainer").show(),$("#appletpagescontainer").addClass("animated"),$("#appletpagescontainer").addClass("pulse"),n.loadAllImages()}),$(".cmssidebutton").removeClass("selected")},e.loadWidgets=function(){n.exitAppManager(),null==n.pagedata.rows&&(n.pagedata.rows=[]),0==n.pagedata.rows.length&&n.pagedata.rows.push({cols:[{span:12,style:{},components:[]}]}),n.selcolforAdd=n.pagedata.rows[0].cols[0],$("#addWidgetsModal").modal("show")},e.loadContent=function(){n.exitAppManager(),l.loadFragments(["contentLibrary","manageImages"],function(){$(".submenucontainer").hide(),$("#userAndGroup").hide(),$("#contentscontainer").removeClass("hide"),$("#contentscontainer").show(),$("#contentscontainer").addClass("animated"),$("#contentscontainer").addClass("pulse")})},e.savePage=function(){e.$emit("onSavePage",{})},e.showmobileview=function(){n.exitAppManager(),$("#previewframe").attr("src",window.location+"?q="+(new Date).getTime()),n.iswebview=!1,n.ismobileview=!0,$("#devicesimulator").removeClass("tabletskin"),$("#devicesimulator").addClass("mobileskin"),$("#cmsdevicemobile").removeClass("cmstooliconblur"),$("#cmsdevicedesktop").addClass("cmstooliconblur"),$("#cmsdeviceipad").addClass("cmstooliconblur"),$("body").addClass("simulatormode"),$("body").addClass("simulatormode")},e.showwebview=function(){n.exitAppManager(),n.iswebview=!0,n.ismobileview=!1,$("body").removeClass("simulatormode"),$("#cmsdevicedesktop").removeClass("cmstooliconblur"),$("#cmsdeviceipad").addClass("cmstooliconblur"),$("#cmsdevicemobile").addClass("cmstooliconblur")},e.showtabletview=function(){n.exitAppManager(),$("#previewframe").attr("src",window.location+"?q="+(new Date).getTime()),n.iswebview=!1,n.ismobileview=!0,$("#devicesimulator").removeClass("mobileskin"),$("#devicesimulator").addClass("tabletskin"),$("#cmsdeviceipad").removeClass("cmstooliconblur"),$("#cmsdevicedesktop").addClass("cmstooliconblur"),$("#cmsdevicemobile").addClass("cmstooliconblur"),$("body").addClass("simulatormode")}}}}]).directive("cmswidget",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"E",transclude:!1,scope:{image:"@image",title:"@title",comp:"=comp",info:"@info",type:"@type"},template:'<div class="cmswidget" ><div class="clearfix"><div class="widgetimgcontainer"  style="width:40px;float:left;margin: 5px 0px;padding: 5px;border-radius: 5px;"><img style="width:24px;height:24px;" ng-src="{{image}}"/></div><div style="width:110px;float:left;text-align: left;padding: 5px;" class="cmswidgettitle">{{title}}<div style="font-size:10px;line-height:10px;color:#a1a1a1">{{info}}</div></div></div></div>',link:function(e,t,a){console.log("cmswidget image",e);var o="#"+Math.floor(16777215*Math.random()).toString(16);$(t).find(".widgetimgcontainer").css("background-color",o),t.on("click",function(a){$(".cmswidget").removeClass("selected"),$(t).find(".cmswidget").addClass("selected"),n.selWidgetType=e.type,n.selWidgetForAdd=e.comp})}}}]).directive("cmsrow",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"A",transclude:!0,scope:{row:"=row"},template:'<div class="cmsrow" ng-style="row.style" style="background-size:cover;"><div ng-transclude></div></div>',link:function(e,t,a){t.on("click",function(e){})}}}]).directive("cmscell",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"A",replace:!0,transclude:!0,scope:{row:"=row",col:"=col",colindex:"=colindex",rows:"=rows",rowindex:"=rowindex"},template:'<div class="cmscell" ng-style="col.style" style="background-size:cover;"><div class="clearfix hide toolbargroup"><cmsrowtoolbar rowindex="rowindex" row="row" col="col" colindex="colindex" rows="rows" class="pull-left"></cmsrowtoolbar><cmscolumntoolbar rowindex="rowindex" row="row" col="col" colindex="colindex" rows="rows" indentifyerValue="indentifyerValue" class="pull-left"></cmscolumntoolbar></div><div ng-transclude ></div><div class="btn btn-primary cmswidbtn hide"  ng-click="showAddWidget();">+</div></div>',link:function(e,t,a){e.showAddWidget=function(){n.selcolforAdd=e.col,n.rowindex=e.rowindex,n.colindex=e.colindex,$("#addWidgetsModal").modal("show")},t.on("mouseover",function(e){1!=n.previewmode&&($(".toolbargroup").addClass("hide"),$(t).find(".toolbargroup").removeClass("hide"),$(t).addClass("activecell"),$(t).find(".cmswidbtn").removeClass("hide"))}),t.on("mouseout",function(e){1!=n.previewmode&&($(t).removeClass("activecell"),$(t).find(".cmswidbtn").addClass("hide"))}),t.on("click",function(e){$(".layout-cell").removeClass("activecell"),$(".cmswidbtn").addClass("hide"),$(t.children()[0]).children().last().removeClass("hide")}),$(window).width()<=768||$("#themeCarosel").owlCarousel("destroy")}}}]).directive("cmsrowtoolbar",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"E",transclude:!1,scope:{row:"=row",col:"=col",rows:"=rows",rowindex:"=rowindex",colindex:"=colindex",index:"=index"},template:'<div class="cmsrowtoolbarcontainer" row="row" ><span class="pull-left cmsrowtoolbarmoveicon positionRelative"><i class="fa fa-arrow-up positionAbsolute iconFixedTop" ng-click="moveRowUp()" title="Move Up"></i><i class="fa fa-arrow-down positionAbsolute iconFixedBottom" ng-click="moveRowDown()" title="Move Down"></i></span>Row<span class="fa fa-times cmsrowtoolbararrowicon pull-right" ng-click="deleteRow()" ></span><span class="fa fa fa-pencil cmsrowtoolbararrowicon pull-right" ng-click="editRow()" ></span><span class="fa fa fa-plus cmsrowtoolbararrowicon pull-right" ng-click="addRow()" ></span><span class="fa fa-bars cmsrowtoolbararrowicon pull-right" ng-click="addcmscell()" ></span></div>',link:function(e,a,o){e.popup={},e.popup.addCmsCellPopupOpen=!1,e.popup.editCmsCellPopupOpen=!1,e.addRow=function(){n.pagedata.rows.push({cols:[{span:12,style:{},components:[]}],style:{},identifier:"12"})},e.addcmscell=function(){if(!e.popup.addCmsCellPopupOpen){var a=t('<cmsaddcell row="row" col="col" colindex="colindex" rows="rows" rowindex="rowindex" popup="popup" ></cmsaddcell>')(e);$("body").append(a),e.popup.addCmsCellPopupOpen=!0}},e.editRow=function(){if(!e.popup.editCmsCellPopupOpen){$("#cellbgdisp").css("backgroundColor","transparent"),$("#cellfgdisp").css("backgroundColor","transparent"),e.row&&e.row.style&&e.row.style["background-color"]&&$("#cellbgdisp").css("backgroundColor",e.row.style["background-color"]),e.row&&e.row.style&&e.row.style.color&&$("#cellfgdisp").css("backgroundColor",e.row.style.color),$("#columnDesignModel").modal("show");var a=t("<cmsrowsettings popup='popup' row='row'></cmsrowsettings>")(e);$("body").append(a),e.popup.editCmsCellPopupOpen=!0}},e.deleteRow=function(){1==e.rows.length?alert("Cannot delete last row in the webpage"):e.rows.splice(e.rowindex,1)},e.moveRowUp=function(){if(0<e.rowindex){var t=e.rows[e.rowindex];e.rows[e.rowindex]=e.rows[e.rowindex-1],e.rows[e.rowindex-1]=t,delete t}},e.moveRowDown=function(){if(e.rows.length-1>e.rowindex){var t=e.rows[e.rowindex];e.rows[e.rowindex]=e.rows[e.rowindex+1],e.rows[e.rowindex+1]=t,delete t}}}}}]).directive("cmscolumntoolbar",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"E",transclude:!1,scope:{row:"=row",col:"=col",colindex:"=colindex",rowindex:"=rowindex",rows:"=rows"},template:'<div class="cmscolumntoolbarcontainer" ><span class="pull-left cmsrowtoolbarmoveicon positionRelative"><i class="fa fa-arrow-left positionAbsolute iconFixedLeft" ng-click="moveColumLeft()" title="Move Left"></i><i class="fa fa-arrow-right positionAbsolute iconFixedRight" ng-click="moveColumRight()" title="Move Right"></i></span>Column<span ng-click="deleteColumn();" class="fa fa-times cmsrowtoolbararrowicon pull-right" ></span><span ng-click="editColumn();" class="fa fa-pencil cmsrowtoolbararrowicon pull-right" ></span><span ng-click="addColumn();" ng-if="indentifyerValue"  class="fa fa-plus cmsrowtoolbararrowicon pull-right" ></span></div>',link:function(e,a,n){e.indentifyerValue=!1,e.resetAddCollFlag=function(){e.$watch(function(){"12"==e.row.identifier?(e.indentifyerValue=e.row.cols.length<1,console.log(e.indentifyerValue)):"84"==e.row.identifier||"48"==e.row.identifier||"66"==e.row.identifier?(e.indentifyerValue=e.row.cols.length<2,console.log(e.indentifyerValue)):"444"==e.row.identifier&&(e.indentifyerValue=e.row.cols.length<3,console.log(e.indentifyerValue))})},e.resetAddCollFlag(),e.deleteColumn=function(){1==e.rows.length&&1==e.rows[0].cols.length?alert("Cannot delete last column in the webpage"):(e.row.identifier||(e.row.identifier=e.row.cols.map(function(e){return e.span}).join("")),e.row.cols.splice(e.colindex,1),e.row.cols.length||e.rows.splice(e.rowindex,1)),e.resetAddCollFlag()},e.addColumn=function(){switch(e.row.identifier||(e.row.identifier=e.row.cols.map(function(e){return e.span}).join("")),e.row.identifier){case"444":e.row.cols.length<3&&e.row.cols.push({span:"4",components:[],style:{}});break;case"66":e.row.cols.length<2&&e.row.cols.push({span:"6",components:[],style:{}});break;case"84":case"48":e.row.cols.length<2&&(e.row.cols.push({span:"8"==e.row.cols[0].span?"4":"8",components:[],style:{}}),e.row.identifier=e.row.cols[0].span+""+e.row.cols[1].span)}e.resetAddCollFlag()},e.editColumn=function(){$("#cellbgdisp").css("backgroundColor","transparent"),$("#cellfgdisp").css("backgroundColor","transparent"),e.col&&e.col.style&&e.col.style["background-color"]&&$("#cellbgdisp").css("backgroundColor",e.col.style["background-color"]),e.col&&e.col.style&&e.col.style.color&&$("#cellfgdisp").css("backgroundColor",e.col.style.color),$("#columnDesignModel").modal("show");var a=t('<cmscellsettings rowindex="rowindex" row="row" col="col" colindex="colindex" rows="rows" ></cmscellsettings>')(e);$("body").append(a)},e.moveColumLeft=function(){if(e.colindex>0){var t=e.row.cols[e.colindex];e.row.cols[e.colindex]=e.row.cols[e.colindex-1],e.row.cols[e.colindex-1]=t,delete t}},e.moveColumRight=function(){if(e.colindex<e.row.cols.length-1){var t=e.row.cols[e.colindex];e.row.cols[e.colindex]=e.row.cols[e.colindex+1],e.row.cols[e.colindex+1]=t,delete t}}}}}]).directive("cmscellwidget",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"A",transclude:!0,scope:{row:"@row",comp:"=comp",col:"=col",rowindex:"=rowindex",colindex:"=colindex",index:"=index"},template:'<div class="cmswidgetcontainer hide" data-title="{{comp.widget ? comp.widget.title  : comp.applet.displayname}}" ><cmswidgettoolbar index="index" col="col" rowindex="rowindex" colindex="colindex" comp="comp" title="{{comp.widget ? comp.widget.title  : comp.applet.displayname}}" class="cmswidgettoolbar hide"></cmswidgettoolbar><div ng-transclude></div></div>',link:function(e,t,a){if(e.comp.widget?$(t).find(".cmswidgetcontainer").attr("id","wid-"+e.comp.widgetid):e.comp.applet&&$(t).find(".cmswidgetcontainer").attr("id","applet-"+e.comp.applet._id),e.comp.permissions&&e.comp.permissions.length>0&&0==n.studiomode){var o=!1;if(n.user&&n.user.role)for(var i=0;i<e.comp.permissions.length;i++)-1!=n.user.role.indexOf(e.comp.permissions[i])&&(o=!0);o?$(t).find(".cmswidgetcontainer").removeClass("hide"):$(t).find(".cmswidgetcontainer").addClass("hide")}else $(t).find(".cmswidgetcontainer").removeClass("hide");t.on("mouseover",function(a){if(1!=n.previewmode){var o=document.getElementById("textwidth");e.comp.widget?$("#textwidth").html(e.comp.widget.title):$("#textwidth").html(e.comp.applet.displayname),o.style.fontSize=12;var i=o.clientWidth+150+"px";$(t).find(".cmswidgettoolbarcontainer").css("width",i),$(t).find(".cmswidgettoolbar").removeClass("hide"),$(t).find(".cmswidgettoolbarcontainer").css("top","10px");var r=$(t).parent().width()/2-$(t).find(".cmswidgettoolbarcontainer").width()/2;$(t).find(".cmswidgettoolbarcontainer").css("left",r+"px")}}),t.on("mouseout",function(e){1!=n.previewmode&&$(t).find(".cmswidgettoolbar").addClass("hide")})}}}]).directive("cmswidgettoolbar",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"E",transclude:!1,scope:{title:"@title",comp:"=comp",col:"=col",rowindex:"=rowindex",colindex:"=colindex",index:"=index"},template:'<div class="cmswidgettoolbarcontainer"  >\x3c!--span title="Move" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\'}"  data-drag="true" jqyoui-draggable="{animate: true, onStart:\'startDrag(comp, rowindex, colindex, index)\'}"  data-drag="true" title="{{comp.title}}"class="fa fa-arrows pull-left cmsrowtoolbardragicon"></span--\x3e{{title}}<span title="Delete" ng-click="deleteWidget();" class="widgettoolbarbtn fa fa-times pull-right cmsrowtoolbararrowicon" ></span><span title="Duplicate" ng-click="duplicateWidget();" class="widgettoolbarbtn fa fa-copy pull-right cmsrowtoolbararrowicon"></span><span title="Edit" ng-hide={{comp.applet}} ng-click="editWidget();" class="widgettoolbarbtn fa fa-pencil pull-right cmsrowtoolbararrowicon" ></span></div>',link:function(e,t,o){e.startDrag=function(t,a,o,i,r,s){n.curdrag=e.comp.widget?e.comp.widget:e.comp.applet,n.curdragwidgetid=e.comp.widgetid,n.ismove=!0,n.movelocation=i-1+":"+r+":"+s,n.col=e.col,n.curindex=e.index},e.duplicateWidget=function(){var t={widget:angular.copy(e.comp.widget)};a.post("/sites/addwidget/"+n.site.tenantid+"/"+n.site._id,t.widget).then(function(a){t.widgetid=a.data._id,e.col.components.push(t),null==n.pagedata.widgets&&(n.pagedata.widgets=[]),n.pagedata.widgets.push(t.widgetid)})},e.editWidget=function(){n.$emit("onCmsWidgetEdit",{comp:e.comp,col:e.col,index:e.index})},e.deleteWidget=function(){n.$emit("onCmsWidgetDelete",{comp:e.comp,col:e.col,index:e.index})},$(t).mousemove(function(e){return!1})}}}]).directive("cmscellsettings",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"E",transclude:!1,template:'<div id="mycellSettingmodel" class="cellsetting cmsSetting "><div  class="mheader">Column Setting</div><div  class="mbody"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a data-target="#cellSettingGernal" role="tab" data-toggle="tab">General</a></li><li role="presentation"><a data-target="#cellSettingGDesign" role="tab" data-toggle="tab">Design Option</a></li></ul><div class="tab-content"><div role="tabpanel" class="tab-pane modalCustomSCroll active" id="cellSettingGernal"><div class="row"><div class="col-xs-6 col-sm-5 col-md-5"><div class="form-group" style="height:190px"><label>Select Background Color</label><cmscolorpickersetting value="col.style[\'background-color\']" class="cmscolorset"></cmscolorpickersetting><div  class="clearfix"></div></div></div><div class="col-xs-6 col-sm-5 col-md-7"><div class="form-group positionRelative" style="height:190px"><label>Select Background Image</label><cmsuploadimagepicker  label="Select Image"  cssurl="true" class="positionRelative cmsuploadPicker" value="col.style[\'background-image\']"></cmsuploadimagepicker><div  class="clearfix"></div></div></div></div></div><div role="tabpanel" class="tab-pane modalCustomSCroll" id="cellSettingGDesign"><div style="width:60%; float:left" id="setGapBox"><div class="marginBox  positionRelative"><div class="positionAbsolute settingTitle">Margin</div><input ng-model="col.style[\'margin-left\']" ng-blur="checkpx($event)"  data-key="margin-left"  placeholder="px" class=" text-center leftinput positionAbsolute    settinginput" id="leftmargin"><input ng-model="col.style[\'margin-right\']" ng-blur="checkpx($event)" data-key="margin-right" placeholder="px" class="text-center rightinput positionAbsolute   settinginput" id="rightmargin"><input ng-model="col.style[\'margin-top\']" ng-blur="checkpx($event)"  data-key="margin-top" placeholder="px" class="text-center topinput positionAbsolute   settinginput" id="topmargin"><input ng-model="col.style[\'margin-bottom\']" ng-blur="checkpx($event)" data-key="margin-bottom" placeholder="px" class="text-center bottominput positionAbsolute   settinginput" id="bottommargin"><div class="borderBox positionRelative"><div class="positionAbsolute settingTitle">Border</div><input ng-model="col.style[\'border-left-width\']" ng-blur="checkpx($event)" data-key="border-left-width" placeholder="px" class="text-center leftinput positionAbsolute   settinginput" id="leftborder"><input ng-model="col.style[\'border-right-width\']" ng-blur="checkpx($event)" data-key="border-right-width"  placeholder="px"class="text-center rightinput positionAbsolute   settinginput" id="rightborder"><input ng-model="col.style[\'border-top-width\']" ng-blur="checkpx($event)" data-key="border-top-width" placeholder="px"class="text-center topinput positionAbsolute   settinginput" id="topborder"><input ng-model="col.style[\'border-bottom-width\']" ng-blur="checkpx($event)" data-key="border-bottom-width" placeholder="px" class="text-center bottominput positionAbsolute   settinginput" id="bottomborder"><div class="paddingBox positionRelative"><div class="positionAbsolute settingTitle">Padding</div><input ng-model="col.style[\'padding-left\']" ng-blur="checkpx($event)" data-key="padding-left" placeholder="px" class="text-center leftinput positionAbsolute   settinginput" id="leftpadding"><input ng-model="col.style[\'padding-right\']" ng-blur="checkpx($event)" data-key="padding-right" placeholder="px"class="text-center rightinput positionAbsolute   settinginput" id="rightpadding"><input ng-model="col.style[\'padding-top\']" ng-blur="checkpx($event)" data-key="padding-top" placeholder="px" class="text-center topinput positionAbsolute   settinginput" id="toppadding"><input ng-model="col.style[\'padding-bottom\']" ng-blur="checkpx($event)" data-key="padding-bottom" placeholder="px" class="text-center bottominput positionAbsolute settinginput" id="bottompadding"><div class="blankBox positionRelative"></div></div></div></div></div><div style="width:37%; float:left" class="settingLeftpanel"><div class="form-group"><label>Border Color</label><cmscolorpickersetting value="col.style[\'border-color\']" ></cmscolorpickersetting><div class="clearfix"></div></div><div class="form-group"><label>Border style</label><input ng-model="col.style[\'border-style\']" type="text" class="form-control" style="display:none" /><div class="dropdown dropdownMenuSelect border1px borderRadius4px"><button class="btn dropdown-toggle" type="button" data-toggle="dropdown"><span ng-if="!col.style[\'border-style\']">Select Type</span><span style="text-transform: capitalize;" ng-if="col.style[\'border-style\']">{{col.style[\'border-style\']}}</span><span class="fa fa-angle-down pull-right"></span></button><ul class="dropdown-menu"><li  ng-click="selectStyle(\'none\')"><a class="displayBlock">None</a></li><li  ng-click="selectStyle(\'dotted\')"><a class="displayBlock">Dotted</a></li><li  ng-click="selectStyle(\'solid\')"><a class="displayBlock">Solid</a></li><li  ng-click="selectStyle(\'double\')"><a class="displayBlock">Double</a></li><li  ng-click="selectStyle(\'dashed\')"><a class="displayBlock">Dashed</a></li></ul></div></div><div class="form-group"><label>Border Radius</label><input ng-model="col.style[\'border-radius\']" ng-blur="checkBorderpx($event)" data-key="border-radius"  placeholder="Type Number" type="text" class="form-control" /></div><div class="form-group"><label>Text Color</label><cmscolorpickersetting value="col.style[\'color\']" ></cmscolorpickersetting></div></div><div  class="clearfix"></div></div></div><div  class="mfooter"><button class="btn btn-default" ng-click="cancelCellSetting();" style="margin-right:10px">Close</button></div></div>',scope:{row:"=row",col:"=col",colindex:"=colindex",rows:"=rows",rowindex:"=rowindex"},link:function(e,t,a){console.log("cmscellsettings-----",e),e.col.style||(e.col.style={}),$(t).draggable({handle:".mheader"}),$(t).css({left:"40%",top:"160px","z-index":"99",position:"fixed"}),e.cancelCellSetting=function(){$("#mycellSettingmodel").remove()},e.checkpx=function(t){var a=angular.element($(t.target)).data("key");angular.element($(t.target)).val();if(""!==$(t.target).val()){var n,o=(n=parseInt($(t.target).val()))+($(t.target).val().match(/px|%|em/)||"px");if(e.col.style[a]=o,"border-left-width"==a||"border-right-width"==a||"border-top-width"==a||"border-bottom-width"==a)-1==(n=""+(n=parseInt((""+$(t.target).val()).replace(/\D/g,""))||0)).indexOf("px")&&(e.col.style[a]=n+"px")}},e.checkBorderpx=function(t){var a=angular.element($(t.target)).data("key");angular.element($(t.target)).val();if(""!==$(t.target).val()){var n=parseInt((""+$(t.target).val()).replace(/\D/g,""))||0;n=""+n;a=$(t.target).attr("data-key");-1==n.indexOf("px")&&(e.col.style[a]=n+"px")}},e.selectStyle=function(t){e.col.style["border-style"]=t},t.on("keypress",".settinginput",function(){$(this).val().replace(/ /g,"")})}}}]).directive("cmsrowsettings",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"E",transclude:!1,template:'<div id="myrowSettingmodel" class="cellsetting cmsSetting "><div  class="mheader">Row Setting</div><div  class="mbody"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a data-target="#cellSettingGernal" role="tab" data-toggle="tab">General</a></li><li role="presentation"><a data-target="#cellSettingGDesign" role="tab" data-toggle="tab">Design Option</a></li></ul><div class="tab-content"><div role="tabpanel" class="tab-pane modalCustomSCroll active" id="cellSettingGernal"><div class="row"><div class="col-xs-6 col-sm-6 col-md-5"><div class="form-group" style="height:190px"><label>Select Background Color</label><cmscolorpickersetting value="row.style[\'background-color\']" ></cmscolorpickersetting><div  class="clearfix"></div></div></div><div class="col-xs-6 col-sm-6 col-md-7"><div class="form-group positionRelative" style="height:190px"><label>Select Background Image</label><cmsuploadimagepicker class="positionRelative cmsuploadPicker"   label="Select Image" cssurl="true" value="row.style[\'background-image\']"></cmsuploadimagepicker><div  class="clearfix"></div></div></div></div></div><div role="tabpanel" class="tab-pane modalCustomSCroll" id="cellSettingGDesign"><div style="width:60%; float:left" id="setGapBox"><div class="marginBox  positionRelative"><div class="positionAbsolute settingTitle">Margin</div><input ng-model="row.style[\'margin-left\']" ng-blur="checkpx($event)"  data-key="margin-left"  placeholder="px" class=" text-center leftinput positionAbsolute    settinginput" id="leftmargin"><input ng-model="row.style[\'margin-right\']" ng-blur="checkpx($event)" data-key="margin-right" placeholder="px" class="text-center rightinput positionAbsolute   settinginput" id="rightmargin"><input ng-model="row.style[\'margin-top\']" ng-blur="checkpx($event)"  data-key="margin-top" placeholder="px"class="text-center topinput positionAbsolute   settinginput" id="topmargin"><input ng-model="row.style[\'margin-bottom\']" ng-blur="checkpx($event)" data-key="margin-bototm" placeholder="px" class="text-center bottominput positionAbsolute   settinginput" id="bottommargin"><div class="borderBox positionRelative"><div class="positionAbsolute settingTitle">Border</div><input ng-model="row.style[\'border-left-width\']" ng-blur="checkpx($event)" data-key="border-left-width" placeholder="px" class="text-center leftinput positionAbsolute   settinginput" id="leftborder"><input ng-model="row.style[\'border-right-width\']" ng-blur="checkpx($event)" data-key="border-right-width"  placeholder="px"class="text-center rightinput positionAbsolute   settinginput" id="rightborder"><input ng-model="row.style[\'border-top-width\']" ng-blur="checkpx($event)" data-key="border-top-width" placeholder="px"class="text-center topinput positionAbsolute   settinginput" id="topborder"><input ng-model="row.style[\'border-bottom-width\']" ng-blur="checkpx($event)" data-key="border-bottom-width" placeholder="px" class="text-center bottominput positionAbsolute   settinginput" id="bottomborder"><div class="paddingBox positionRelative"><div class="positionAbsolute settingTitle">Padding</div><input ng-model="row.style[\'padding-left\']" ng-blur="checkpx($event)" data-key="padding-left" placeholder="px" class="text-center leftinput positionAbsolute   settinginput" id="leftpadding"><input ng-model="row.style[\'padding-right\']" ng-blur="checkpx($event)" data-key="padding-right" placeholder="px"class="text-center rightinput positionAbsolute   settinginput" id="rightpadding"><input ng-model="row.style[\'padding-top\']" ng-blur="checkpx($event)" data-key="padding-top" placeholder="px" class="text-center topinput positionAbsolute   settinginput" id="toppadding"><input ng-model="row.style[\'padding-bottom\']" ng-blur="checkpx($event)" data-key="padding-bottom" placeholder="px" class="text-center bottominput positionAbsolute settinginput" id="bottompadding"><div class="blankBox positionRelative"></div></div></div></div></div><div style="width:37%; float:left" class="settingLeftpanel"><div class="form-group"><label>Border Color</label><cmscolorpickersetting value="row.style[\'border-color\']" ></cmscolorpickersetting><div class="clearfix"></div></div><div class="form-group"><label>Border style</label><input ng-model="row.style[\'border-style\']" type="text" class="form-control" style="display:none" /><div class="dropdown dropdownMenuSelect border1px borderRadius4px"><button class="btn dropdown-toggle" type="button" data-toggle="dropdown"><span ng-if="!row.style[\'border-style\']">Select Type</span><span style="text-transform: capitalize;" ng-if="row.style[\'border-style\']">{{row.style[\'border-style\']}}</span><span class="fa fa-angle-down pull-right"></span></button><ul class="dropdown-menu"><li  ng-click="selectStyle(\'none\')"><a class="displayBlock">None</a></li><li  ng-click="selectStyle(\'dotted\')"><a class="displayBlock">Dotted</a></li><li  ng-click="selectStyle(\'solid\')"><a class="displayBlock">Solid</a></li><li  ng-click="selectStyle(\'double\')"><a class="displayBlock">Double</a></li><li  ng-click="selectStyle(\'dashed\')"><a class="displayBlock">Dashed</a></li></ul></div></div><div class="form-group"><label>Border Radius</label><input ng-model="row.style[\'border-radius\']" ng-blur="checkBorderpx($event)" data-key="border-radius"  placeholder="Type Number" type="text" class="form-control" /></div><div class="form-group"><label>Text Color</label><cmscolorpickersetting value="row.style[\'color\']" ></cmscolorpickersetting></div></div><div  class="clearfix"></div></div></div><div  class="mfooter"><button class="btn btn-default" ng-click="cancelCellrowSetting();" style="margin-right:10px">Close</button></div></div>',scope:{popup:"=popup",row:"=row"},link:function(e,t,a){e.row.style||(e.row.style={}),e.saveRowsSetting=function(){$("#myrowSettingmodel").remove(),e.popup.editCmsCellPopupOpen=!1},$(t).draggable({handle:".mheader"}),$(t).css({left:"40%",top:"160px","z-index":"99",position:"fixed"}),e.cancelCellrowSetting=function(){$("#myrowSettingmodel").remove(),e.popup.editCmsCellPopupOpen=!1},e.checkpx=function(t){var a=angular.element($(t.target)).data("key");angular.element($(t.target)).val();if(""!==$(t.target).val()){var n,o=(n=parseInt($(t.target).val()))+($(t.target).val().match(/px|%|em/)||"px");if(e.row.style[a]=o,"border-left-width"==a||"border-right-width"==a||"border-top-width"==a||"border-bottom-width"==a)-1==(n=""+(n=parseInt((""+$(t.target).val()).replace(/\D/g,""))||0)).indexOf("px")&&(e.row.style[a]=n+"px")}},e.checkBorderpx=function(t){var a=angular.element($(t.target)).data("key");angular.element($(t.target)).val();if(""!==$(t.target).val()){var n=parseInt((""+$(t.target).val()).replace(/\D/g,""))||0;n=""+n;$(t.target).attr("data-key");-1==n.indexOf("px")&&(e.row.style[a]=n+"px")}},e.selectStyle=function(t){e.row.style["border-style"]=t},t.on("keypress",".settinginput",function(){$(this).val().replace(/ /g,"")})}}}]).directive("cmsaddcell",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"E",transclude:!1,scope:{row:"=row",col:"=col",colindex:"=colindex",rowindex:"=rowindex",rows:"=rows",popup:"=popup"},template:'<div id="cmsrowaddcellsetting" class="cellsetting cmsSetting cellSmallBox"><div  class="mheader"><i class="fa fa-times pull-right" ng-click="cancelrowaddcellSetting();" ></i> Column Setting</div><div  class="mbody"><div  class="padding15"><div class="font16">Row Layout</div><div class="marginTop10 cmsCollum"><span ng-click="chngColls(12)"><img src="/images/cmstemplates/1column.png" /></span><span ng-click="chngColls(66)"><img src="/images/cmstemplates/2column.png" /></span><span ng-click="chngColls(84)"><img src="/images/cmstemplates/2column7030.png" /></span><span ng-click="chngColls(48)"><img src="/images/cmstemplates/2column3070.png" /></span><span ng-click="chngColls(444)"><img src="/images/cmstemplates/3column.png" /></span></div></div></div></div></div>',link:function(e,t,a){$(t).draggable({handle:".mheader"}),$(t).css({left:"48%",top:"160px",position:"fixed","z-index":"9999"}),e.cancelrowaddcellSetting=function(){$("#cmsrowaddcellsetting").remove(),e.popup.addCmsCellPopupOpen=!1},e.chngColls=function(t){var a=t.toString(),o=JSON.parse(JSON.stringify(n.pagedata.rows[e.rowindex].cols));if(n.pagedata.rows[e.rowindex].cols=[],n.pagedata.rows[e.rowindex].identifier=a,"12"==a)n.pagedata.rows[e.rowindex].cols=[{span:12,components:[],style:{}}];else for(var i=0;i<a.length;i++)n.pagedata.rows[e.rowindex].cols[i]={span:a[i],components:[],style:{}};if(o.length>n.pagedata.rows[e.rowindex].cols.length){var r=n.pagedata.rows[e.rowindex].cols.length-1,s=[];3==o.length?(s=o[1].components.concat(o[2].components),r?o[0]&&o[0].components&&(n.pagedata.rows[e.rowindex].cols[0].components=o[0].components):s=o[0].components.concat(s)):2==o.length&&(s=o[0].components.concat(o[1].components)),n.pagedata.rows[e.rowindex].cols[r].components=s}else o[0]&&o[0].components&&(n.pagedata.rows[e.rowindex].cols[0].components=o[0].components),o[1]&&o[1].components&&(n.pagedata.rows[e.rowindex].cols[1].components=o[1].components),o[2]&&o[2].components&&(n.pagedata.rows[e.rowindex].cols[2].components=o[2].components);o[0]&&o[0].style&&n.pagedata.rows[e.rowindex].cols[0]&&(n.pagedata.rows[e.rowindex].cols[0].style=o[0].style),o[1]&&o[1].style&&n.pagedata.rows[e.rowindex].cols[1]&&(n.pagedata.rows[e.rowindex].cols[1].style=o[1].style),o[2]&&o[2].style&&n.pagedata.rows[e.rowindex].cols[2]&&(n.pagedata.rows[e.rowindex].cols[2].style=o[2].style)}}}}]).directive("cmscontentimport",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"E",transclude:!1,replace:!0,template:'<div class="leftBoxbtnMargin"><button ng-click="openContentImport();" type="submit" class="btn primary-btn studioPrimaryBorder pull-right"><add-icon class="icon10"></add-icon> Import Content</button>',link:function(e,t,a){e.openContentImport=function(){n.showcontentimportsearch=!0,n.showcontentimportresult=!1,n.showcontentimportsuccess=!1,$("#contentImportModel").modal("show")}}}}]).directive("cmsimagesettings",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"E",transclude:!1,replace:!0,template:'<div><button class="btn primary-btn studioPrimaryBorder pull-right" ng-click="openContentImport();" type="submit" ><add-icon class="icon10"></add-icon> Import Content</button>',link:function(e,t,a){e.openContentImport=function(){$("#contentImportModel").modal("show")}}}}]).directive("cmstexteditor",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"AE",transclude:!1,scope:{attribute:"=compval",type:"@type"},replace:!0,link:function(e,t,a){"editor"==e.type&&(0==$("#ckeditorjs").length&&($.fn.modal.Constructor.prototype.enforceFocus=function(){modal_this=this,$(document).on("focusin.modal",function(e){modal_this.$element[0]===e.target||modal_this.$element.has(e.target).length||$(e.target.parentNode).hasClass("cke_dialog_ui_input_select")||$(e.target.parentNode).hasClass("cke_dialog_ui_input_text")||modal_this.$element.focus()})}),setTimeout(function(){var t;(t=CKEDITOR.instances.texteditor)&&t.destroy(!0),CKEDITOR.config.enterMode=CKEDITOR.ENTER_BR,(t=CKEDITOR.replace("texteditor",{allowedContent:{script:!0,$1:{elements:CKEDITOR.dtd,attributes:!0,styles:!0,classes:!0}},autoUpdateElement:!1,removeButtons:"Save,NewPage,Templates,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Flash,Iframe,sourcedialog",removePlugins:"sourcedialog,emogi,base64image",height:250,a11ychecker_quailParams:{guideline:["imgNonDecorativeHasAlt","imgImportantNoSpacerAlt","aTitleDescribesDestination","aAdjacentWithSameResourceShouldBeCombined","aImgAltNotRepetitive","aMustNotHaveJavascriptHref","aSuspiciousLinkText","blockquoteNotUsedForIndentation","documentVisualListsAreMarkedUp","headerH1","headerH2","headerH3","headerH4","imgAltIsDifferent","imgAltIsTooLong","imgAltNotEmptyInAnchor","imgAltTextNotRedundant","imgHasAlt","imgShouldNotHaveTitle","linkHasAUniqueContext","pNotUsedAsHeader","tableDataShouldHaveTh","imgWithEmptyAlt"]},contentsCss:["ckeditor/contents.css"]})).on("change",function(a){e.attribute.value=t.getData(),e.$apply()}),t.on("key",function(a){e.attribute.value=t.getData(),e.$apply()})},100))}}}]).directive("cmscolorpicker",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"E",transclude:!1,replace:!0,scope:{value:"=value"},template:'<div class="colorcompcontainer"><div class="colorcompdisp"></div><div class="colorcompselect">Select color</div></div>',link:function(e,t,a){$(t).ColorPicker({color:"#fff",onShow:function(e){return $(e).fadeIn(500),!1},onHide:function(e){return $(e).fadeOut(500),!1},onSubmit:function(e,t,a,n){$(n).val(t),$(n).ColorPickerHide()},onChange:function(a,n,o){$(t).find(".colorcompdisp").css("backgroundColor","#"+n),e.value="#"+n,e.$apply()}})}}}]).directive("cmscolorpickersetting",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"E",transclude:!1,replace:!0,scope:{value:"=value"},template:'<div class="colorcompcontainer"><div class="customcolorpicker positionRelative"><div class="colorInner"><div class="selectPickerColor text-center"><img src="images/color-picker.svg" class="icon50" ><span class="displayBlock marginTop10px">Select Color</span></div><div class="colorcompdisp" style="Background:{{value}}"></div><div ng-if="!value" class="colorcompselect">Select color</div><div ng-if="value" class="colorcompselect">Change color</div></div><div class="selectetdColr"><span>{{value}}</span><span class="pull-right cmsColor cursorPointer" ng-if="value" ng-click="removeColor()"><i class="fa fa-times"></i></span></div></div></div>',link:function(e,t,a){$(t).ColorPicker({color:"#fff",onShow:function(e){return $(e).fadeIn(500),!1},onHide:function(e){return $(e).fadeOut(500),!1},onSubmit:function(e,t,a,n){$(n).val(t),$(n).ColorPickerHide()},onChange:function(a,n,o){$(t).find(".colorcompdisp").css("backgroundColor","#"+n),e.value="#"+n,e.$apply()}}),e.removeColor=function(){$(t).find(".colorcompdisp").css("backgroundColor",""),e.value="",e.$apply()}}}}]).directive("sidebar",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location","$timeout",function(e,t,a,n,o,i,r,s){return{restrict:"E",transclude:!1,replace:!0,template:'<nav id="sidebar"><div class="sidebar-header text-center active tabFocusHighlighter cursorPointer" tabindex="0" ng-click="goHome();"><a href="javascript:void(0)"><img class="logo tenantbig" ng-src="{{logoUrl}}" alt="tenant big logo"><img class="logo tenantsmall" ng-src="{{smallLogoUrl}}"  alt="tenant small logo"></a><div class="separator"></div></div><div class="applets-heading active"><div class="searchbox-container proximaFont clearfix" ><img class="searchicon convertsvg pull-right" src="/images/search.svg" alt="search" ng-click="showSearchText()"><input class="proximaFont ng-pristine ng-valid" aria-label="search input" id="searchBox" name="q" ng-model="searchMenu" placeholder="Search apps.." type="text"><img class="remove-search" ng-click="searchMenu = &quot;&quot;; isSearchActive = false;" src="/images/cross.svg" alt="cross icon" ng-show="isSearchActive"></div><div class="searchbox-container proximaFont clearfix ng-hide" ng-show="isSearchActive"><input class="proximaFont ng-pristine ng-valid" aria-label="search" name="q" ng-model="searchMenu" placeholder="Search apps.." type="text"><img class="remove-search" ng-click="searchMenu = &quot;&quot;; isSearchActive = false;" src="images/cross.svg" alt="cross icon"></div></div><ul class="list-unstyled components overflowYScroll mCSB_container" id="menu-block" aria-label="Navigation lists" ><li ng-if="site.leftnavconfig.leftnavql && !site.leftnavconfig.leftnaverp" ng-show="user.accessToken" class="panel"><div quicklaunchmenu ></div> </li><li ng-if="appletList != undefined  && appletList.length != 0"  ><div favappletmenu >  </div> </li><li  ng-hide="nav.hideOnSidebar" ng-repeat="nav in rbacnavmenu | filter: IsChildObjectVisible" class="panel"><a id="{{nav._id}}" ng-if= "nav.children.length > 0 && checkGroupElement(nav)" tabindex="0" title="{{nav.label}}" class="menu-item group-menu cursorPointer"  data-parent=".mCSB_container" data-target="#grp{{nav.id}}" data-toggle="collapse" aria-expanded="false" ng-click="menuClick(nav)"><img class=" sidebar-menu-icon" ng-src="{{nav.image}}" alt=""><span class="innertitle">{{nav.label}}</span></a><ul ng-if= "nav.children.length > 0" class="list-unstyled collapse" ng-class="openChild" id="grp{{nav.id}}" aria-expanded="false" style=""><li ng-hide="page.hideOnSidebar" ng-repeat="page in nav.children" id="sidebarGroup{{$index}}{{nav.id}}"><a id="{{page._id}}" title="{{page.label}}" ng-if= "page.url != null && page.target == null" class="menu-item" ng-href="{{page.url}}" ng-click="menuClick(page);"><img class="hide sidebar-menu-icon" alt="" ng-src="{{page.image}}">{{page.label}}</a><a id="{{page._id}}" title="{{page.label}}" ng-if= "page.url != null && page.target != null " class="menu-item" ng-href="{{page.url}}" target="_blank" ng-click="menuClick(page);"><img class="hide sidebar-menu-icon" alt="" ng-src="{{page.image}}">{{page.label}}</a><a id="{{page._id}}" ng-if= "page.children.length > 0 && page.url == null" tabindex="0" title="{{page.label}}" class="menu-item group-menu cursorPointer"  data-parent="#sidebarGroup{{$index}}{{page.id}}" data-target="#grp{{page.id}}" data-toggle="collapse" aria-expanded="false" ng-click="menuClick(nav)">\x3c!--<img class=" sidebar-menu-icon" ng-src="{{page.image}}">--\x3e<span class="innertitle">{{page.label}}</span></a><ul ng-if= "page.children.length > 0" class="list-unstyled collapse" ng-class="openChild" id="grp{{page.id}}" aria-expanded="false" style=""><li ng-hide="page.hideOnSidebar" ng-repeat="subPage in page.children" ><a id="{{subPage._id}}" title="{{subPage.label}}" ng-if= "subPage.url == null" class="menu-item" ng-href="{{(subPage.url.split(\'/\')[2])}}" ng-click="menuClick(subPage)"><img class="hide sidebar-menu-icon" ng-src="{{subPage.image}}" alt="">{{subPage.label}}</a><a id="{{subPage._id}}" title="{{subPage.label}}" ng-if= "subPage.url != null && subPage.target == null && !subPage.hideOnSidebar" class="menu-item" ng-href="{{subPage.url}}"   ng-click="menuClick(subPage);"><img class="hide sidebar-menu-icon" alt="" ng-src="{{subPage.image}}">{{subPage.label}}</a><a id="{{subPage._id}}" title="{{subPage.label}}" ng-if= "subPage.url != null && subPage.target != null && !subPage.hideOnSidebar" class="menu-item" ng-href="{{subPage.url}}"   ng-click="menuClick(subPage);"><img class="hide sidebar-menu-icon" alt="" ng-src="{{subPage.image}}">{{subPage.label}}</a></li></ul></li></ul><a id="{{nav._id}}" title="{{nav.label}}" ng-if= "nav.children.length == 0 && nav.target == null && nav.type != \'group\'" class="menu-item  cursorPointer" ng-href="{{nav.url}}" ng-click="menuClick(nav)"><img class=" sidebar-menu-icon" alt="" ng-src="{{nav.image}}"><span class="innertitle">{{nav.label}}</span></a><a id="{{nav._id}}" title="{{nav.label}}" ng-if= "nav.children.length == 0 && nav.target != null && nav.type != \'group\'" class="menu-item  cursorPointer" ng-href="{{nav.url}}"  target="_blank" ng-click="menuClick(nav);"><img class=" sidebar-menu-icon" alt="" ng-src="{{nav.image}}"><span class="innertitle">{{nav.label}}</span></a></li></ul><div id="contactSupport" class="contact-support text-center lightgreytext"><a class="menu-item text-center" href="{{site.contactsupporturl}}" target="_blank"><img class="sidebar-menu-icon" src="cmsGallery/contact_support.svg">Contact Support</a><span class="fontSize12"><span class="showPowerBy">Powered by</span> Unifyed<span class="showPowerBy">.  {{curyear}}</span></span></div></nav>',link:function(e,t,o){n.showSearchGlobalText=function(e,t){if(13==e.keyCode){var a=$("#globalSearchInput").val();a&&a.trim().length>=0&&r.path("/globalsearch")}},e.checkGroupElement=function(e){var t=!1;return angular.forEach(e.children,function(e,a){"group"!=e.type&&(t=!0)}),t||angular.forEach(e.children,function(e,a){"group"==e.type&&e.children&&angular.forEach(e.children,function(e,a){"group"!=e.type&&(console.log(e),t=!0)})}),!!t};var l=function(t,a){n.dockApplets=t&&t.data&&t.data.docks?t.data.docks:e.dockAppletsFallBack,e.compare=function(e,t){var a=e.precedence,n=t.precedence,o=0;return a>n?o=1:a<n&&(o=-1),o},n.dockApplets.sort(e.compare),console.log("$rootScope.dockApplets",n.dockApplets);var o=t.data?t.data:e.menudataFallBack;o.menus=function(e){for(var t=[],a=[],n=0;n<e.menus.length;n++)if(-1==t.indexOf(e.menus[n].id))t.push(e.menus[n].id),a.push(e.menus[n]);else for(var o=0;o<a.length;o++)if(a[o].id==e.menus[n].id)for(var i in e.menus[n].actions)a[o].actions.hasOwnProperty(i)||(a[o].actions[i]=!0);return a}(o),o&&o.landingPages.length>0&&(n.rbacFirstLanding=o.landingPages[0]);e.buildMenuTree=function(t){e.masterMenuTree=[];var a=function(e,t){angular.forEach(e,function(e,o){n.rbacFirstLanding&&e.id==n.rbacFirstLanding.pageId&&(n.rbacFirstLanding.menu=e,n.site.landingpage=n.rbacFirstLanding.menu.url),e.path.split("/")[e.path.split("/").length-1]==t.root?(e.children=e.children||[],e.children.push(t)):e.children&&a(e.children,t)})};angular.forEach(t,function(t,o){n.rbacFirstLanding&&t.id==n.rbacFirstLanding.pageId&&(n.rbacFirstLanding.menu=t,n.site.landingpage=n.rbacFirstLanding.menu.url),t.path==t.root?(t.children=[],e.masterMenuTree.push(t)):a(e.masterMenuTree,t)})},e.buildMenuTree(o.menus),n.rbacnavmenu=e.masterMenuTree,n.rbacallmenus=o.menus,console.log("$rootScope.rbacnavmenu",n.rbacnavmenu),console.log("$rootScope.rbacallmenus",n.rbacallmenus),n.user.accessToken&&n.getFavList(),a&&a(),setTimeout(function(){$(".group-menu").keyup(function(e){13===e.keyCode&&($(".list-unstyled").removeClass("in").attr("aria-expanded","false"),$(".group-menu").removeClass("collapsed").attr("aria-expanded","false"),$(this).parent(".panel").length?($(this).addClass("collapsed").attr("aria-expanded","true"),$(this).parent().children(".list-unstyled").addClass("in").attr("aria-expanded","true")):($(this).addClass("collapsed").attr("aria-expanded","true"),$(this).parent().children(".list-unstyled").addClass("in").attr("aria-expanded","true"),$(this).parent().parent().parent(".panel").children(".group-menu").addClass("collapsed").attr("aria-expanded","true"),$(this).parent().parent(".list-unstyled").addClass("in").attr("aria-expanded","true")))}),$(".dropdown.user-profile").keyup(function(e){13==e.keyCode&&$(this).toggleClass("open")}),jQuery("img.sidebar-menu-icon , img.convertsvg , img.dock-menu-icon").each(function(){var e=jQuery(this),t=e.attr("id"),a=e.attr("class"),n=e.attr("src");jQuery.get(n,function(n){var o=jQuery(n).find("svg");void 0!==t&&(o=o.attr("id",t)),void 0!==a&&(o=o.attr("class",a+" replaced-svg")),!(o=o.removeAttr("xmlns:a")).attr("viewBox")&&o.attr("height")&&o.attr("width")&&o.attr("viewBox","0 0 "+o.attr("height")+" "+o.attr("width")),e.replaceWith(o)},"xml")})},1e3)};n.loadGlobalRbac=function(t){var a=["Public"],o="/unifyedrbac/rbac/open/menus",i="POST",r={roles:a=a.concat(n.user.role),product:"global"},s=[r];n.user.accessToken&&(a.push("AllUsers"),o="/unifyedrbac/rbac/user?user="+n.user.email+"&device=mobile",i="GET",s={}),n.callAPI(o,i,s,function(a){e.dockAppletsFallBack=[],e.menudataFallBack=[],2==a.status?n.callAPI("/unifyedrbac/rbac/open/menus","POST",[r],function(a){a?a&&a.data&&(e.menudataFallBack=a.data,a.data.docks&&(e.dockAppletsFallBack=a.data.docks)):(n.rbacnavmenu=[],n.rbacallmenus=[]),l(a,t)},3):a?l(a,t):(n.rbacnavmenu=[],n.rbacallmenus=[],l(a,t))},2)};var c=function(){if(n.user)if(n.site&&n.site.leftnavconfig)try{n.loadGlobalRbac(function(){s(function(){var a=r.path(),n=o;console.log(a,"current url"),console.log(n,"attr url"),e.$watch("urlPath",function(e){n===e?(console.log(n,"linkPath"),console.log(t,"element path")):(console.log(n,"linkPath1"),console.log(e,"current url1"),console.log(t,"element path1"))})},1e3)})}catch(e){console.log(e)}else setTimeout(function(){c()},10);else setTimeout(function(){c()},10)};c(),e.menuClick=function(e){n.$broadcast("onMenuClick",{type:e.type,menu:e}),$("#menu-block").getNiceScroll().remove(),$("#menu-block").niceScroll({cursorwidth:4,cursoropacitymin:.4,cursorcolor:"#ffffff",cursorborder:"none",cursorborderradius:4,autohidemode:"leave",horizrailenabled:!1})},e.goHome=function(){window.siteGroupId?i.location.href="/":n.site.landingpage?r.path(n.site.landingpage):r.path("/app/Settings2/Settings2Page9")},e.openChild="",e.IsChildObjectVisible=function(t){var a=e.searchMenu,n=!0;return null!=a&&null!=a&&a.length>0?(e.openChild="in",n=t.label.toLowerCase().indexOf(a.toLowerCase())>-1,void 0!==t.children&&angular.forEach(t.children,function(e,t){e.label.toLowerCase().indexOf(a.toLowerCase())>-1&&(n=!0),void 0!==e.children&&angular.forEach(e.children,function(e,t){e.label.toLowerCase().indexOf(a.toLowerCase())>-1&&(n=!0)})})):e.openChild="",n},e.IsChildAppletVisible=function(t){var a=e.searchMenu,n=!0;return null!=a&&null!=a&&a.length>0?(e.openChild="in",n=t.appFeatureType.toLowerCase().indexOf(a.toLowerCase())>-1,void 0!==t.applets&&angular.forEach(t.applets,function(e,t){e.appletDisplayName.toLowerCase().indexOf(a.toLowerCase())>-1&&(n=!0),void 0!==e.applets&&angular.forEach(e.applets,function(e,t){e.appletDisplayName.toLowerCase().indexOf(a.toLowerCase())>-1&&(n=!0)})})):e.openChild="",n},e.$watch("searchMenu",function(t){e.IsChildAppletVisible(t),e.IsChildObjectVisible(t),e.searchSvg()}),e.searchSvg=function(){setTimeout(function(){jQuery("img.sidebar-menu-icon , img.convertsvg").each(function(){var e=jQuery(this),t=e.attr("id"),a=e.attr("class"),n=e.attr("src");jQuery.get(n,function(n){var o=jQuery(n).find("svg");void 0!==t&&(o=o.attr("id",t)),void 0!==a&&(o=o.attr("class",a+" replaced-svg")),!(o=o.removeAttr("xmlns:a")).attr("viewBox")&&o.attr("height")&&o.attr("width")&&o.attr("viewBox","0 0 "+o.attr("height")+" "+o.attr("width")),e.replaceWith(o)},"xml")})},800)},e.openAbout=function(){$("#aboutproductModal").modal("show")},a.get("/about").then(function(t){n.aboutproj=t.data,e.projversion=t.data.version},function(e){console.log("Error in loading /about URl : "+e)}),e.curyear=(new Date).getFullYear(),e.extenalClick=function(e){n.$broadcast("onMenuClick",{type:"elink",menu:e})},e.internalClick=function(e){n.$broadcast("onMenuClick",{type:"ilink",menu:e});try{console.log("Applet clicked.."+e)}catch(e){console.log("Error"),console.log(e)}},e.appletClick=function(e){n.$broadcast("onMenuClick",{type:"applet",menu:e});try{console.log("Applet clicked.."+e),$(".menu-item").removeClass("active"),$('a[href^="'+e.url+'"]').addClass("active").addClass("highlightNav"),$('a[href^="'+e.url+'"]').parent().parent().siblings().addClass("active")}catch(e){console.log("Error"),console.log(e)}},setTimeout(function(){$("#sidebarCollapse").on("click",function(){$("#sidebar").addClass("active"),$(".overlay").fadeIn(),$("#sidebar .collapse.in").toggleClass("in"),$("a[aria-expanded=true]").attr("aria-expanded","false")}),$("#addToggleMode").on("click",function(){$("body.sidebar-mini").addClass("toggleMode"),$("#addToggleMode").hide(),$("#removeToggleMode").show()}),$("#removeToggleMode").on("click",function(){$("body.sidebar-mini").removeClass("toggleMode"),$("#addToggleMode").show(),$("#removeToggleMode").hide()})},1e3),e.openContentImport=function(){$("#contentImportModel").modal("show")},n.adjustMenuHeight=function(){$(window).width()>768&&($("#sidebar").removeClass("active"),$(".overlay").fadeOut())},n.getFavList=function(){if(n.rbacAppletListFav=[],null!=n.rbacallmenus){console.log("$rootScope.rbacallmenus",n.rbacallmenus);for(var t=0;t<n.rbacallmenus.length;t++)"group"!=n.rbacallmenus.type&&n.rbacAppletListFav.push(n.rbacallmenus[t]);console.log("$rootScope.rbacAppletListFav",n.rbacAppletListFav),e.email=n.user.email;var a="/unifydidentity/user/search/findOneByEmail?email="+e.email;n.callAPI(a,"GET","",function(e){if(n.appletList=e.data.appletList,console.log("before scope.appletList",n.appletList),null!=n.appletList&&0!=n.appletList.length)for(var t=0;t<n.appletList.length;t++)-1==n.rbacAppletListFav.map(function(e){return e.url}).indexOf(n.appletList[t].url)&&n.appletList.splice(t,1);console.log("scope.appletList",n.appletList)},function(e){console.log("Error in populating AppletList "+e)})}};n.adjustMenuHeight(),$(window).resize(function(){$("#menu-block").getNiceScroll().remove(),$("#menu-block").niceScroll({cursorwidth:4,cursoropacitymin:.4,cursorcolor:"#ffffff",cursorborder:"none",cursorborderradius:4,autohidemode:"leave",horizrailenabled:!1}),n.adjustMenuHeight()})}}}]).directive("topbar",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"E",transclude:!1,replace:!0,template:'<div class="navbar navbar-default" ><div class="container-fluid"><div class="navbar-header"><div id="sidebarCollapse" class="active"><div class="hamburger-menu-icon"><img src="images/menu.png" alt="menu icon"></div></div><div class="hidden-xs-hidden-sm fontSize18 app-title  active">{{pagetitle}}</div><ul class="pull-right"><li class="navbar-menu-item hidden-xs pull-left" ng-repeat="app in dockApplets"><a class="dockicons"  ng-if="app.appletDisplayName != \'Menu\'" target="{{app.target}}"><img id="{{app.name}}" ng-src="{{app.iconUrl}}" ng-style="{opacity : app.opacity}" ></a></li><li class="pull-right"><div class="dropdown user-profile"><a class="dropdown-toggle displayTable cursorPointer active" type="button" data-toggle="dropdown" aria-expanded="false">Name </a><ul class="dropdown-menu"><li><a ng-href="/app/Profile306/Profile306" href="/app/Profile306/Profile306"> Your Profile</a></li><li><a ng-click="toggleStudio();"> Studio</a></li><li><a ng-href="/app/Settings2/Settings2" href="/app/Settings2/Settings2" class="active"> Settings &amp; Notifications</a></li><li><a ng-href="/setting" href="/setting"> Developer Settings</a></li><li><a ng-href="/logout" href="/logout"> Logout</a></li></ul></div></li></ul></div></div>',link:function(e,t,a){e.openContentImport=function(){$("#contentImportModel").modal("show")}}}}]).directive("contentarea",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"E",transclude:!0,template:'<section class="content clearfix" style="padding:0px;margin:0px;" ><div class="row1 clearfix"><div class="col-xs-12" style="padding:0px;"><div class="center-block"><div id="centercontent" style="padding:0px;"><div ng-transclude></div><div class="overlay"></div></div></div></div></div></section>',link:function(e,t,a){t.on("click",function(e){})}}}]).directive("unifyedmarque",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"E",transclude:!0,scope:{message:"=message"},template:'<div class="cmsmarquee" ng-show="message.length > 0"><div class="marquee" ng-bind-html="trustHtml(message)"></div></div>',link:function(e,t,a){e.trustHtml=function(e){return o.trustAsHtml(e)}}}}]).directive("unifyedrsswidget",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"E",transclude:!0,scope:{feedurl:"@feedurl",maxentries:"@maxentries"},template:'<style>.activity-feed { padding: 15px;}.activity-feed .feed-item {position: relative;padding-bottom: 20px;padding-left: 30px;border-left: 2px solid #e4e8eb;}.activity-feed .feed-item:last-child {border-color: transparent;}.activity-feed .feed-item:after {content: "";display: block;position: absolute;top: 0;left: -6px;width: 10px;height: 10px;border-radius: 6px;background: #fff;border: 1px solid #f37167;}.activity-feed .feed-item .date {position: relative;top: -5px;color: #8c96a3;text-transform: uppercase;font-size: 13px;}.activity-feed .feed-item .text {position: relative;top: -3px;}</style><div class="activity-feed"><div ng-if="$index < maxentries || showall" class=" feed-item" ng-repeat="feed in feeds"><div  class="date">{{feed.date | date }}</div><div  class="text">{{feed.title}}</div><div  style="font-size:10px;" ng-bind-html = "trustHtml(feed.content)"></div></div><div ng-if="maxentries < feeds.length"><a class="pull-right badge" ng-click="loadAll();">Show All</a></div></div>',link:function(e,t,n){e.showall=!1,e.loadAll=function(){e.showall=!0},e.trustHtml=function(e){return o.trustAsHtml(e)};var i={url:e.feedurl};a.post("https://kryptosda.kryptosmobile.com/kryptosds/rss/rssreader",i,"").then(function(t){var a=t.data;try{for(var n=0;n<a.feed.entries.length;n++){var o=a.feed.entries[n].pubDate||a.feed.entries[n].published;a.feed.entries[n].date=new Date(o)}}catch(e){}e.feeds=a.feed.entries})}}}]).directive("cmsimagepicker",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"E",transclude:!1,replace:!0,scope:{value:"=value",cssurl:"=cssurl",label:"@label"},template:'<div><style>.imggallery {position:absolute;}</style><span ng-click="closeGallery();" class="fa fa-times pull-right hide" style="margin-top:-20px;cursor:pointer;"></span><div class=" hide imggallery galleryContainer" ><div ng-click="selectImage(img);" ng-repeat= "img in gallary" class="cmsImageGallery"><img style="width:60px;height:60px;" ng-src="{{img.imageurl}}"/></div></div><div class="form-control"><button ng-click="openImages();" class="openImageGallery">{{label}}</button></div><div class="thumbnail thumbnainImage" ng-if="value"><span class="removeThumb cmsColor"  ng-click="removeBackground()"><i class="fa fa-times"></i></span><img ng-if="!cssurl" ng-src="{{value}}"/><div ng-if="cssurl" class="uploadedBackimage" style="background-image:{{value}};background-size:cover;"></div></div></div>',link:function(e,t,o){e.closeGallery=function(){$(t).find(".imggallery").addClass("hide")},e.selectImage=function(a){e.value=a.imageurl,e.cssurl&&(e.value="url("+a.imageurl+")"),$(t).find(".imggallery").addClass("hide"),$(t).find(".fa-times").addClass("hide")},e.openImages=function(){a.post("/content/myimages/"+n.site.tenantid,{}).then(function(a){e.gallary=a.data,$(t).find(".imggallery").removeClass("hide"),$(t).find(".fa-times").removeClass("hide")})},e.removeBackground=function(){e.value=!1},setTimeout(function(){$(".galleryContainer").mCustomScrollbar({theme:"appletContainer"})},100)}}}]).directive("cmsuploadimagepicker",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r){return{restrict:"E",transclude:!1,replace:!0,scope:{value:"=value",cssurl:"=cssurl",label:"@label"},template:'<div><style>.imggallery {position:absolute;}</style><span ng-click="closeGallery();" class="fa fa-times removeGallery pull-right hide" style="margin-top:-20px;cursor:pointer;"></span><div class=" hide imggallery galleryContainer" ><div ng-click="selectImage(img);" ng-repeat= "img in gallary" class="cmsImageGallery"><img style="width:55px;height:55px;" ng-src="{{img.imageurl}}"/><div class="colorDarkGrey fontSize12 marginTop5px">{{img.width}} X {{img.height}}</div></div><div ng-if="!gallary.length" class="noImage" style="text-align:center;padding:24px;margin:auto;"><svg viewBox="0 0 512 512.00099" xmlns="http://www.w3.org/2000/svg" style="width:24px;height:auto;display:block;margin:0 auto;margin-bottom:10px;"><path d="m373.410156 0h-234.816406c-76.421875 0-138.59375 62.171875-138.59375 138.59375v234.8125c0 76.421875 62.171875 138.59375 138.59375 138.59375h234.816406c76.417969 0 138.589844-62.171875 138.589844-138.59375v-234.8125c0-76.421875-62.171875-138.59375-138.589844-138.59375zm108.574219 373.40625c0 59.871094-48.707031 108.578125-108.578125 108.578125h-234.8125c-59.871094 0-108.578125-48.707031-108.578125-108.578125v-1.316406l86.089844-79.25c2.4375-2.242188 6.257812-2.242188 8.695312-.003906l65.875 60.476562c7.640625 7.015625 17.941407 10.441406 28.269531 9.414062 10.324219-1.03125 19.742188-6.4375 25.847657-14.828124l116.25-159.847657c1.542969-2.117187 3.65625-2.558593 4.777343-2.632812 1.121094-.066407 3.273438.085937 5.078126 1.988281l111.082031 117.050781v68.949219zm0-112.550781-89.3125-94.109375c-7.472656-7.875-17.960937-11.984375-28.808594-11.277344-10.832031.707031-20.707031 6.148438-27.09375 14.929688l-116.253906 159.847656c-1.472656 2.023437-3.488281 2.507812-4.558594 2.613281-1.066406.105469-3.136719.035156-4.980469-1.660156l-65.875-60.472657c-13.839843-12.710937-35.503906-12.691406-49.324218.03125l-65.761719 60.535157v-192.699219c0-59.871094 48.707031-108.578125 108.578125-108.578125h234.816406c59.867188 0 108.574219 48.707031 108.574219 108.578125zm0 0"/><path d="m142.910156 86.734375c-29.082031 0-52.746094 23.664063-52.746094 52.75 0 29.082031 23.664063 52.746094 52.746094 52.746094 29.085938 0 52.746094-23.664063 52.746094-52.746094.003906-29.085937-23.660156-52.75-52.746094-52.75zm0 75.476563c-12.53125 0-22.730468-10.195313-22.730468-22.730469 0-12.53125 10.199218-22.730469 22.730468-22.730469 12.535156 0 22.730469 10.195312 22.730469 22.730469 0 12.535156-10.195313 22.730469-22.730469 22.730469zm0 0"/></svg>No image found</div></div><div class=" cmsImageUpload"><div ng-click="openImages();" class="openImageGallery text-center"><img src="images/upload.svg" class="icon50" ><span class="displayBlock marginTop10px">Upload Image</span></div></div><div class="thumbnail thumbnainImage" ng-if="value"><img ng-if="!cssurl" ng-src="{{value}}"/><div ng-if="cssurl" class="uploadedBackimage" style="background-image:{{value}};background-size:cover;"></div></div><div class="selectedBackground"><span class="removeThumb cmsColor pull-right" ng-if="value" ng-click="removeBackground()"><i class="fa fa-times"></i></span></div></div>',link:function(e,t,o){e.closeGallery=function(){$(t).find(".imggallery").addClass("hide"),$(t).find(".removeGallery").addClass("hide")},e.selectImage=function(a){e.value=a.imageurl,e.cssurl&&(e.value="url("+a.imageurl+")"),$(t).find(".imggallery").addClass("hide"),$(t).find(".removeGallery").addClass("hide")},e.openImages=function(){a.post("/content/myimages/"+n.site.tenantid,{}).then(function(a){e.gallary=a.data,$(t).find(".imggallery").removeClass("hide"),$(t).find(".removeGallery").removeClass("hide")})},e.removeBackground=function(){e.value=!1},setTimeout(function(){$(".galleryContainer").mCustomScrollbar({theme:"appletContainer"})},100)}}}]).directive("clickcapture",["$document","$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r,s){return{restrict:"A",link:function(t,a,n){e.on("click",function(e){"dropdownMenu1"!=e.target.id&&(o.toggle=!0,$("#tree1").find(".jqtree-element").removeClass("active")),$(".movingEdit").hide()})}}}]).directive("quicklaunchmenu",["$document","$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r,s){return{restrict:"A",transclude:!1,replace:!0,template:'<a id="qlleftmenu"  class="menu-item group-menu cursorPointer" data-parent=".mCSB_container" tabindex="0" title="Quick Launch" data-target="#grpqlleftmenu" data-toggle="collapse" aria-expanded="true"><img class="sidebar-menu-icon replaced-svg" src="cmsGallery/quick_lunch.svg"><span class="innertitle">Quick Launch</span></a>',link:function(e,t,r){e.trustHtml=function(e){return i.trustAsHtml(e)},e.user=o.user;var s=a('<ul  class="list-unstyled collapse in" id="grpqlleftmenu" aria-expanded="true" style=""><li ng-repeat="apps in applications |filter: {name: searchMenu}" ><a id="{{apps.id}}" title="{{apps.name}}" class="menu-item" ng-href="{{apps.launchUrl}}"  target="_blank" ng-click="extenalClick(apps);"><img class=" sidebar-menu-icon" alt="{{apps.name}} icon" ng-src="{{apps.imageUrl}}"><span ng-bind-html="trustHtml(apps.name)"></span></a></li></ul>')(e);$(s).insertAfter($(t));var l=function(){setTimeout(function(){if(o.user){e.qlssoUrl=o.user.qlssoUrl,e.qlTenantid=o.user.qlId;var t=e.qlssoUrl+"/admin/secured/"+e.qlTenantid+"/api/list/applications";encodeURIComponent(t);n({method:"GET",url:t,withCredentials:!0}).then(function(t){e.applications=t.data.applicationDefinitions,setTimeout(function(){$("#grpqlleftmenu li span").children("span").removeAttr("style"),$("#grpqlleftmenu li span").children("div").remove()},500)},function(e){console.log("Error in populating QL Apps "+e)})}else l()},200)};l(),e.printQldata=function(e){var t=$("#"+e+":last-child").text();$("#"+e).attr("title",t),$("#"+e).children("img").attr("alt",t)}}}}]).directive("favappletmenu",["$document","$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r,s){return{restrict:"A",transclude:!1,replace:!0,template:'<a id=""  class="menu-item group-menu cursorPointer" data-parent=".mCSB_container" title="Favorite Menu" tabindex="0" data-target="#favleftmenu" data-toggle="collapse" aria-expanded="true"><img class="sidebar-menu-icon replaced-svg" src="cmsGallery/Favorite.svg" alt="Favorite icon"><span class="innertitle">Favorite Menu</span></a>',link:function(e,t,n){e.trustHtml=function(e){return i.trustAsHtml(e)};var o=a('<ul  class="list-unstyled collapse in" id="favleftmenu" aria-expanded="true" style=""><li ng-repeat="apps in appletList |filter: {name: searchMenu}"><a id="{{apps.id}}" class="menu-item" ng-href="{{apps.url}}"  title="{{apps.name}}" target={{apps.target}}  ng-click="menuClick(apps);"><span ng-bind-html="trustHtml(apps.name)"></span></a></li></ul>')(e);$(o).insertAfter($(t))}}}]).directive("rbacmenutree",["$document","$routeParams","$compile","$http","$rootScope","$sce","$window","$location",function(e,t,a,n,o,i,r,s){return{restrict:"E",scope:{menudata:"=menudata"},link:function(e,t,a){console.log("menudata in tree"),console.log(e.menudata),setTimeout(function(){$(t).jstree({core:{multiple:!0,data:e.menudata,check_callback:!0},ui:{select_multiple_modifier:"on"},plugins:["contextmenu","dnd","massload","search","state","types","changed","conditionalselect","checkbox","crrm"],deleteItem:{label:"Delete component",action:function(e){alert(e)}}})},100)}}}]);var unifyedActionIconDirectives=angular.module("UnifyedActionIcon",[]);unifyedActionIconDirectives.directive("searchIcon",function(){return{restrict:"E",template:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><path d="M39.51,37.16l-9.62-9.62a16.84,16.84,0,1,0-2.36,2.36l9.62,9.61a1.67,1.67,0,0,0,2.36-2.35Zm-22.65-6.8a13.51,13.51,0,1,1,13.51-13.5A13.52,13.52,0,0,1,16.86,30.36Z"/></svg>'}}),unifyedActionIconDirectives.directive("addIcon",function(){return{restrict:"E",template:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><g data-name="Layer 2"><g><path d="M17.14,0h5.72a.31.31,0,0,1,.07.2V16.7c0,.37,0,.37.37.37H39.6a.57.57,0,0,1,.4.07v5.72a.41.41,0,0,1-.3.07H23.3c-.37,0-.37,0-.37.37V39.6a.57.57,0,0,1-.07.4H17.14a.31.31,0,0,1-.07-.2V23.3c0-.37,0-.37-.37-.37H.4a.57.57,0,0,1-.4-.07V17.14a.31.31,0,0,1,.2-.07H16.7c.37,0,.37,0,.37-.37V.4A.57.57,0,0,1,17.14,0Z"/></g></g></svg>'}}),unifyedActionIconDirectives.directive("crossIcon",function(){return{restrict:"E",template:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><g data-name="Layer 2"><g data-name="cross"><path d="M17.65,15,29.45,3.2A1.87,1.87,0,1,0,26.8.55L15,12.35,3.2.55A1.87,1.87,0,0,0,.55,3.2L12.35,15,.55,26.8A1.88,1.88,0,0,0,1.88,30a1.83,1.83,0,0,0,1.32-.55L15,17.65l11.8,11.8a1.83,1.83,0,0,0,1.32.55,1.88,1.88,0,0,0,1.33-3.2Z"/></g></g></svg>'}}),unifyedActionIconDirectives.directive("leftarrowIcon",function(){return{restrict:"E",template:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11.999 20.5"><path  d="M9.537,20.083.292,10.946a.975.975,0,0,1,0-1.392L9.537.417a1.456,1.456,0,0,1,2.041,0,1.415,1.415,0,0,1,0,2.016L3.669,10.25l7.909,7.815a1.417,1.417,0,0,1,0,2.017,1.456,1.456,0,0,1-2.041,0"/></svg>'}}),unifyedActionIconDirectives.directive("rightarrowIcon",function(){return{restrict:"E",template:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8.401 13.92"><path data-name="Path 15170" d="M350.625,228.362l1.542-1.339,5.908,6.083.95.978-7.143,6.858-1.258-1.42,5.682-5.438Z" transform="translate(-350.625 -227.023)"/></svg>'}}),unifyedActionIconDirectives.directive("deleteIcon",function(){return{restrict:"E",template:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.55 40"><g data-name="Layer 2"><g><path d="M29.74,4.71h-5.5V1.24A1.26,1.26,0,0,0,23,0a.17.17,0,0,0-.14.05.16.16,0,0,0-.1,0H9.61A1.24,1.24,0,0,0,8.33,1.24V4.71H2.81A2.73,2.73,0,0,0,0,7.44V11.9H2.44V37.3A2.69,2.69,0,0,0,5.22,40H27.33a2.71,2.71,0,0,0,2.81-2.7V11.9h2.41V7.44A2.73,2.73,0,0,0,29.74,4.71ZM10.88,2.48H21.67V4.71H10.88ZM27.56,37.3c0,.15-.07.22-.23.22H5.22c-.16,0-.23-.07-.23-.22V11.9H27.56ZM30,9.42H2.58v-2c0-.16.07-.25.23-.25H29.74c.17,0,.24.09.24.25v2Z"/><path d="M21,14.81h2.58v20.5H21Z"/><path d="M15,14.81h2.58v20.5H15Z"/><path d="M9.07,14.81h2.58v20.5H9.07Z"/></g></g></svg>'}}),unifyedActionIconDirectives.directive("deletewasteIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 498.383 498.383" style="enable-background:new 0 0 498.383 498.383;" xml:space="preserve"><path d="M38.108,149.883h34v331.5c0,9.35,7.65,17,17,17h311.667c9.35,0,17-7.65,17-17v-331.5h42.5c9.35,0,17-7.65,17-17s-7.65-17-17-17h-81.033c-0.567-14.733-4.25-50.15-30.883-78.2C324.842,12.75,290.558,0,246.075,0s-77.917,12.75-99.167,37.967c-23.517,27.767-24.65,62.333-23.8,77.917h-85c-9.35,0-17,7.65-17,17S28.758,149.883,38.108,149.883z M172.408,59.783C186.858,42.5,211.508,34,245.792,34c34.567,0,60.633,9.067,77.35,26.633c18.417,19.267,21.25,45.05,21.817,55.25h-187.85C156.258,107.1,155.692,79.9,172.408,59.783z M383.775,149.883v314.5H106.108v-314.5H383.775z"/><path d="M191.108,416.217c9.35,0,17-7.65,17-17v-195.5c0-9.35-7.65-17-17-17c-9.35,0-17,7.65-17,17v195.5C174.108,408.567,181.758,416.217,191.108,416.217z"/><path d="M298.775,416.217c9.35,0,17-7.65,17-17v-195.5c0-9.35-7.65-17-17-17s-17,7.65-17,17v195.5C281.775,408.567,289.425,416.217,298.775,416.217z"/></svg>'}}),unifyedActionIconDirectives.directive("gearIcon",function(){return{restrict:"E",template:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><g data-name="Layer 2"><g><path d="M39.62,16.8a2.65,2.65,0,0,0-1.8-1.08l-2.4-.4a.34.34,0,0,1-.31-.28,14.72,14.72,0,0,0-.92-2.21.36.36,0,0,1,0-.44c.5-.69,1-1.38,1.47-2.06a2.52,2.52,0,0,0-.19-3.19c-.87-.88-1.73-1.74-2.61-2.6a2.44,2.44,0,0,0-1.73-.71,2.67,2.67,0,0,0-1.6.57c-.66.48-1.33.95-2,1.42a.26.26,0,0,1-.32,0,13.39,13.39,0,0,0-2.38-1,.36.36,0,0,1-.28-.33c-.12-.77-.26-1.55-.38-2.32A2.75,2.75,0,0,0,23.75,1,2.35,2.35,0,0,0,22,0H17.78a2.74,2.74,0,0,0-.55.13A2.49,2.49,0,0,0,15.68,2c-.16.84-.29,1.69-.43,2.54a.41.41,0,0,1-.33.38,12.27,12.27,0,0,0-2.15.91.36.36,0,0,1-.45,0l-2-1.46a2.42,2.42,0,0,0-1.55-.5A2.51,2.51,0,0,0,7,4.66L4.55,7.08a2.53,2.53,0,0,0-.27,3.35c.51.7,1,1.4,1.5,2.1a.29.29,0,0,1,0,.34,14.65,14.65,0,0,0-.93,2.29.33.33,0,0,1-.29.25c-.83.14-1.67.27-2.5.42a2.47,2.47,0,0,0-1.7,1.09,2.19,2.19,0,0,0-.38,1v4.36a3.13,3.13,0,0,0,.16.6,2.55,2.55,0,0,0,2.05,1.5c.81.13,1.62.29,2.44.41a.32.32,0,0,1,.29.25,14.79,14.79,0,0,0,1,2.29.29.29,0,0,1,0,.33c-.48.67-1,1.36-1.45,2A2.56,2.56,0,0,0,4.65,33l2.44,2.44a2.5,2.5,0,0,0,1.19.68,2.45,2.45,0,0,0,2.05-.37c.72-.49,1.43-1,2.13-1.51a.36.36,0,0,1,.42-.06,15.5,15.5,0,0,0,2.19.9.33.33,0,0,1,.25.31c.14.85.28,1.69.43,2.54a2.51,2.51,0,0,0,.69,1.35,2.3,2.3,0,0,0,1.38.7H22.1c.14,0,.3,0,.44-.07a2.48,2.48,0,0,0,1.7-2c.16-.85.3-1.71.44-2.57a.32.32,0,0,1,.25-.31,14.79,14.79,0,0,0,2.25-.93.36.36,0,0,1,.42,0c.73.53,1.46,1.07,2.21,1.57a2.41,2.41,0,0,0,1.33.4A2.5,2.5,0,0,0,33,35.4c.82-.8,1.63-1.61,2.43-2.44a2.49,2.49,0,0,0,.29-3.27q-.7-1-1.44-2a.44.44,0,0,1-.06-.53,13.6,13.6,0,0,0,.91-2.2.33.33,0,0,1,.29-.25L38,24.25A2.5,2.5,0,0,0,39,23.78a2.34,2.34,0,0,0,1-1.64V17.86A2.13,2.13,0,0,0,39.62,16.8Zm-1.85,4.83c0,.26-.05.32-.29.36l-3.41.58a1.06,1.06,0,0,0-.91.83,13.69,13.69,0,0,1-1.44,3.47,1.11,1.11,0,0,0,.08,1.3l1.94,2.74c.18.25.17.29,0,.5l-2.3,2.3c-.21.21-.24.21-.48,0l-2.71-1.93a1.16,1.16,0,0,0-1.38-.07,13.65,13.65,0,0,1-3.4,1.41,1.07,1.07,0,0,0-.86.93c-.19,1.13-.39,2.27-.58,3.41,0,.2-.13.26-.32.26H18.33c-.19,0-.29-.06-.32-.26-.19-1.15-.38-2.29-.58-3.44a1.05,1.05,0,0,0-.81-.89,14.81,14.81,0,0,1-3.45-1.41,1.09,1.09,0,0,0-1.22.07l-2.79,2c-.25.17-.29.17-.5,0L6.35,31.47c-.07-.07-.15-.13-.14-.23a.33.33,0,0,1,.1-.23C7,30.1,7.59,29.2,8.24,28.3a1.17,1.17,0,0,0,.06-1.4,12.94,12.94,0,0,1-1.41-3.37,1.15,1.15,0,0,0-1-.88l-3.39-.58a.27.27,0,0,1-.26-.3c0-1.12,0-2.25,0-3.37,0-.2.09-.28.28-.31l3.31-.55a1.15,1.15,0,0,0,1-.92,13.07,13.07,0,0,1,1.38-3.37,1.14,1.14,0,0,0-.07-1.35l-2-2.76c-.16-.23-.16-.28,0-.48C7,7.88,7.78,7.11,8.56,6.34c.19-.19.24-.2.46,0l2.69,1.91a1.19,1.19,0,0,0,1.42.07,13.07,13.07,0,0,1,3.34-1.4,1.16,1.16,0,0,0,.91-1L18,2.53c0-.24.09-.28.34-.28h3.3c.26,0,.31,0,.35.3.18,1.12.37,2.24.56,3.35a1.08,1.08,0,0,0,.82.92A14.37,14.37,0,0,1,26.93,8.3a1.12,1.12,0,0,0,1.28-.09l2.68-1.93c.29-.21.3-.21.56,0L33.7,8.58c.22.22.22.27,0,.51-.64.91-1.29,1.81-1.94,2.72a1.16,1.16,0,0,0-.06,1.35,12.57,12.57,0,0,1,1.39,3.32,1.23,1.23,0,0,0,1.11,1c1.09.17,2.17.36,3.26.54a.28.28,0,0,1,.27.32C37.77,19.43,37.77,20.53,37.77,21.63Z"/><path d="M20,11.36A8.64,8.64,0,1,0,28.63,20,8.65,8.65,0,0,0,20,11.36Zm0,15A6.38,6.38,0,1,1,26.38,20,6.38,6.38,0,0,1,20,26.37Z"/></g></g></svg>'}}),unifyedActionIconDirectives.directive("chatIcon",function(){return{restrict:"E",template:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23.505 20"> <g id="chat" transform="translate(0 -36.5)"> <path data-name="Path 9" d="M19.4,47.554V38.721A2.225,2.225,0,0,0,17.175,36.5H2.221A2.225,2.225,0,0,0,0,38.721v8.833a2.225,2.225,0,0,0,2.221,2.221h.634v2.663a.89.89,0,0,0,.894.889h0a.9.9,0,0,0,.673-.31l2.805-3.247H17.18A2.216,2.216,0,0,0,19.4,47.554ZM6.947,48.571a.6.6,0,0,0-.457.206L4.053,51.592V49.17a.6.6,0,0,0-.6-.6H2.221A1.019,1.019,0,0,1,1.2,47.549V38.721A1.019,1.019,0,0,1,2.221,37.7H17.175a1.019,1.019,0,0,1,1.017,1.017v8.833a1.019,1.019,0,0,1-1.017,1.017Z"/> <path data-name="Path 10" d="M163.979,127.021a.878.878,0,0,0,.668.31.89.89,0,0,0,.314-.059.881.881,0,0,0,.58-.835v-2.663h.634a2.225,2.225,0,0,0,2.221-2.221v-8.833a2.225,2.225,0,0,0-2.221-2.221.6.6,0,1,0,0,1.2,1.019,1.019,0,0,1,1.017,1.017v8.833a1.019,1.019,0,0,1-1.017,1.017h-1.233a.6.6,0,0,0-.6.6V125.6l-2.437-2.815a.6.6,0,0,0-.457-.206H152.4a.6.6,0,1,0,0,1.209h8.764Z" transform="translate(-144.891 -70.831)"/> </g></svg>'}}),unifyedActionIconDirectives.directive("paperclipIcon",function(){return{restrict:"E",template:'<svg viewBox="-25 0 510 510.25747"  xmlns="http://www.w3.org/2000/svg"><path d="m427.828125 314.484375-37.738281-37.738281-169.816406-169.808594c-31.296876-31.0625-81.816407-30.96875-112.996094.210938-31.179688 31.179687-31.273438 81.699218-.210938 112.996093l169.808594 169.859375c6.945312 6.949219 18.210938 6.949219 25.160156 0 6.945313-6.949218 6.945313-18.210937 0-25.160156l-169.808594-169.859375c-17.367187-17.367187-17.367187-45.519531 0-62.886719 17.367188-17.367187 45.519532-17.367187 62.886719 0l169.859375 169.808594 37.738282 37.734375c31.265624 31.277344 31.253906 81.976563-.019532 113.238281-31.277344 31.261719-81.972656 31.253906-113.238281-.023437l-31.441406-31.453125-176.101563-176.101563-12.582031-12.578125c-43.976563-45.351562-43.417969-117.601562 1.25-162.273437 44.671875-44.667969 116.921875-45.226563 162.273437-1.25l188.679688 188.683593c4.496094 4.492188 11.046875 6.246094 17.183594 4.601563 6.140625-1.644531 10.9375-6.4375 12.582031-12.578125s-.113281-12.6875-4.605469-17.183594l-188.679687-188.679687c-59.089844-58.820313-154.640625-58.710938-213.59375.246093-58.957031 58.953126-59.066407 154.503907-.246094 213.59375l188.679687 188.679688 31.488282 31.453125c45.410156 43.617187 117.375 42.890625 161.890625-1.640625 44.519531-44.527344 45.226562-116.492188 1.597656-161.890625zm0 0"/></svg>'}}),unifyedActionIconDirectives.directive("sendIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 488.721 488.721" style="enable-background:new 0 0 488.721 488.721;" xml:space="preserve"><path d="M483.589,222.024c-5.022-10.369-13.394-18.741-23.762-23.762L73.522,11.331C48.074-0.998,17.451,9.638,5.122,35.086C-1.159,48.052-1.687,63.065,3.669,76.44l67.174,167.902L3.669,412.261c-10.463,26.341,2.409,56.177,28.75,66.639c5.956,2.366,12.303,3.595,18.712,3.624c7.754,0,15.408-1.75,22.391-5.12l386.304-186.982C485.276,278.096,495.915,247.473,483.589,222.024z M58.657,446.633c-8.484,4.107-18.691,0.559-22.798-7.925c-2.093-4.322-2.267-9.326-0.481-13.784l65.399-163.516h340.668L58.657,446.633z M100.778,227.275L35.379,63.759c-2.722-6.518-1.032-14.045,4.215-18.773c5.079-4.949,12.748-6.11,19.063-2.884l382.788,185.173H100.778z"/></svg>'}}),unifyedActionIconDirectives.directive("tickIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"  viewBox="0 0 448.8 448.8" style="enable-background:new 0 0 448.8 448.8;" xml:space="preserve"><polygon points="142.8,323.85 35.7,216.75 0,252.45 142.8,395.25 448.8,89.25 413.1,53.55 "/></svg>'}}),unifyedActionIconDirectives.directive("tickdoubleIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 594.149 594.149" style="enable-background:new 0 0 594.149 594.149;" xml:space="preserve"><g><path d="M448.8,161.925l-35.7-35.7l-160.65,160.65l35.7,35.7L448.8,161.925z M555.899,126.225l-267.75,270.3l-107.1-107.1l-35.7,35.7l142.8,142.8l306-306L555.899,126.225z M0,325.125l142.8,142.8l35.7-35.7l-142.8-142.8L0,325.125z"/></g></svg>'}}),unifyedActionIconDirectives.directive("photocameraIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 515.667 515.667" style="enable-background:new 0 0 515.667 515.667;" xml:space="preserve"><path d="M446.533,119.425l-54.117-0.283l-51.85-77.35c-3.117-4.817-8.5-7.933-14.167-7.933H186.717c-5.667,0-10.767,3.117-13.883,7.65l-53.55,77.633l-50.15,0.283C31.167,119.425,0,150.592,0,188.558v223.55c0,37.967,31.167,69.7,69.133,69.7h377.4c37.967,0,69.133-31.733,69.133-69.7v-223.55C515.667,150.592,484.5,119.425,446.533,119.425z M481.667,412.108c0,19.267-15.867,35.7-35.133,35.7h-377.4c-19.267,0-35.133-16.433-35.133-35.7v-223.55c0-19.267,15.867-35.133,35.133-35.133h59.217c5.667,0,10.767-3.117,13.883-7.65l53.55-77.633h121.55l51.567,77.067c3.117,4.533,8.5,7.65,13.883,7.65l63.467,0.567c19.267,0,35.133,15.867,35.133,35.133v223.55H481.667z"/><path d="M259.25,160.225c-66.583,0-120.417,54.117-120.417,120.417S192.95,401.058,259.25,401.058s120.417-54.117,120.417-120.417S325.55,160.225,259.25,160.225z M259.25,367.058c-47.6,0-86.417-38.817-86.417-86.417s38.817-86.417,86.417-86.417s86.417,38.817,86.417,86.417S306.85,367.058,259.25,367.058z"/><circle cx="420.467" cy="210.092" r="6.517"/><path d="M420.467,186.575c-13.033,0-23.517,10.483-23.517,23.517s10.483,23.517,23.517,23.517s23.517-10.483,23.517-23.517S433.5,186.575,420.467,186.575z M420.467,220.575c-5.95,0-10.483-4.817-10.483-10.483s4.817-10.483,10.483-10.483c5.667,0,10.483,4.817,10.483,10.483S426.417,220.575,420.467,220.575z"/></svg>'}}),unifyedActionIconDirectives.directive("photographyIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 464.667 464.667" style="enable-background:new 0 0 464.667 464.667;" xml:space="preserve"><path d="M464.667,53.833c0-9.35-7.65-17-17-17H17c-9.35,0-17,7.65-17,17v357c0,9.35,7.65,17,17,17h430.667c9.35,0,17-7.65,17-17V53.833z M430.667,70.833v217.6l-99.733-69.983c-6.8-4.533-15.583-3.967-21.25,1.7l-51.85,49.867L150.167,166.033c-3.4-3.4-8.217-5.1-13.033-4.817c-4.817,0.283-9.35,2.833-12.183,6.517l-90.667,116.45V70.833H430.667z M34,393.833v-54.4l105.967-135.717L245.933,306c6.517,6.233,17,6.233,23.517,0l53.267-51.567l107.95,75.65v63.75H34z"/><path d="M273.983,200.033c18.133,0,32.867-14.733,32.867-32.867S292.117,134.3,273.983,134.3s-32.867,14.733-32.867,32.867S255.85,200.033,273.983,200.033z"/></svg>'}}),unifyedActionIconDirectives.directive("userIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 563.43 563.43" style="enable-background:new 0 0 563.43 563.43;" xml:space="preserve"><path d="M280.79,314.559c83.266,0,150.803-67.538,150.803-150.803S364.055,13.415,280.79,13.415S129.987,80.953,129.987,163.756S197.524,314.559,280.79,314.559z M280.79,52.735c61.061,0,111.021,49.959,111.021,111.021S341.851,274.776,280.79,274.776s-111.021-49.959-111.021-111.021S219.728,52.735,280.79,52.735z"/><path d="M19.891,550.015h523.648c11.102,0,19.891-8.789,19.891-19.891c0-104.082-84.653-189.198-189.198-189.198H189.198C85.116,340.926,0,425.579,0,530.124C0,541.226,8.789,550.015,19.891,550.015z M189.198,380.708h185.034c75.864,0,138.313,56.436,148.028,129.524H41.17C50.884,437.607,113.334,380.708,189.198,380.708z"/></svg>'}}),unifyedActionIconDirectives.directive("adduserIcon",function(){return{restrict:"E",template:'<svg viewBox="0 0 511.99981 511" xmlns="http://www.w3.org/2000/svg"> <path d="m296.464844 336.097656c-12.519532-8.734375-25.898438-15.851562-39.890625-21.289062 18.613281-16.917969 30.960937-40.617188 33.109375-67.148438 28.226562-27.503906 65.226562-42.582031 104.890625-42.582031 30.964843 0 60.695312 9.324219 85.984375 26.960937 9.0625 6.320313 21.523437 4.101563 27.84375-4.960937 6.316406-9.058594 4.097656-21.523437-4.960938-27.839844-12.519531-8.734375-25.902344-15.847656-39.894531-21.289062 20.539063-18.667969 33.453125-45.585938 33.453125-75.460938 0-56.238281-45.75-101.988281-101.988281-101.988281-56.234375 0-101.984375 45.75-101.984375 101.988281 0 29.753907 12.808594 56.574219 33.207031 75.234375-2.792969 1.074219-5.570313 2.210938-8.320313 3.421875-12.515624 5.507813-24.28125 12.28125-35.222656 20.234375-15.089844-37.488281-51.828125-64.019531-94.652344-64.019531-56.234374 0-101.988281 45.75-101.988281 101.984375 0 29.671875 12.738281 56.417969 33.027344 75.070312-54.246094 20.324219-98.230469 63.976563-116.136719 119.648438-5.9375 18.460938-2.792968 38.039062 8.628906 53.714844 11.421876 15.671875 29.09375 24.660156 48.484376 24.660156h173.980468c11.042969 0 19.996094-8.953125 19.996094-20 0-11.042969-8.953125-19.996094-19.996094-19.996094h-173.980468c-6.464844 0-12.355469-2.996094-16.164063-8.222656s-4.855469-11.753906-2.878906-17.910156c19.765625-61.453125 80.046875-104.371094 146.589843-104.371094 30.960938 0 60.695313 9.324219 85.984376 26.960938 9.058593 6.320312 21.523437 4.097656 27.84375-4.960938 6.316406-9.058594 4.097656-21.523438-4.964844-27.839844zm98.546875-295.601562c34.183593 0 61.992187 27.808594 61.992187 61.992187 0 34.179688-27.808594 61.992188-61.992187 61.992188-34.179688 0-61.992188-27.8125-61.992188-61.992188 0-34.183593 27.8125-61.992187 61.992188-61.992187zm-206.972657 136.855468c34.183594 0 61.992188 27.8125 61.992188 61.992188 0 34.183594-27.808594 61.992188-61.992188 61.992188-34.183593 0-61.992187-27.808594-61.992187-61.992188 0-34.179688 27.808594-61.992188 61.992187-61.992188zm323.960938 240.097657c0 11.042969-8.953125 19.996093-20 19.996093h-54.992188v54.992188c0 11.046875-8.953124 20-19.996093 20-11.046875 0-20-8.953125-20-20v-54.992188h-54.992188c-11.042969 0-19.996093-8.953124-19.996093-19.996093 0-11.046875 8.953124-20 19.996093-20h54.992188v-54.992188c0-11.042969 8.953125-19.996093 20-19.996093 11.042969 0 19.996093 8.953124 19.996093 19.996093v54.992188h54.992188c11.046875 0 20 8.953125 20 20zm0 0"></path></svg>'}}),unifyedActionIconDirectives.directive("addgroupIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 508 508" style="enable-background:new 0 0 508 508;" xml:space="preserve"><path d="M108.6,143.45c-30.2,0-54.7,24.5-54.7,54.7c0,30.1,24.5,54.7,54.7,54.7c30.2,0,54.7-24.5,54.7-54.7C163.3,167.95,138.8,143.45,108.6,143.45z M108.6,224.65c-14.6,0-26.5-11.9-26.5-26.5c-0.1-14.6,11.8-26.5,26.5-26.5c14.6,0,26.5,11.9,26.5,26.5C135.1,212.75,123.2,224.65,108.6,224.65z"/><path d="M254,113.55c-31.3,0-56.8,25.5-56.8,56.8s25.5,56.8,56.8,56.8s56.8-25.5,56.8-56.8S285.3,113.55,254,113.55z M254,197.85c-15.2,0-27.5-12.4-27.5-27.5c0-15.1,12.3-27.5,27.5-27.5s27.5,12.4,27.5,27.5C281.5,185.55,269.1,197.85,254,197.85z"/><path d="M399.5,143.45c-30.2,0-54.7,24.5-54.7,54.7c0,30.1,24.5,54.7,54.7,54.7s54.7-24.5,54.7-54.7C454.2,167.95,429.7,143.45,399.5,143.45z M399.5,224.65c-14.6,0-26.5-11.9-26.5-26.5c0-14.6,11.9-26.5,26.5-26.5c14.6,0,26.5,11.9,26.5,26.5C426,212.75,414.1,224.65,399.5,224.65z"/><path d="M399.5,271.85c-17.7,0-35.2,4.4-50.8,12.7c-12.1-15.3-29.3-26.4-49.4-30.4c-29.7-5.9-60.7-5.9-90.4,0c-20,4-37.3,15.1-49.4,30.4c-15.6-8.3-33.1-12.7-50.8-12.7c-60,0-108.7,48.7-108.7,108.5c0,7.8,6.3,14.1,14.1,14.1h479.8c7.8,0,14.1-6.3,14.1-14.1C508,320.55,459.3,271.85,399.5,271.85z M140.8,338.15v28.2H29.5c6.7-37.6,39.6-66.2,79.1-66.2c13,0,25.7,3.3,37.1,9.2C142.5,318.35,140.8,328.05,140.8,338.15z M339,366.25H169v-28.2c0-27.4,19.1-51,45.3-56.3c26.1-5.2,53.4-5.2,79.5,0c26.2,5.3,45.2,29,45.2,56.4V366.25z M367.3,366.25v-28.2c0-10-1.7-19.7-4.9-28.8c11.4-6,24.2-9.2,37.2-9.2c39.5,0,72.4,28.6,79.1,66.2H367.3z"/></svg>'}}),unifyedActionIconDirectives.directive("folderIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 612 612" style="enable-background:new 0 0 612 612;" xml:space="preserve"><path d="M535.5,76.5H267.75c0-42.247-34.253-76.5-76.5-76.5H76.5C34.253,0,0,34.253,0,76.5v459C0,577.747,34.253,612,76.5,612h459c42.247,0,76.5-34.253,76.5-76.5V153C612,110.753,577.747,76.5,535.5,76.5z M573.75,535.5c0,21.133-17.117,38.25-38.25,38.25h-459c-21.133,0-38.25-17.136-38.25-38.25v-306h535.5V535.5z M573.75,191.25H38.25V76.5c0-21.133,17.117-38.25,38.25-38.25h114.75c21.133,0,38.25,17.117,38.25,38.25v38.25h306c21.133,0,38.25,17.136,38.25,38.25V191.25z"/></svg>'}}),unifyedActionIconDirectives.directive("unreadIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 612 612" style="enable-background:new 0 0 612 612;" xml:space="preserve"><path d="M400.669,211.331c-7.479-7.478-19.584-7.478-27.043,0L306,278.957l-67.626-67.626c-7.478-7.478-19.584-7.478-27.043,0c-7.478,7.478-7.478,19.584,0,27.043L278.957,306l-67.626,67.626c-7.478,7.478-7.478,19.584,0,27.043c7.478,7.478,19.584,7.478,27.043,0L306,333.043l67.626,67.606c7.478,7.479,19.584,7.479,27.043,0c7.478-7.478,7.478-19.584,0-27.043L333.043,306l67.626-67.607C408.128,230.915,408.128,218.809,400.669,211.331z M535.5,0h-459C34.253,0,0,34.253,0,76.5v459C0,577.747,34.253,612,76.5,612h459c42.247,0,76.5-34.253,76.5-76.5v-459C612,34.253,577.747,0,535.5,0z M573.75,535.5c0,21.133-17.117,38.25-38.25,38.25h-459c-21.133,0-38.25-17.117-38.25-38.25v-459c0-21.133,17.117-38.25,38.25-38.25h459c21.133,0,38.25,17.136,38.25,38.25V535.5z"/></svg>'}}),unifyedActionIconDirectives.directive("verticalthreedotIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 60 60" style="enable-background:new 0 0 60 60;" xml:space="preserve"> <path d="M30,16c4.411,0,8-3.589,8-8s-3.589-8-8-8s-8,3.589-8,8S25.589,16,30,16z"></path> <path d="M30,44c-4.411,0-8,3.589-8,8s3.589,8,8,8s8-3.589,8-8S34.411,44,30,44z"></path> <path d="M30,22c-4.411,0-8,3.589-8,8s3.589,8,8,8s8-3.589,8-8S34.411,22,30,22z"></path> </svg>'}}),unifyedActionIconDirectives.directive("threedotIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 612 612" style="enable-background:new 0 0 612 612;" xml:space="preserve"> <path d="M55.636,250.364C24.907,250.364,0,275.27,0,306c0,30.73,24.907,55.636,55.636,55.636S111.273,336.73,111.273,306 C111.273,275.27,86.366,250.364,55.636,250.364z M315.273,250.364c-30.73,0-55.636,24.907-55.636,55.636 c0,30.729,24.907,55.636,55.636,55.636c30.729,0,55.636-24.905,55.636-55.636C370.909,275.27,346.003,250.364,315.273,250.364z M556.364,250.364c-30.73,0-55.636,24.907-55.636,55.636c0,30.729,24.906,55.636,55.636,55.636 C587.093,361.636,612,336.73,612,306C612,275.27,587.093,250.364,556.364,250.364z"></path> </svg>'}}),unifyedActionIconDirectives.directive("setupIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><path d="M405.344,378.656c2.422,0,4.812,0.422,7.094,1.219l14.219,5.031V288H224v-75.578l-14.219,5.023c-2.289,0.812-4.68,1.219-7.117,1.219c-11.758,0-21.328-9.57-21.328-21.328c0-11.766,9.57-21.336,21.328-21.336c2.438,0,4.828,0.406,7.117,1.219L224,182.25V85.336H121.75l5.031,14.219c0.812,2.289,1.219,4.68,1.219,7.109C128,118.43,118.43,128,106.664,128c-11.758,0-21.328-9.57-21.328-21.336c0-2.43,0.406-4.82,1.219-7.109l5.023-14.219H0V288v21.344v75.562l14.219-5.031c2.289-0.797,4.68-1.219,7.117-1.219c11.758,0,21.328,9.578,21.328,21.344s-9.57,21.344-21.328,21.344c-2.438,0-4.828-0.422-7.117-1.219L0,415.094V512h202.664H224h202.656v-96.906l-14.219,5.031c-2.281,0.797-4.672,1.219-7.094,1.219C393.562,421.344,384,411.766,384,400S393.562,378.656,405.344,378.656z M21.336,106.664H64c0,23.531,19.141,42.672,42.664,42.672c23.531,0,42.672-19.141,42.672-42.672h53.328v48c-23.523,0-42.664,19.141-42.664,42.672C160,220.859,179.141,240,202.664,240v48h-75.578l5.031,14.219c0.805,2.281,1.219,4.688,1.219,7.125c0,11.75-9.57,21.312-21.336,21.312s-21.336-9.562-21.336-21.312c0-2.438,0.414-4.844,1.219-7.125L96.914,288H21.336V106.664z M216.891,420.125l-14.227-5.031v75.562H21.336v-48C44.859,442.656,64,423.531,64,400s-19.141-42.656-42.664-42.656v-48h24.883h23.117C69.336,332.859,88.477,352,112,352s42.664-19.141,42.664-42.656h48v75.562l14.227-5.031c2.281-0.797,4.68-1.219,7.109-1.219c11.766,0,21.336,9.578,21.336,21.344s-9.57,21.344-21.336,21.344C221.57,421.344,219.172,420.922,216.891,420.125z M405.344,442.656v48H224v-48c23.523,0,42.664-19.125,42.664-42.656S247.523,357.344,224,357.344v-48h181.344v48c-23.531,0-42.688,19.125-42.688,42.656S381.812,442.656,405.344,442.656z"></path><path d="M490.656,90.664c2.438,0,4.844,0.414,7.125,1.219L512,96.914V0H288v69.336c-23.523,0-42.664,19.141-42.664,42.664s19.141,42.664,42.664,42.664V224h69.344c0,23.523,19.125,42.664,42.656,42.664s42.656-19.141,42.656-42.664H512v-96.914l-14.219,5.031c-2.281,0.805-4.688,1.219-7.125,1.219c-11.75,0-21.312-9.57-21.312-21.336S478.906,90.664,490.656,90.664z M490.656,154.664v48h-75.562l5.031,14.227c0.797,2.281,1.219,4.68,1.219,7.109c0,11.766-9.578,21.336-21.344,21.336s-21.344-9.57-21.344-21.336c0-2.43,0.422-4.828,1.219-7.109l5.031-14.227h-75.562v-75.578l-14.234,5.031c-2.281,0.805-4.672,1.219-7.109,1.219c-11.766,0-21.336-9.57-21.336-21.336s9.57-21.336,21.336-21.336c2.438,0,4.828,0.414,7.109,1.219l14.234,5.031V21.336h181.312v48C467.141,69.336,448,88.477,448,112S467.141,154.664,490.656,154.664z"></path></svg>'}}),unifyedActionIconDirectives.directive("uploadIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 471.2 471.2" xml:space="preserve"> <g> <g> <path d="M457.7,230.15c-7.5,0-13.5,6-13.5,13.5v122.8c0,33.4-27.2,60.5-60.5,60.5H87.5c-33.4,0-60.5-27.2-60.5-60.5v-124.8 c0-7.5-6-13.5-13.5-13.5s-13.5,6-13.5,13.5v124.8c0,48.3,39.3,87.5,87.5,87.5h296.2c48.3,0,87.5-39.3,87.5-87.5v-122.8 C471.2,236.25,465.2,230.15,457.7,230.15z"></path> <path d="M159.3,126.15l62.8-62.8v273.9c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5V63.35l62.8,62.8c2.6,2.6,6.1,4,9.5,4 c3.5,0,6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1l-85.8-85.8c-2.5-2.5-6-4-9.5-4c-3.6,0-7,1.4-9.5,4l-85.8,85.8 c-5.3,5.3-5.3,13.8,0,19.1C145.5,131.35,154.1,131.35,159.3,126.15z"></path> </g> </g> </svg>'}}),unifyedActionIconDirectives.directive("clockIcon",function(){return{restrict:"E",template:'<svg xmlns="http://www.w3.org/2000/svg" width="41" height="48" viewBox="0 0 41 48"> <path data-name="Forma 1 copy" class="cls-1" d="M22.077,22.694V14.4a1.577,1.577,0,1,0-3.154,0v8.293A4.732,4.732,0,1,0,22.077,22.694ZM22.061,6.482c0-.027.015-0.051,0.015-0.08V3.2h6.308a1.589,1.589,0,0,0,1.577-1.6A1.589,1.589,0,0,0,28.385,0H12.614a1.589,1.589,0,0,0-1.577,1.6,1.589,1.589,0,0,0,1.577,1.6h6.308V6.4c0,0.029.014,0.053,0.016,0.08A20.8,20.8,0,0,0,20.5,47.995,20.8,20.8,0,0,0,22.061,6.482ZM20.5,44.8A17.6,17.6,0,0,1,20.5,9.6,17.6,17.6,0,0,1,20.5,44.8Z"/> <path data-name="Forma 1" d="M372.408-17.54L346.692,8.17a1.768,1.768,0,0,0-.5,1.135L346,22.395a1.549,1.549,0,0,0,.5,1.162,1.655,1.655,0,0,0,1.163.443h0.027l12.706-.111a1.608,1.608,0,0,0,1.163-.442L387.5-2.485a1.687,1.687,0,0,0,0-2.352l-12.734-12.73A1.716,1.716,0,0,0,372.408-17.54ZM359.675,20.624l-10.326.139,0.166-10.738L366.678-7.134,377.059,3.244Zm19.709-19.7L369.031-9.459l4.568-4.566L383.952-3.647Z"/> <path data-name="Forma 1" d="M-369.064-25.874a1.313,1.313,0,0,0,1.312-1.313v-5.249a1.312,1.312,0,0,0-1.312-1.312,1.313,1.313,0,0,0-1.312,1.312v5.249A1.313,1.313,0,0,0-369.064-25.874ZM-357.253-39h-31.5A5.249,5.249,0,0,0-394-33.749V-2.254a5.249,5.249,0,0,0,5.249,5.249h31.5A5.249,5.249,0,0,0-352-2.254V-33.749A5.249,5.249,0,0,0-357.253-39ZM-383.5-36.373h21v11.811a1.312,1.312,0,0,1-1.312,1.312h-18.372a1.313,1.313,0,0,1-1.312-1.312V-36.373Zm28.87,34.119A2.623,2.623,0,0,1-357.253.371h-31.5a2.624,2.624,0,0,1-2.625-2.625V-33.749a2.625,2.625,0,0,1,2.625-2.624h2.625V-23.25a2.625,2.625,0,0,0,2.624,2.625h21a2.626,2.626,0,0,0,2.625-2.625V-36.373h2.625a2.624,2.624,0,0,1,2.624,2.624V-2.254Z"/> <path d="M-393.949,190.012a2.028,2.028,0,0,0,1.457,1.832l15.385,4.627,0.566,10.549a1.046,1.046,0,0,0,.711.92,0.957,0.957,0,0,0,.342.06,1.043,1.043,0,0,0,.789-0.35l5.439-5.99,7.71,5.309a2.036,2.036,0,0,0,1.165.366,2.066,2.066,0,0,0,2.014-1.636l6.4-32.439a1.044,1.044,0,0,0-.36-1.006,1.044,1.044,0,0,0-1.062-.162l-39.321,15.917A2.056,2.056,0,0,0-393.949,190.012Zm19.361,14.392-0.351-6.655,3.94,2.71Zm14.169,0.809-14.032-9.663,19.678-18.933Zm3.487-29.431-19.455,18.72-15.369-4.618Z"/> <path data-name="Forma 1" d="M-352.875,105.25h-40.25a0.875,0.875,0,0,0-.875.875,0.875,0.875,0,0,0,.875.875h40.25a0.875,0.875,0,0,0,.875-0.875A0.875,0.875,0,0,0-352.875,105.25Zm-33.25-10.5h-5.25a0.875,0.875,0,0,0-.875.875v10.5a0.875,0.875,0,0,0,.875.875h5.25a0.875,0.875,0,0,0,.875-0.875v-10.5A0.875,0.875,0,0,0-386.125,94.75ZM-387,105.25h-3.5V96.5h3.5v8.75h0ZM-375.625,86h-5.25a0.875,0.875,0,0,0-.875.875v19.25a0.875,0.875,0,0,0,.875.875h5.25a0.875,0.875,0,0,0,.875-0.875V86.875A0.875,0.875,0,0,0-375.625,86Zm-0.875,19.25H-380V87.75h3.5v17.5h0Zm11.375-15.75h-5.25a0.875,0.875,0,0,0-.875.875v15.75a0.875,0.875,0,0,0,.875.875h5.25a0.875,0.875,0,0,0,.875-0.875V90.375A0.875,0.875,0,0,0-365.125,89.5ZM-366,105.25h-3.5v-14h3.5v14ZM-354.625,79h-5.25a0.875,0.875,0,0,0-.875.875v26.25a0.875,0.875,0,0,0,.875.875h5.25a0.875,0.875,0,0,0,.875-0.875V79.875A0.875,0.875,0,0,0-354.625,79Zm-0.875,26.25H-359V80.75h3.5v24.5Zm-33.25-24.5a3.5,3.5,0,0,0-3.5,3.5,3.5,3.5,0,0,0,3.5,3.5,3.5,3.5,0,0,0,3.5-3.5A3.5,3.5,0,0,0-388.75,80.75Zm0,5.25a1.752,1.752,0,0,1-1.75-1.75,1.752,1.752,0,0,1,1.75-1.75A1.752,1.752,0,0,1-387,84.25,1.752,1.752,0,0,1-388.75,86Zm10.5-14a3.5,3.5,0,0,0-3.5,3.5,3.5,3.5,0,0,0,3.5,3.5,3.5,3.5,0,0,0,3.5-3.5A3.5,3.5,0,0,0-378.25,72Zm0,5.25A1.752,1.752,0,0,1-380,75.5a1.752,1.752,0,0,1,1.75-1.75,1.752,1.752,0,0,1,1.75,1.75A1.752,1.752,0,0,1-378.25,77.25Zm10.5-1.75a3.5,3.5,0,0,0-3.5,3.5,3.5,3.5,0,0,0,3.5,3.5,3.5,3.5,0,0,0,3.5-3.5A3.5,3.5,0,0,0-367.75,75.5Zm0,5.25A1.752,1.752,0,0,1-369.5,79a1.752,1.752,0,0,1,1.75-1.75A1.752,1.752,0,0,1-366,79,1.752,1.752,0,0,1-367.75,80.75ZM-357.25,65a3.5,3.5,0,0,0-3.5,3.5,3.5,3.5,0,0,0,3.5,3.5,3.5,3.5,0,0,0,3.5-3.5A3.5,3.5,0,0,0-357.25,65Zm0,5.25A1.752,1.752,0,0,1-359,68.5a1.752,1.752,0,0,1,1.75-1.75,1.752,1.752,0,0,1,1.75,1.75A1.752,1.752,0,0,1-357.25,70.25Zm-1.236-.514a0.875,0.875,0,0,0-1.237,0l-6.79,6.79a0.876,0.876,0,0,0,0,1.237,0.881,0.881,0,0,0,.62.255,0.868,0.868,0,0,0,.617-0.255l6.79-6.79A0.874,0.874,0,0,0-358.486,69.735Zm-11.38,7.245-5.621-1.6a0.867,0.867,0,0,0-1.08.6,0.875,0.875,0,0,0,.6,1.082l5.621,1.6a0.87,0.87,0,0,0,.239.033,0.875,0.875,0,0,0,.842-0.635A0.875,0.875,0,0,0-369.866,76.98Zm-9.749-.39a0.876,0.876,0,0,0-1.229-.14l-6.6,5.261a0.874,0.874,0,0,0-.138,1.23,0.872,0.872,0,0,0,.684.329,0.882,0.882,0,0,0,.544-0.189l6.6-5.26A0.874,0.874,0,0,0-379.615,76.59Z"/></svg>'}}),unifyedActionIconDirectives.directive("calendarIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><path d="M452,40h-24V0h-40v40H124V0H84v40H60C26.916,40,0,66.916,0,100v352c0,33.084,26.916,60,60,60h392c33.084,0,60-26.916,60-60V100C512,66.916,485.084,40,452,40z M472,452c0,11.028-8.972,20-20,20H60c-11.028,0-20-8.972-20-20V188h432V452z M472,148H40v-48c0-11.028,8.972-20,20-20h24v40h40V80h264v40h40V80h24c11.028,0,20,8.972,20,20V148z"/><rect x="76" y="230" width="40" height="40"/><rect x="156" y="230" width="40" height="40"/><rect x="236" y="230" width="40" height="40"/><rect x="316" y="230" width="40" height="40"/><rect x="396" y="230" width="40" height="40"/><rect x="76" y="310" width="40" height="40"/><rect x="156" y="310" width="40" height="40"/><rect x="236" y="310" width="40" height="40"/><rect x="316" y="310" width="40" height="40"/><rect x="76" y="390" width="40" height="40"/><rect x="156" y="390" width="40" height="40"/><rect x="236" y="390" width="40" height="40"/><rect x="316" y="390" width="40" height="40"/><rect x="396" y="310" width="40" height="40"/></svg>'}}),unifyedActionIconDirectives.directive("editIcon",function(){return{restrict:"E",template:'<svg xmlns="http://www.w3.org/2000/svg" width="42" height="42" viewBox="0 0 42 42"> <path data-name="Forma 1 copy" d="M-323.923,40.694V32.4a1.589,1.589,0,0,0-1.577-1.6,1.589,1.589,0,0,0-1.577,1.6v8.293a4.778,4.778,0,0,0-3.154,4.5A4.765,4.765,0,0,0-325.5,50a4.765,4.765,0,0,0,4.731-4.8A4.778,4.778,0,0,0-323.923,40.694Zm-0.016-16.211c0-.027.016-0.051,0.016-0.08V21.2h6.308a1.589,1.589,0,0,0,1.577-1.6,1.589,1.589,0,0,0-1.577-1.6h-15.771a1.59,1.59,0,0,0-1.577,1.6,1.589,1.589,0,0,0,1.577,1.6h6.309v3.2c0,0.029.014,0.053,0.016,0.08A20.666,20.666,0,0,0-346,45.2a20.65,20.65,0,0,0,20.5,20.8A20.65,20.65,0,0,0-305,45.2,20.666,20.666,0,0,0-323.939,24.482ZM-325.5,62.8a17.474,17.474,0,0,1-17.348-17.6A17.474,17.474,0,0,1-325.5,27.6a17.474,17.474,0,0,1,17.348,17.6A17.474,17.474,0,0,1-325.5,62.8Z"/> <path data-name="Forma 1" d="M26.408,0.46L0.692,26.17a1.773,1.773,0,0,0-.5,1.135L0,40.395a1.549,1.549,0,0,0,.5,1.162A1.653,1.653,0,0,0,1.661,42H1.688l12.706-.111a1.608,1.608,0,0,0,1.163-.442L41.495,15.515a1.687,1.687,0,0,0,0-2.352L28.761,0.432A1.716,1.716,0,0,0,26.408.46ZM13.675,38.624l-10.325.139L3.515,28.024,20.678,10.866,31.059,21.244Zm19.709-19.7L23.031,8.541,27.6,3.975,37.952,14.353Z"/> <path data-name="Forma 1" d="M-715.064-7.874a1.313,1.313,0,0,0,1.312-1.313v-5.249a1.312,1.312,0,0,0-1.312-1.312,1.313,1.313,0,0,0-1.312,1.312v5.249A1.313,1.313,0,0,0-715.064-7.874ZM-703.253-21h-31.5A5.249,5.249,0,0,0-740-15.749V15.746A5.249,5.249,0,0,0-734.748,21h31.5A5.249,5.249,0,0,0-698,15.746V-15.749A5.249,5.249,0,0,0-703.253-21ZM-729.5-18.373h21V-6.562a1.312,1.312,0,0,1-1.312,1.312h-18.372A1.313,1.313,0,0,1-729.5-6.562V-18.373Zm28.87,34.119a2.623,2.623,0,0,1-2.624,2.625h-31.5a2.624,2.624,0,0,1-2.625-2.625V-15.749a2.625,2.625,0,0,1,2.625-2.624h2.625V-5.25A2.625,2.625,0,0,0-729.5-2.625h21a2.626,2.626,0,0,0,2.625-2.625V-18.373h2.625a2.624,2.624,0,0,1,2.624,2.624V15.746Z"/> <path d="M-739.949,208.012a2.028,2.028,0,0,0,1.457,1.832l15.385,4.627,0.566,10.549a1.046,1.046,0,0,0,.711.92,0.957,0.957,0,0,0,.342.06,1.043,1.043,0,0,0,.789-0.35l5.439-5.99,7.71,5.309a2.036,2.036,0,0,0,1.165.366,2.066,2.066,0,0,0,2.014-1.636l6.4-32.439a1.044,1.044,0,0,0-.36-1.006,1.044,1.044,0,0,0-1.062-.162l-39.321,15.917A2.056,2.056,0,0,0-739.949,208.012Zm19.361,14.392-0.351-6.655,3.94,2.71Zm14.169,0.809-14.032-9.663,19.678-18.933Zm3.487-29.431-19.455,18.72-15.369-4.618Z"/> <path data-name="Forma 1" d="M-698.875,123.25h-40.25a0.875,0.875,0,0,0-.875.875,0.875,0.875,0,0,0,.875.875h40.25a0.875,0.875,0,0,0,.875-0.875A0.875,0.875,0,0,0-698.875,123.25Zm-33.25-10.5h-5.25a0.875,0.875,0,0,0-.875.875v10.5a0.875,0.875,0,0,0,.875.875h5.25a0.875,0.875,0,0,0,.875-0.875v-10.5A0.875,0.875,0,0,0-732.125,112.75ZM-733,123.25h-3.5V114.5h3.5v8.75h0ZM-721.625,104h-5.25a0.875,0.875,0,0,0-.875.875v19.25a0.875,0.875,0,0,0,.875.875h5.25a0.875,0.875,0,0,0,.875-0.875v-19.25A0.875,0.875,0,0,0-721.625,104Zm-0.875,19.25H-726v-17.5h3.5v17.5h0Zm11.375-15.75h-5.25a0.875,0.875,0,0,0-.875.875v15.75a0.875,0.875,0,0,0,.875.875h5.25a0.875,0.875,0,0,0,.875-0.875v-15.75A0.875,0.875,0,0,0-711.125,107.5ZM-712,123.25h-3.5v-14h3.5v14ZM-700.625,97h-5.25a0.875,0.875,0,0,0-.875.875v26.25a0.875,0.875,0,0,0,.875.875h5.25a0.875,0.875,0,0,0,.875-0.875V97.875A0.875,0.875,0,0,0-700.625,97Zm-0.875,26.25H-705V98.75h3.5v24.5Zm-33.25-24.5a3.5,3.5,0,0,0-3.5,3.5,3.5,3.5,0,0,0,3.5,3.5,3.5,3.5,0,0,0,3.5-3.5A3.5,3.5,0,0,0-734.75,98.75Zm0,5.25a1.752,1.752,0,0,1-1.75-1.75,1.752,1.752,0,0,1,1.75-1.75,1.752,1.752,0,0,1,1.75,1.75A1.752,1.752,0,0,1-734.75,104Zm10.5-14a3.5,3.5,0,0,0-3.5,3.5,3.5,3.5,0,0,0,3.5,3.5,3.5,3.5,0,0,0,3.5-3.5A3.5,3.5,0,0,0-724.25,90Zm0,5.25A1.752,1.752,0,0,1-726,93.5a1.752,1.752,0,0,1,1.75-1.75,1.752,1.752,0,0,1,1.75,1.75A1.752,1.752,0,0,1-724.25,95.25Zm10.5-1.75a3.5,3.5,0,0,0-3.5,3.5,3.5,3.5,0,0,0,3.5,3.5,3.5,3.5,0,0,0,3.5-3.5A3.5,3.5,0,0,0-713.75,93.5Zm0,5.25A1.752,1.752,0,0,1-715.5,97a1.752,1.752,0,0,1,1.75-1.75A1.752,1.752,0,0,1-712,97,1.752,1.752,0,0,1-713.75,98.75ZM-703.25,83a3.5,3.5,0,0,0-3.5,3.5,3.5,3.5,0,0,0,3.5,3.5,3.5,3.5,0,0,0,3.5-3.5A3.5,3.5,0,0,0-703.25,83Zm0,5.25A1.752,1.752,0,0,1-705,86.5a1.752,1.752,0,0,1,1.75-1.75,1.752,1.752,0,0,1,1.75,1.75A1.752,1.752,0,0,1-703.25,88.25Zm-1.236-.514a0.875,0.875,0,0,0-1.237,0l-6.79,6.79a0.876,0.876,0,0,0,0,1.237,0.881,0.881,0,0,0,.62.255,0.868,0.868,0,0,0,.617-0.255l6.79-6.79A0.874,0.874,0,0,0-704.486,87.735Zm-11.38,7.245-5.621-1.6a0.867,0.867,0,0,0-1.08.6,0.875,0.875,0,0,0,.6,1.082l5.621,1.6a0.87,0.87,0,0,0,.239.033,0.875,0.875,0,0,0,.842-0.635A0.875,0.875,0,0,0-715.866,94.98Zm-9.749-.39a0.876,0.876,0,0,0-1.229-.14l-6.6,5.261a0.874,0.874,0,0,0-.138,1.23,0.873,0.873,0,0,0,.684.329,0.882,0.882,0,0,0,.544-0.189l6.6-5.261A0.874,0.874,0,0,0-725.615,94.59Z"/></svg>'}}),unifyedActionIconDirectives.directive("analyticsIcon",function(){return{restrict:"E",template:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 42 42"> <path data-name="Forma 1 copy" class="cls-1" d="M416.077-42.306V-50.6a1.589,1.589,0,0,0-1.577-1.6,1.589,1.589,0,0,0-1.577,1.6v8.293a4.778,4.778,0,0,0-3.154,4.5A4.765,4.765,0,0,0,414.5-33a4.765,4.765,0,0,0,4.731-4.8A4.778,4.778,0,0,0,416.077-42.306Zm-0.016-16.211c0-.027.016-0.051,0.016-0.08v-3.2h6.308a1.589,1.589,0,0,0,1.577-1.6,1.589,1.589,0,0,0-1.577-1.6H406.614a1.59,1.59,0,0,0-1.577,1.6,1.589,1.589,0,0,0,1.577,1.6h6.309v3.2c0,0.029.014,0.053,0.016,0.08A20.666,20.666,0,0,0,394-37.8a20.65,20.65,0,0,0,20.5,20.8A20.65,20.65,0,0,0,435-37.8,20.666,20.666,0,0,0,416.061-58.518ZM414.5-20.2a17.474,17.474,0,0,1-17.348-17.6A17.474,17.474,0,0,1,414.5-55.4a17.474,17.474,0,0,1,17.348,17.6A17.474,17.474,0,0,1,414.5-20.2Z"/> <path data-name="Forma 1" class="cls-2" d="M766.408-82.54L740.692-56.83a1.768,1.768,0,0,0-.5,1.135L740-42.605a1.549,1.549,0,0,0,.5,1.162,1.655,1.655,0,0,0,1.163.443h0.027l12.706-.111a1.608,1.608,0,0,0,1.163-.442L781.5-67.485a1.687,1.687,0,0,0,0-2.352L768.761-82.568A1.716,1.716,0,0,0,766.408-82.54ZM753.675-44.376l-10.326.139,0.166-10.738,17.163-17.159,10.381,10.378Zm19.709-19.7L763.031-74.459l4.568-4.567,10.353,10.378Z"/> <path data-name="Forma 1" d="M24.936-90.874a1.313,1.313,0,0,0,1.312-1.313v-5.249a1.313,1.313,0,0,0-1.312-1.312,1.313,1.313,0,0,0-1.312,1.312v5.249A1.313,1.313,0,0,0,24.936-90.874ZM36.747-104H5.252A5.249,5.249,0,0,0,0-98.749v31.495A5.249,5.249,0,0,0,5.252-62H36.747A5.249,5.249,0,0,0,42-67.254V-98.749A5.249,5.249,0,0,0,36.747-104ZM10.5-101.373h21v11.811a1.313,1.313,0,0,1-1.312,1.312H11.813A1.313,1.313,0,0,1,10.5-89.562v-11.811Zm28.87,34.119a2.624,2.624,0,0,1-2.624,2.625H5.252a2.624,2.624,0,0,1-2.625-2.625V-98.749a2.624,2.624,0,0,1,2.625-2.624H7.877V-88.25A2.625,2.625,0,0,0,10.5-85.625h21a2.625,2.625,0,0,0,2.625-2.625v-13.123h2.625a2.625,2.625,0,0,1,2.624,2.624v31.495Z"/> <path d="M0.051,125.012a2.027,2.027,0,0,0,1.456,1.832l15.386,4.627,0.565,10.549a1.048,1.048,0,0,0,.711.92,0.96,0.96,0,0,0,.343.06,1.041,1.041,0,0,0,.788-0.35l5.44-5.99,7.71,5.309a2.034,2.034,0,0,0,1.165.366,2.065,2.065,0,0,0,2.013-1.636l6.4-32.439a1.046,1.046,0,0,0-1.422-1.168L1.285,123.009A2.056,2.056,0,0,0,.051,125.012ZM19.412,139.4l-0.351-6.655L23,135.459Zm14.169,0.809L19.549,130.55l19.678-18.933Zm3.487-29.431L17.613,129.5,2.244,124.884Z"/> <path data-name="Forma 1" d="M41.125,40.25H0.875a0.875,0.875,0,0,0,0,1.75h40.25A0.875,0.875,0,1,0,41.125,40.25ZM7.875,29.75H2.625a0.875,0.875,0,0,0-.875.875v10.5A0.875,0.875,0,0,0,2.625,42h5.25a0.875,0.875,0,0,0,.875-0.875v-10.5A0.875,0.875,0,0,0,7.875,29.75ZM7,40.25H3.5V31.5H7v8.75H7ZM18.375,21h-5.25a0.875,0.875,0,0,0-.875.875v19.25a0.875,0.875,0,0,0,.875.875h5.25a0.875,0.875,0,0,0,.875-0.875V21.875A0.875,0.875,0,0,0,18.375,21ZM17.5,40.25H14V22.75h3.5v17.5h0ZM28.875,24.5h-5.25a0.875,0.875,0,0,0-.875.875v15.75a0.875,0.875,0,0,0,.875.875h5.25a0.875,0.875,0,0,0,.875-0.875V25.375A0.875,0.875,0,0,0,28.875,24.5ZM28,40.25H24.5v-14H28v14ZM39.375,14h-5.25a0.875,0.875,0,0,0-.875.875v26.25a0.875,0.875,0,0,0,.875.875h5.25a0.875,0.875,0,0,0,.875-0.875V14.875A0.875,0.875,0,0,0,39.375,14ZM38.5,40.25H35V15.75h3.5v24.5ZM5.25,15.75a3.5,3.5,0,1,0,3.5,3.5A3.5,3.5,0,0,0,5.25,15.75Zm0,5.25A1.75,1.75,0,1,1,7,19.25,1.752,1.752,0,0,1,5.25,21ZM15.75,7a3.5,3.5,0,1,0,3.5,3.5A3.5,3.5,0,0,0,15.75,7Zm0,5.25A1.75,1.75,0,1,1,17.5,10.5,1.752,1.752,0,0,1,15.75,12.25Zm10.5-1.75a3.5,3.5,0,1,0,3.5,3.5A3.5,3.5,0,0,0,26.25,10.5Zm0,5.25A1.75,1.75,0,1,1,28,14,1.752,1.752,0,0,1,26.25,15.75ZM36.75,0a3.5,3.5,0,1,0,3.5,3.5A3.5,3.5,0,0,0,36.75,0Zm0,5.25A1.75,1.75,0,1,1,38.5,3.5,1.752,1.752,0,0,1,36.75,5.25Zm-1.235-.514a0.875,0.875,0,0,0-1.237,0l-6.79,6.79a0.875,0.875,0,0,0,1.237,1.237l6.79-6.79A0.876,0.876,0,0,0,35.514,4.735ZM24.134,11.98l-5.621-1.6a0.875,0.875,0,0,0-.48,1.684l5.621,1.6A0.875,0.875,0,1,0,24.134,11.98Zm-9.749-.39a0.876,0.876,0,0,0-1.229-.14l-6.6,5.261a0.875,0.875,0,0,0,1.09,1.37l6.6-5.26A0.874,0.874,0,0,0,14.385,11.59Z"/></svg>'}}),unifyedActionIconDirectives.directive("saveIcon",function(){return{restrict:"E",template:'<svg xmlns="http://www.w3.org/2000/svg" width="42" height="42" viewBox="0 0 42 42"> <path data-name="Forma 1 copy" d="M416.077,61.694V53.4a1.577,1.577,0,1,0-3.154,0v8.293A4.731,4.731,0,1,0,416.077,61.694Zm-0.016-16.211c0-.027.016-0.051,0.016-0.08V42.2h6.308a1.6,1.6,0,0,0,0-3.2H406.614a1.6,1.6,0,0,0,0,3.2h6.309v3.2c0,0.029.014,0.053,0.016,0.08A20.5,20.5,0,1,0,416.061,45.482ZM414.5,83.8a17.6,17.6,0,1,1,17.348-17.6A17.474,17.474,0,0,1,414.5,83.8Z"/> <path data-name="Forma 1" d="M766.408,21.46L740.692,47.17a1.768,1.768,0,0,0-.5,1.135L740,61.395a1.549,1.549,0,0,0,.5,1.162,1.655,1.655,0,0,0,1.163.443h0.027l12.706-.111a1.608,1.608,0,0,0,1.163-.442L781.5,36.515a1.687,1.687,0,0,0,0-2.352l-12.734-12.73A1.716,1.716,0,0,0,766.408,21.46ZM753.675,59.624l-10.326.139,0.166-10.738,17.163-17.159,10.381,10.378Zm19.709-19.7L763.031,29.541l4.568-4.567,10.353,10.378Z"/> <path data-name="Forma 1" d="M24.936,13.126a1.313,1.313,0,0,0,1.312-1.313V6.564a1.312,1.312,0,0,0-2.624,0v5.249A1.313,1.313,0,0,0,24.936,13.126ZM36.747,0H5.252A5.249,5.249,0,0,0,0,5.251V36.746A5.249,5.249,0,0,0,5.252,42H36.747A5.249,5.249,0,0,0,42,36.746V5.251A5.249,5.249,0,0,0,36.747,0ZM10.5,2.627h21V14.438a1.313,1.313,0,0,1-1.312,1.312H11.813A1.313,1.313,0,0,1,10.5,14.438V2.627Zm28.87,34.119a2.624,2.624,0,0,1-2.624,2.625H5.252a2.624,2.624,0,0,1-2.625-2.625V5.251A2.624,2.624,0,0,1,5.252,2.627H7.877V15.75A2.625,2.625,0,0,0,10.5,18.375h21a2.625,2.625,0,0,0,2.625-2.625V2.627h2.625a2.624,2.624,0,0,1,2.624,2.624V36.746Z"/> <path d="M0.051,229.012a2.027,2.027,0,0,0,1.456,1.832l15.386,4.627,0.565,10.549a1.048,1.048,0,0,0,.711.92,0.96,0.96,0,0,0,.343.06,1.041,1.041,0,0,0,.788-0.35l5.44-5.99,7.71,5.309a2.034,2.034,0,0,0,1.165.366,2.065,2.065,0,0,0,2.013-1.636l6.4-32.439a1.046,1.046,0,0,0-1.422-1.168L1.285,227.009A2.056,2.056,0,0,0,.051,229.012ZM19.412,243.4l-0.351-6.655L23,239.459Zm14.169,0.809L19.549,234.55l19.678-18.933Zm3.487-29.431L17.613,233.5,2.244,228.884Z"/> <path data-name="Forma 1" d="M41.125,144.25H0.875a0.875,0.875,0,1,0,0,1.75h40.25A0.875,0.875,0,1,0,41.125,144.25Zm-33.25-10.5H2.625a0.875,0.875,0,0,0-.875.875v10.5a0.875,0.875,0,0,0,.875.875h5.25a0.875,0.875,0,0,0,.875-0.875v-10.5A0.875,0.875,0,0,0,7.875,133.75ZM7,144.25H3.5V135.5H7v8.75H7ZM18.375,125h-5.25a0.875,0.875,0,0,0-.875.875v19.25a0.875,0.875,0,0,0,.875.875h5.25a0.875,0.875,0,0,0,.875-0.875v-19.25A0.875,0.875,0,0,0,18.375,125ZM17.5,144.25H14v-17.5h3.5v17.5h0ZM28.875,128.5h-5.25a0.875,0.875,0,0,0-.875.875v15.75a0.875,0.875,0,0,0,.875.875h5.25a0.875,0.875,0,0,0,.875-0.875v-15.75A0.875,0.875,0,0,0,28.875,128.5ZM28,144.25H24.5v-14H28v14ZM39.375,118h-5.25a0.875,0.875,0,0,0-.875.875v26.25a0.875,0.875,0,0,0,.875.875h5.25a0.875,0.875,0,0,0,.875-0.875v-26.25A0.875,0.875,0,0,0,39.375,118ZM38.5,144.25H35v-24.5h3.5v24.5ZM5.25,119.75a3.5,3.5,0,1,0,3.5,3.5A3.5,3.5,0,0,0,5.25,119.75Zm0,5.25A1.75,1.75,0,1,1,7,123.25,1.752,1.752,0,0,1,5.25,125Zm10.5-14a3.5,3.5,0,1,0,3.5,3.5A3.5,3.5,0,0,0,15.75,111Zm0,5.25a1.75,1.75,0,1,1,1.75-1.75A1.752,1.752,0,0,1,15.75,116.25Zm10.5-1.75a3.5,3.5,0,1,0,3.5,3.5A3.5,3.5,0,0,0,26.25,114.5Zm0,5.25A1.75,1.75,0,1,1,28,118,1.752,1.752,0,0,1,26.25,119.75ZM36.75,104a3.5,3.5,0,1,0,3.5,3.5A3.5,3.5,0,0,0,36.75,104Zm0,5.25a1.75,1.75,0,1,1,1.75-1.75A1.752,1.752,0,0,1,36.75,109.25Zm-1.235-.515a0.876,0.876,0,0,0-1.237,0l-6.79,6.79a0.875,0.875,0,0,0,1.237,1.237l6.79-6.789A0.876,0.876,0,0,0,35.514,108.735Zm-11.38,7.245-5.621-1.6a0.875,0.875,0,0,0-.48,1.684l5.621,1.6A0.875,0.875,0,0,0,24.134,115.98Zm-9.749-.39a0.876,0.876,0,0,0-1.229-.14l-6.6,5.261A0.875,0.875,0,0,0,7.1,122.27a0.883,0.883,0,0,0,.544-0.189l6.6-5.261A0.874,0.874,0,0,0,14.385,115.59Z"/></svg>'}}),unifyedActionIconDirectives.directive("groupIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 489.9 489.9" style="enable-background:new 0 0 489.9 489.9;" xml:space="preserve"><path d="M340.6,209.05v37.7c0,7.1,2.8,13.7,7.6,18.7v12.8c0,5.5,4.4,9.9,9.9,9.9s9.9-4.4,9.9-9.9v-17.4c0-3.3-1.7-6.4-4.4-8.2c-2-1.3-3.2-3.5-3.2-5.9v-37.7c0-13.2,10.8-24,24-24h8.1c13.2,0,24,10.8,24,24v37.7c0,2.4-1.2,4.6-3.2,5.9c-2.8,1.8-4.4,4.9-4.4,8.2v36.3c0,4.4,2.6,8.5,6.5,10.4c4.7,2.3,29.1,14.6,51.7,33.1c1.9,1.6,3,3.9,3,6.5v15.9h-69.4c-5.5,0-9.9,4.4-9.9,9.9s4.4,9.9,9.9,9.9H480c5.5,0,9.9-4.4,9.9-9.9v-25.8c0-8.5-3.7-16.4-10.3-21.8c-19.9-16.3-41.2-28.2-50.9-33.3v-26.7c4.8-5,7.6-11.6,7.6-18.7v-37.7c0-24.2-19.7-43.8-43.8-43.8h-8.1C360.3,165.25,340.6,184.85,340.6,209.05z"/><path d="M9.9,382.85h80.5c5.5,0,9.9-4.4,9.9-9.9s-4.4-9.9-9.9-9.9H19.8v-15.9c0-2.5,1.1-4.9,3-6.5c22.5-18.5,47-30.9,51.7-33.1c4-1.9,6.5-6,6.5-10.4v-36.3c0-3.3-1.7-6.4-4.4-8.2c-2-1.3-3.2-3.5-3.2-5.9v-37.7c0-13.2,10.8-24,24-24h8.1c13.2,0,24,10.8,24,24v37.7c0,2.4-1.2,4.6-3.2,5.9c-2.8,1.8-4.4,4.9-4.4,8.2v18.2c0,5.5,4.4,9.9,9.9,9.9s9.9-4.4,9.9-9.9v-13.6c4.8-5,7.6-11.6,7.6-18.7v-37.7c0-24.2-19.7-43.8-43.8-43.8h-8.1c-24.2,0-43.8,19.7-43.8,43.8v37.7c0,7.1,2.8,13.7,7.6,18.7v26.7c-9.8,5.1-31,16.9-50.9,33.3c-6.5,5.4-10.3,13.3-10.3,21.8v25.7C0,378.45,4.4,382.85,9.9,382.85z"/><path d="M304.4,209.55v-48.7c0-29.7-24.1-53.8-53.8-53.8h-10.5c-29.7,0-53.8,24.1-53.8,53.8v48.7c0,8.8,3.6,17,9.8,23v37.5c-11.7,6-40.3,21.6-67,43.6c-7.8,6.4-12.2,15.8-12.2,25.9v33.4c0,5.5,4.4,9.9,9.9,9.9h237c5.5,0,9.9-4.4,9.9-9.9v-33.4c0-10.1-4.4-19.5-12.2-25.9c-26.7-21.9-55.3-37.6-67-43.6v-37.5C300.8,226.65,304.4,218.35,304.4,209.55z M349,328.95c3.2,2.6,5,6.5,5,10.6v23.5H136.8v-23.5c0-4.1,1.8-8,5-10.6c29.4-24.2,61.3-40.3,67.4-43.3c4.1-2,6.8-6.3,6.8-10.8v-47c0-3.3-1.7-6.4-4.4-8.2c-3.4-2.3-5.4-6-5.4-10v-48.7c0-18.8,15.3-34,34-34h10.5c18.8,0,34,15.3,34,34v48.7c0,4-2,7.8-5.4,10c-2.8,1.8-4.4,4.9-4.4,8.2v47c0,4.6,2.7,8.8,6.8,10.8C287.7,288.65,319.6,304.85,349,328.95z"/></svg>'}}),unifyedActionIconDirectives.directive("undoIcon",function(){return{restrict:"E",template:'<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m154.667969 213.332031h-138.667969c-8.832031 0-16-7.167969-16-16v-138.664062c0-8.832031 7.167969-16 16-16s16 7.167969 16 16v122.664062h122.667969c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0"/><path d="m256 512c-68.351562 0-132.628906-26.644531-180.96875-75.03125-6.253906-6.25-6.253906-16.382812 0-22.632812 6.269531-6.273438 16.402344-6.230469 22.632812 0 42.304688 42.347656 98.515626 65.664062 158.335938 65.664062 123.519531 0 224-100.480469 224-224s-100.480469-224-224-224c-105.855469 0-200.257812 71.148438-224.449219 169.171875-2.132812 8.597656-10.75 13.824219-19.371093 11.714844-8.574219-2.132813-13.800782-10.796875-11.710938-19.371094 27.691406-112.148437 135.148438-193.515625 255.53125-193.515625 141.164062 0 256 114.835938 256 256s-114.835938 256-256 256zm0 0"/></svg>'}}),unifyedActionIconDirectives.directive("redoIcon",function(){return{restrict:"E",template:'<svg viewBox="0 0 512.02043 512" xmlns="http://www.w3.org/2000/svg"><path d="m496 213.34375h-138.667969c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h122.667969v-122.667969c0-8.832031 7.167969-16 16-16s16 7.167969 16 16v138.667969c0 8.832031-7.167969 16-16 16zm0 0"/><path d="m256 512.011719c-141.164062 0-256-114.839844-256-256 0-141.164063 114.835938-256.0000002 256-256.0000002 120.382812 0 227.839844 81.3632812 255.550781 193.4921872 2.113281 8.574219-3.113281 17.257813-11.710937 19.371094-8.574219 2.109375-17.257813-3.117188-19.371094-11.710938-24.210938-98.007812-118.613281-169.152343-224.46875-169.152343-123.519531 0-224 100.476562-224 224 0 123.519531 100.480469 224 224 224 59.820312 0 116.03125-23.320313 158.355469-65.644531 6.253906-6.25 16.386719-6.25 22.636719 0s6.25 16.382812 0 22.636718c-48.363282 48.359375-112.640626 75.007813-180.992188 75.007813zm0 0"/></svg>'}}),unifyedActionIconDirectives.directive("mobileIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 480 480" style="enable-background:new 0 0 480 480;" xml:space="preserve"><path d="M328,0H152c-22.08,0.026-39.974,17.92-40,40v400c0.026,22.08,17.92,39.974,40,40h176c22.08-0.026,39.974-17.92,40-40V40C367.974,17.92,350.08,0.026,328,0z M208.208,464H152c-13.255,0-24-10.745-24-24v-24h80.208C197.267,430.13,197.267,449.87,208.208,464z M240,464c-13.255,0-24-10.745-24-24s10.745-24,24-24s24,10.745,24,24S253.255,464,240,464z M352,440c0,13.255-10.745,24-24,24h-56.208c10.941-14.13,10.941-33.87,0-48H352V440z M352,400H128V88h224V400z M352,72H128V40c0-13.255,10.745-24,24-24h176c13.255,0,24,10.745,24,24V72z"/><rect x="184" y="40" width="80" height="16"/><path d="M208,160h-32c-13.255,0-24,10.745-24,24v32c0,13.255,10.745,24,24,24h32c13.255,0,24-10.745,24-24v-32C232,170.745,221.255,160,208,160z M216,216c0,4.418-3.582,8-8,8h-32c-4.418,0-8-3.582-8-8v-32c0-4.418,3.582-8,8-8h32c4.418,0,8,3.582,8,8V216z"/><path d="M304,160h-32c-13.255,0-24,10.745-24,24v32c0,13.255,10.745,24,24,24h32c13.255,0,24-10.745,24-24v-32C328,170.745,317.255,160,304,160z M312,216c0,4.418-3.582,8-8,8h-32c-4.418,0-8-3.582-8-8v-32c0-4.418,3.582-8,8-8h32c4.418,0,8,3.582,8,8V216z"/><path d="M208,256h-32c-13.255,0-24,10.745-24,24v32c0,13.255,10.745,24,24,24h32c13.255,0,24-10.745,24-24v-32C232,266.745,221.255,256,208,256z M216,312c0,4.418-3.582,8-8,8h-32c-4.418,0-8-3.582-8-8v-32c0-4.418,3.582-8,8-8h32c4.418,0,8,3.582,8,8V312z"/><path d="M304,256h-32c-13.255,0-24,10.745-24,24v32c0,13.255,10.745,24,24,24h32c13.255,0,24-10.745,24-24v-32C328,266.745,317.255,256,304,256z M312,312c0,4.418-3.582,8-8,8h-32c-4.418,0-8-3.582-8-8v-32c0-4.418,3.582-8,8-8h32c4.418,0,8,3.582,8,8V312z"/><path d="M176,104h-24c-4.418,0-8,3.582-8,8v24c0,4.418,3.582,8,8,8s8-3.582,8-8v-16h16c4.418,0,8-3.582,8-8S180.418,104,176,104z"/><path d="M224,104h-16c-4.418,0-8,3.582-8,8s3.582,8,8,8h16c4.418,0,8-3.582,8-8S228.418,104,224,104z"/><rect x="280" y="40" width="16" height="16"/></svg>'}}),unifyedActionIconDirectives.directive("deviceupdateIcon",function(){return{restrict:"E",template:'<svg viewBox="0 0 128 128" width="512" xmlns="http://www.w3.org/2000/svg" data-name="Layer 1"><path d="m57.529 81.11a1.75 1.75 0 0 0 .676-3.364 14.9 14.9 0 0 1 -2.858-25.9 13.179 13.179 0 0 1 1.809-1.116 1.239 1.239 0 0 0 .117-.054 14.735 14.735 0 0 1 2.893-1.093l-2.453 3.348a1.75 1.75 0 1 0 2.823 2.069l4.876-6.653.007-.013a1.668 1.668 0 0 0 .14-.238c.012-.023.026-.044.037-.067a1.98 1.98 0 0 0 .073-.213c.012-.04.028-.079.037-.119s.015-.109.022-.164a1.675 1.675 0 0 0 .019-.186c0-.01 0-.02 0-.03 0-.038-.009-.074-.011-.112a1.957 1.957 0 0 0 -.021-.2c-.008-.047-.022-.09-.034-.135a1.949 1.949 0 0 0 -.061-.2c-.015-.038-.035-.073-.052-.11a1.7 1.7 0 0 0 -.107-.2c-.018-.029-.04-.054-.06-.081a1.591 1.591 0 0 0 -.153-.186c-.022-.023-.046-.041-.069-.062a1.709 1.709 0 0 0 -.148-.133l-6.651-4.87a1.75 1.75 0 0 0 -2.068 2.823l3.131 2.3a18.264 18.264 0 0 0 -3.649 1.36c-.036.015-.071.031-.106.049a16.581 16.581 0 0 0 -2.4 1.461 18.4 18.4 0 0 0 3.561 31.958 1.754 1.754 0 0 0 .68.131z"/><path d="m71.146 47.026a1.75 1.75 0 1 0 -1.346 3.228 14.9 14.9 0 0 1 2.858 25.9 13.179 13.179 0 0 1 -1.809 1.116 1.239 1.239 0 0 0 -.117.054 14.735 14.735 0 0 1 -2.893 1.093l2.453-3.348a1.75 1.75 0 1 0 -2.828-2.069l-4.876 6.65-.007.013a1.668 1.668 0 0 0 -.14.238c-.012.023-.026.044-.037.067a1.908 1.908 0 0 0 -.073.213c-.012.04-.028.079-.037.119s-.015.109-.022.164a1.675 1.675 0 0 0 -.019.186v.03c0 .038.009.074.011.112a1.957 1.957 0 0 0 .021.2c.008.047.022.09.034.135a1.949 1.949 0 0 0 .061.2c.015.038.035.074.053.11a1.687 1.687 0 0 0 .106.2c.018.029.04.054.06.082a1.668 1.668 0 0 0 .153.185c.022.023.047.042.07.063a1.7 1.7 0 0 0 .147.132l6.654 4.876a1.75 1.75 0 0 0 2.068-2.823l-3.131-2.3a18.264 18.264 0 0 0 3.649-1.36c.036-.015.071-.031.106-.049a16.581 16.581 0 0 0 2.395-1.461 18.4 18.4 0 0 0 -3.561-31.958z"/><path d="m97.808 4.75h-67.616a7.759 7.759 0 0 0 -7.75 7.75v103a7.759 7.759 0 0 0 7.75 7.75h67.616a7.759 7.759 0 0 0 7.75-7.75v-103a7.759 7.759 0 0 0 -7.75-7.75zm-16.425 3.5-2.483 5.167h-29.8l-2.483-5.167zm20.675 107.25a4.255 4.255 0 0 1 -4.25 4.25h-67.616a4.255 4.255 0 0 1 -4.25-4.25v-103a4.255 4.255 0 0 1 4.25-4.25h12.541l3.69 7.675a1.749 1.749 0 0 0 1.577.992h32a1.749 1.749 0 0 0 1.577-.992l3.69-7.675h12.541a4.255 4.255 0 0 1 4.25 4.25z"/><path d="m74.75 106.583h-21.5a1.75 1.75 0 0 0 0 3.5h21.5a1.75 1.75 0 0 0 0-3.5z"/></svg>'}}),unifyedActionIconDirectives.directive("circlequestionIcon",function(){return{restrict:"E",template:'<svg enable-background="new 0 0 551.13 551.13" viewBox="0 0 551.13 551.13" width="512" xmlns="http://www.w3.org/2000/svg"><path d="m275.565 0c-151.944 0-275.565 123.621-275.565 275.565s123.621 275.565 275.565 275.565 275.565-123.621 275.565-275.565-123.621-275.565-275.565-275.565zm0 516.685c-132.955 0-241.119-108.164-241.119-241.119s108.164-241.12 241.119-241.12 241.12 108.164 241.12 241.119-108.165 241.12-241.12 241.12z"/><path d="m258.342 413.348h34.446v34.446h-34.446z"/><path d="m275.565 103.337c-56.983 0-103.337 46.353-103.337 103.337v34.446h34.446v-34.446c0-37.995 30.897-68.891 68.891-68.891 37.995 0 68.891 30.897 68.891 68.891 0 25.851-13.775 50.188-35.943 63.492l-41.813 25.077c-5.18 3.112-8.359 8.712-8.359 14.767v68.891h34.446v-59.136l33.453-20.065c32.478-19.51 52.661-55.15 52.661-93.027.001-56.983-46.353-103.336-103.336-103.336z"/></svg>'}}),unifyedActionIconDirectives.directive("gridIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 271.673 271.673" style="enable-background:new 0 0 271.673 271.673;" xml:space="preserve"><path d="M114.939,0H10.449C4.678,0,0,4.678,0,10.449v104.49c0,5.771,4.678,10.449,10.449,10.449h104.49c5.771,0,10.449-4.678,10.449-10.449V10.449C125.388,4.678,120.71,0,114.939,0z"/><path d="M261.224,0h-104.49c-5.771,0-10.449,4.678-10.449,10.449v104.49c0,5.771,4.678,10.449,10.449,10.449h104.49c5.771,0,10.449-4.678,10.449-10.449V10.449C271.673,4.678,266.995,0,261.224,0z"/><path d="M114.939,146.286H10.449C4.678,146.286,0,150.964,0,156.735v104.49c0,5.771,4.678,10.449,10.449,10.449h104.49c5.771,0,10.449-4.678,10.449-10.449v-104.49C125.388,150.964,120.71,146.286,114.939,146.286z"/><path d="M261.224,146.286h-104.49c-5.771,0-10.449,4.678-10.449,10.449v104.49c0,5.771,4.678,10.449,10.449,10.449h104.49c5.771,0,10.449-4.678,10.449-10.449v-104.49C271.673,150.964,266.995,146.286,261.224,146.286z"/></svg>'}}),unifyedActionIconDirectives.directive("notificationIcon",function(){return{restrict:"E",template:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.233 19.108"><path id="Path_15" data-name="Path 15" d="M-573.654,4.129a2.672,2.672,0,0,1-2.156,2.136,2.62,2.62,0,0,1-3-1.881c-.059-.216-.146-.263-.356-.261-1.122.012-2.244.006-3.366.006a1.258,1.258,0,0,1-1.2-.69,1.235,1.235,0,0,1,.118-1.379,8.2,8.2,0,0,0,1.538-3.476,12.147,12.147,0,0,0,.143-1.624c.03-.893-.039-1.793.048-2.678A5.49,5.49,0,0,1-578.7-10.3a.334.334,0,0,0,.229-.346,2.189,2.189,0,0,1,2.015-2.145,2.155,2.155,0,0,1,2.346,1.9.781.781,0,0,0,.479.709A5.5,5.5,0,0,1-570.7-6.094a8.68,8.68,0,0,1,.078,1.307c.012.589.005,1.179,0,1.768a8.146,8.146,0,0,0,1.571,4.906,1.632,1.632,0,0,1,.38.834,1.282,1.282,0,0,1-1.307,1.405c-1.166,0-2.333,0-3.5,0Zm-2.626-1.066h3.252c1,0,2,0,3-.006a.352.352,0,0,0,.263-.127c.036-.06-.008-.19-.05-.271a3.133,3.133,0,0,0-.237-.344,8.612,8.612,0,0,1-1.629-4.955c-.01-.811,0-1.622,0-2.434a4.7,4.7,0,0,0-.536-2.268,4.579,4.579,0,0,0-2.49-2.175.548.548,0,0,1-.429-.629c0-.152,0-.3,0-.456a1.129,1.129,0,0,0-1.159-1.131,1.133,1.133,0,0,0-1.116,1.156c0,.171,0,.342,0,.513a.522.522,0,0,1-.364.523c-.083.032-.167.061-.247.1a4.445,4.445,0,0,0-2.8,3.789,25.706,25.706,0,0,0-.04,2.659,9.587,9.587,0,0,1-.255,2.316,9.267,9.267,0,0,1-1.6,3.312.361.361,0,0,0-.064.3.369.369,0,0,0,.285.122Q-579.39,3.068-576.281,3.063Zm-1.483,1.076a1.532,1.532,0,0,0,1.446,1.1,1.544,1.544,0,0,0,1.532-1.1Z" transform="translate(583.894 12.796)" /></svg>'}}),unifyedActionIconDirectives.directive("downarrowIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 451.847 451.847" style="enable-background:new 0 0 451.847 451.847;" xml:space="preserve"> <path d="M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751 c12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0 c12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z"/> </svg>'}}),unifyedActionIconDirectives.directive("uparrowIcon",function(){return{restrict:"E",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 451.847 451.846" style="enable-background:new 0 0 451.847 451.846;" xml:space="preserve"> <path d="M248.292,106.406l194.281,194.29c12.365,12.359,12.365,32.391,0,44.744c-12.354,12.354-32.391,12.354-44.744,0 L225.923,173.529L54.018,345.44c-12.36,12.354-32.395,12.354-44.748,0c-12.359-12.354-12.359-32.391,0-44.75L203.554,106.4 c6.18-6.174,14.271-9.259,22.369-9.259C234.018,97.141,242.115,100.232,248.292,106.406z"/> </svg>'}}),unifyedActionIconDirectives.directive("codeIcon",function(){return{restrict:"E",template:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 31.63 40"><g data-name="Layer 2"><g><path class="cls-1" d="M31.19,7.54,24,.41A1.34,1.34,0,0,0,23,0H1.3A1.19,1.19,0,0,0,0,1.31V38.67A1.19,1.19,0,0,0,1.32,40h29a1.19,1.19,0,0,0,1.32-1.31V8.61A1.43,1.43,0,0,0,31.19,7.54ZM24.08,4V3.83l3.66,3.7s-.08,0-.14,0H24.28c-.15,0-.21,0-.21-.19C24.08,6.22,24.08,5.11,24.08,4Zm5,33.66H2.58c-.17,0-.22,0-.22-.22,0-5.82,0-11.63,0-17.45s0-11.59,0-17.39c0-.2.05-.23.24-.23H21.48c.2,0,.24,0,.24.24q0,3,0,6A1.19,1.19,0,0,0,23,9.88h6c.19,0,.22,0,.22.22V37.43C29.27,37.61,29.23,37.65,29.05,37.65Z"/><path class="cls-1" d="M12.6,28.7A1.18,1.18,0,0,1,11.45,27c.46-1,.94-2,1.41-3Q15.43,18.51,18,13a1.18,1.18,0,1,1,2.17.94L18.79,16.9q-2.58,5.51-5.15,11A1.17,1.17,0,0,1,12.6,28.7Z"/><path class="cls-1" d="M21.91,14.12a1.19,1.19,0,0,1,.9.36q2.46,2.44,4.91,4.9a1.17,1.17,0,0,1,0,1.73L24,24.76,22.78,26a1.2,1.2,0,0,1-1.34.22,1.17,1.17,0,0,1-.66-1.17,1.26,1.26,0,0,1,.4-.8l3.91-3.88c.12-.12.13-.18,0-.31-1.32-1.3-2.64-2.62-3.95-3.93a1.17,1.17,0,0,1,.41-2A.85.85,0,0,1,21.91,14.12Z"/><path class="cls-1" d="M9.77,14.12a1.12,1.12,0,0,1,1,.72,1.13,1.13,0,0,1-.27,1.3L6.55,20.07c-.14.14-.13.21,0,.34l3.9,3.88a1.17,1.17,0,0,1,.37,1.11,1.1,1.1,0,0,1-.82.9A1.15,1.15,0,0,1,8.83,26c-.74-.73-1.47-1.47-2.21-2.21L4,21.14a1.17,1.17,0,0,1,0-1.81l4.82-4.81A1.26,1.26,0,0,1,9.77,14.12Z"/></g></g></svg>'}}),unifyedActionIconDirectives.directive("paginationIcon",function(){return{restrict:"E",template:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40.266 47.052"> <g data-name="Group 173" transform="translate(-409.817 -584.572)"> <path data-name="Path 41" d="M416,585.732a5.5,5.5,0,0,0-.558-.512,2.4,2.4,0,0,0-2.951-.048,7.583,7.583,0,0,0-2.673,3.142v.982a4.309,4.309,0,0,0,1.252,1.852q8.317,8.317,16.619,16.649a4.56,4.56,0,0,0,.458.352c-.192.2-.309.329-.432.453q-8.306,8.329-16.617,16.652a4.065,4.065,0,0,0-1.28,1.988v.714a6.8,6.8,0,0,0,3.661,3.75h.893a4.112,4.112,0,0,0,1.862-1.234q10.062-10.1,20.14-20.193a2.627,2.627,0,0,0-.011-4.134Q426.181,595.937,416,585.732Z" transform="translate(0 -0.08)"/> <path data-name="Path 42" d="M511.114,584.572c-.01.192-.03.385-.03.578q0,22.948,0,45.9c0,.193.02.385.03.578h9.375V584.572Z" transform="translate(-70.405)"/> </g></svg>'}}),unifyedActionIconDirectives.directive("fountainLoader",function(){return{restrict:"E",template:'<div class="fountainLoaderMain"><div class="fountainLoaderInner"><div class="fountainLoader fountainLoader_1"></div><div class="fountainLoader fountainLoader_2"></div><div class="fountainLoader fountainLoader_3"></div><div class="fountainLoader fountainLoader_4"></div><div class="fountainLoader fountainLoader_5"></div><div class="fountainLoader fountainLoader_6"></div><div class="fountainLoader fountainLoader_7"></div><div class="fountainLoader fountainLoader_8"></div></div></div>'}}),angular.module("MobileServices",[]).factory("unifyedglobal",["$http","$rootScope","$location","sqlLiteServ","$route",function(e,t,a,n,o){function i(a,n){if(t.password)return a.password=t.password,n(null,a);var o=t.idpUrl+"/admin/secured/"+t.qlTenantId+"/api/getClearPass";console.log("clearpassurl= "+o),e({url:o,method:"GET",withCredentials:!0}).then(function(e){return e.data?(t.password=a.password=e.data,n(null,a)):(console.error("Unkonw error: Clearpass API not executed properly. "+e),n({err:"Couldnt get clearpass from QL"}))},function(e){return console.error(e),n(e)})}function r(a,n){if(a.username=t.username,a.demoMode){a.endpoint.indexOf("=")>0&&(a.endpoint=a.endpoint.substring(0,a.endpoint.lastIndexOf("/"))),function(e,a){"banner"==e.product.toLowerCase()?e.serviceUrl=e.middlewareServerUrl+"/services/student"+e.endpoint:"ps"==e.product.toLowerCase()&&(e.serviceUrl=e.middlewareServerUrl+"/services/data/"+t.user.tenant+"/"+e.product+e.endpoint),a(null,e)}(a,function(e,t){return n(e,t)})}else"banner"==a.product.toLowerCase()?"oauth"==a.tokenType?function(e,a){t.erpticket[e.product]=t.user.accessToken;var n=e.middlewareServerUrl+"/services/student/"+e.endpoint+"?ticket="+t.erpticket[e.product];console.log("Service URL: "+n),e.serviceUrl=n,a(null,e)}(a,function(e,t){return n(e,t)}):(a.clearpassUrl=t.qlClearPassUrl,i(a,function(a,o){return a||function(a,n){var o,i=a.middlewareServerUrl+"/services/authenticate/login";o="username="+a.username+"&password="+a.password,$.blockUI(),e.post(i,o).success(function(e,o,i,r){$.unblockUI(),t.erpticket[a.product]=e.ticket;var s=a.middlewareServerUrl+"/services/student"+a.endpoint+"?ticket="+t.erpticket[a.product];return console.log("Service URL: "+s),a.serviceUrl=s,n(null,a)}).error(function(e,o,i,r){return $.unblockUI(),t.erpticket[a.product]="",n(e)})}(o,function(e,t){return n(e,t)}),n(a,o)})):"ps"==a.product.toLowerCase()&&(a.clearpassUrl=t.qlClearPassUrl,i(a,function(a,o){return a||function(a,n){var o=a.middlewareServerUrl+"/services/authenticate/"+t.user.tenant+"/"+a.product,i={};window.device?i="username="+a.username+"&password="+a.password:(o="/websimulator/json?url="+o,i={method:"POST",body:"username="+a.username+"&password="+a.password}),$.blockUI(),e.post(o,i).success(function(e,o,i,r){$.unblockUI(),t.erpticket[a.product]=e.ticket;var s=a.middlewareServerUrl+"/services/data/"+t.user.tenant+"/"+a.product+a.endpoint+"?ticket="+t.erpticket[a.product];return console.log("Service URL: "+s),a.serviceUrl=s,n(null,a)}).error(function(e,o,i,r){return $.unblockUI(),t.erpticket[a.product]="",n(e)})}(o,function(e,t){return n(e,t)}),n(a,o)}))}function s(a,n,o,i){!function(e,a){e.middlewareServerUrl||console.error("Middleware server URL not mentioned for the applet !"),e.product&&"banner"==e.product.toLowerCase()?e.serviceUrl=e.middlewareServerUrl+"/services/student"+e.endpoint+"?ticket="+t.erpticket[e.product]:e.product&&"ps"==e.product.toLowerCase()?e.demoMode?e.serviceUrl=e.middlewareServerUrl+"/"+e.product.toLowerCase()+e.endpoint+"?ticket="+t.erpticket[e.product]:e.serviceUrl=e.middlewareServerUrl+"/services/data/"+t.user.tenant+"/"+e.product+e.endpoint+"?ticket="+t.erpticket[e.product]:e.product||console.error("Product name not mentioned for the applet !"),a(null,e)}(a,function(t,a){var l=a.serviceUrl;console.log(l);var c="",d=n,p={};window.device?c=l:(c="/websimulator/json?url="+encodeURIComponent(l),d="POST",p={method:n},"POST"==n&&(p={method:"POST",body:a.postdata},a.demoMode&&(p="",c=l))),o++,e({method:d,url:c,data:p}).then(function(e,t,n,o){console.log("RESULTS:"),console.log(e),i(a,e.data,t,n,o)},function(e,t,l,c){if(!(403==t&&o<=2))return i(a,e,t,l,c);r(a,function(e,t){return e?($.unblockUI(),console.log("Couldnt execute API due to errors."),callback()):s(t,n,o,i)})})})}function l(e){return e.middlewareServerUrl?e.product?!!e.endpoint||(console.error("API endpoint not mentioned !"),!0):(console.error("Product name not mentioned for applet !"),!1):(console.error("Middleware Server URL not mentioned for applet !"),!1)}function c(e,a){console.log(),angular.forEach(t.rbacallmenus,function(a,n){"applet"==a.type&&a.url.split("/")[2]==e.params.appid?t.appletTitle=a.label:"page"==a.type&&a.url.split("/")[2]==e.params.id&&(t.appletTitle=a.label)})}t.postAPI=function(e,a,n,o){if(e.endpoint=a,e.postdata=n,e.demoMode="https://kryptosda.kryptosmobile.com/kryptosds"==e.middlewareServerUrl,!l(e))return o();$.blockUI(),t.demoMode||!t.demoMode&&t.erpticket&&t.erpticket[e.product]?s(e,"POST",1,function(e,t,a,n,i){return $.unblockUI(),o(t,a,n,i)}):(t.erpticket||(t.erpticket={}),r(e,function(e,t){if(e)return console.log("Couldnt execute API due to errors."),$.unblockUI(),o();s(t,"POST",1,function(e,t,a,n,i){return $.unblockUI(),o(t,a,n,i)})}))},t.getAPI=function(e,a,n){if(e.endpoint=a,e.demoMode="https://kryptosda.kryptosmobile.com/kryptosds"==e.middlewareServerUrl,!l(e))return n();$.blockUI(),t.demoMode||!t.demoMode&&t.erpticket&&t.erpticket[e.product]?s(e,"GET",1,function(e,t,a,o,i){return $.unblockUI(),n(t,a,o,i)}):(t.erpticket||(t.erpticket={}),r(e,function(e,t){if(e)return console.error("Couldnt execute API due to errors."),$.unblockUI(),n();window.device?s(t,"GET",1,function(e,t,a,o,i){return $.unblockUI(),n(t,a,o,i)}):s(t,"POST",1,function(e,t,a,o,i){return $.unblockUI(),n(t,a,o,i)})}))},t.userNameIntialsColor=["#36B37E","#FF5630","#FFAB00","#8d99ae","#50939b","#de4d78","#bc59cf","#0f5772","#7d7e7d","#4fb443","#596fef","#00b8ff"],t.randomBackground=function(e,a){for(var n=e+a,o=0,i=0;i<n.length;i++)o+=n.charCodeAt(i);return t.userNameIntialsColor[o%t.userNameIntialsColor.length]},t.userRolestoString=function(e){for(var t=0;t<e.length;t++)e[t]=e[t].charAt(0).toUpperCase()+e[t].slice(1);return e.toString().replace(/,/g,", ")},t.inAppNotificationHandler=function(e){e.on("notification",function(e){if(e.additionalData.foreground)e.additionalData.picture||e.additionalData.image?("Android"==device.platform?$("#notImg").attr("src",e.additionalData.picture):$("#notImg").attr("src",e.additionalData.image),$("#notImg").show()):$("#notImg").hide(),$("#notTitle").html(e.title),$("#notDesc").html(e.message),$(".modale").css("display","block"),setTimeout(function(){$(".modale").addClass("opened")},1e3);else if("BlueLight Tracking Alert"==e.title){e.message;var t="/app/BlueLightEmergency32/BlueLightEmergency32";a.path(t).search({email:e.trackEmail})}else if(-1!=e.title.indexOf("sent a new message!")||-1!=e.title.indexOf("wants to Chat!")||-1!=e.title.indexOf("approved chat connection!")){t="/app/UnifyedChat/UnifyedChat";a.path(t).search({pushtitle:e.title})}})},t.isEmpty=function(e){return 0===Object.keys(e).length},t.getHeaders=function(e,a){var n={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+t.user.accessToken,"X-TENANT-ID":t.user.tenant,"X-TENANT-DOMAIN":t.user.tenantdomain,"principal-user":t.username,"Site-ID":t.user.siteId,timeStamp:(new Date).getTime()};return t.site&&t.site._id&&(n["site-id"]=t.site._id),(t.user.email&&-1!=e.indexOf("/unifyed-mydrive/")||t.user.email&&-1!=e.indexOf("/unifyed-notificationcentre/")||t.user.email&&-1!=e.indexOf("/unifyedsitegroups/")||t.user.email&&-1!=e.indexOf("/unifyedchat/"))&&(n["X-USER-EMAIL"]=t.user.email),t.user.email&&-1!=e.indexOf("/unifyedcladapter/")&&(n.userid=t.user.email.split("@")[0]),n},t.callAPI=function(a,n,o,i){try{t.isblocking||$.blockUI();var r=t.GatewayUrl+a;window.globalsiteid&&(callAPISiteId=window.globalsiteid);var s={method:n,url:r,headers:t.getHeaders(a,n),data:o,json:!0};console.log("apiEndPoint",s),e(s).then(function(e){return t.isblocking||$.unblockUI(),i(e)},function(e){if(console.log(JSON.stringify(e)),t.isblocking||$.unblockUI(),404==e.status)return i(null);0==e.status||401==e.status||-1==e.status?t.refreshToken(a,n,o,i):i(e)})}catch(e){return t.isblocking||$.unblockUI(),console.log(e),i()}},t.resetApp=function(){t.user=null,t.loggedIn=!1;let e=t.tenantDetails;t.user=$.isEmptyObject(t.user)?{}:t.user,t.brandingUrl=e.logoUrl,t.user.tenant=t.tenantId,t.user.tenantdomain=e.idpTenantDomain,t.GatewayUrl="https://"+e.domain+e.gatewaypath,t.user.domain=e.domain,t.user.gatewaypath=e.gatewaypath,t.user.admins=e.admins||[],t.user.oauthUserInfoUrl=e.oauthUserInfoUrl,t.user.products=e.products,t.user.qlId=e.qlTenantid,t.user.siteId=e.siteId,t.user.backgroundImg=e.backgroundImg,a.path("/app/Rbacsignin/Rbacsignin"),o.reload()},t.refreshHandler=function(){if(t.appDetails.guestApp){let a;a=window.device?t.GatewayUrl+"/unifyedrbac/rbac/open/menus":t.getBaseUrl(t.user.gatewaypath+"/unifyedrbac/rbac/open/menus",t.environment);var e={headers:{"Content-Type":"application/json","X-TENANT-ID":t.tenantId,"site-id":t.user.siteId},url:a,method:"POST",body:[{roles:["Public"],product:"global"}],json:!0};t.callOpenAPI(e,function(e,a){var n=a;t.dockApplets=n.docks,n.menus=t.removeDuplicates(n),t.rbacnavmenu=t.buildMenuTree(n.menus),t.rbacallmenus=n.menus,angular.forEach(n.menus,function(e,a){e.id==n.landingPages[0].pageId&&(t.landingPage=e)}),t.resetApp()})}else t.resetApp()},t.refreshToken=function(a,n,o,i){$.blockUI();var r=t.GatewayUrl+"/unifydidentity/open/oauth2/token",s="username="+$.jStorage.get("unifyedusername")+"&password="+$.jStorage.get("unifyedpassword"),l={headers:{"Content-Type":"application/x-www-form-urlencoded","X-TENANT-ID":t.tenantId},url:r,method:"POST",data:s,json:!0};e(l).then(function(e){var r=e.data;console.log("beforeRefresh",t.user),t.user.accessToken=r.access_token,t.user.refreshToken=r.refresh_token,t.user.providerData=r.access_token,console.log("afterRefresh",t.user),$.jStorage.set("user",t.user),$.jStorage.set("token",e.data),t.callAPI(a,n,o,i),$.unblockUI()},function(e){console.log(e),$.unblockUI(),window.device?navigator.notification.alert("Your session is expired. Please login again.",null,"Session Expired","Ok"):alert("Your session is expired. Please login again."),$.jStorage.deleteKey("user"),$.jStorage.deleteKey("token"),$.jStorage.deleteKey("unifyedusername"),$.jStorage.deleteKey("unifyedpassword"),t.refreshHandler()})},t.callOpenAPI=function(a,n){var o;console.log("callOpenAPI",a,t.user),window.device?(a.data=a.body,o=a):o={url:"https://kryptosda.kryptosmobile.com/kryptosds/utils/proxy",data:a,method:"POST"},e(o).then(function(e){n(null,e.data)},function(e){n(e,null)})},t.callCMSAPI=function(a,n){var o;console.log("callCMSAPI",a,t.user),window.device?(a.url=`https://${t.user.domain}${a.url}`,a.data=a.body,o=a):(a.url=t.getBaseUrl(a.url,t.environment),o={url:"https://kryptosda.kryptosmobile.com/kryptosds/utils/proxy",data:a,method:"POST"}),e(o).then(function(e){n(null,e.data)},function(e){n(e,null)})},t.getNotificationBadgeMobile=function(){if(t.notificationcentre=t.notificationcentre||{},!(t.GatewayUrl&&t.user&&t.user.accessToken&&t.user.email))return setTimeout(function(){t.getNotificationBadgeMobile()},500),!0;var a={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+t.user.accessToken,"X-TENANT-ID":t.user.tenant,"X-TENANT-DOMAIN":t.user.tenantdomain,"principal-user":t.username,"X-USER-EMAIL":t.user.email};t.site&&t.site._id&&(a["site-id"]=t.site._id);var n=t.GatewayUrl+"/unifyed-notificationcentre/v1/notifications/count?type=sent";e({method:"GET",url:n,headers:a}).then(function(e){t.notificationcentre.badge=e&&e.data&&e.data.data||0;try{t.$apply()}catch(e){}},function(e){console.log("in callAPI, URL : "+n+" : error status="+e.status)})},t.$on("$routeChangeStart",function(e,n,i){if($.blockUI(),t.currentPagePath=a.path(),window.device&&"none"==navigator.connection.type)navigator.notification.alert("No network connection found. Please check your network settings and try again.",function(){a.path(t.currentPagePath),o.reload()},"No Network","Ok");else if(t.rbacnavmenu){if(i.params.sitebaseurl&&"UnifyedGroups"==n.params.appid||i.params.sitebaseurl&&a.path().startsWith("/group/")||t.groupPageFromMenu&&"Rbacmenu"==n.params.appid){t.hideDockMenu=!1,t.user.siteId=t.olderSiteIdPortal||t.user.siteId,window.globalsiteid=t.user.siteId,window.siteGroupId=void 0,t.groupPageFromMenu=!1;let e="/unifyedrbac/rbac/user?user="+t.user.email+"&device=mobile";t.callAPI(e,"GET",{},function(e){if(e&&e.data){t.rbacGroupMenuGenerated=!0;var a=e.data;a.menus=t.removeDuplicates(a),t.rbacnavmenu=t.buildMenuTree(a.menus),t.rbacallmenus=a.menus,c(n)}})}n.params.sitebaseurl&&a.path().startsWith("/group/")&&(t.hideDockMenu=!0),c(n)}});return t.$on("$routeChangeSuccess",function(e,a,n){if($.unblockUI(),$(".dockIconLink .dockIconImage").children(".dock-menu-icon").css("opacity",.6),$(".dockIconLink .dockIconLabel").css("opacity",.6),t.dockApplets)for(var o=0;o<t.dockApplets.length;o++){if("/app/"+a.pathParams.appid+"/"+a.pathParams.pageid==t.dockApplets[o].url){$(".dockIcon"+t.dockApplets[o].id).children(".dockIconImage").children(".dock-menu-icon").css("opacity",1),$(".dockIcon"+t.dockApplets[o].id).children(".dockIconLabel").css("opacity",1);break}"/app/"+a.pathParams.appid+"/"+a.pathParams.pageid=="/app/Rbacmenu/Rbacmenu"&&($(".menuRbac").children(".dockIconImage").children(".dock-menu-icon").css("opacity",1),$(".menuRbac").children(".dockIconLabel").css("opacity",1))}setTimeout(function(){var e,t;e=$("#appHeader").height(),t=$("#bottomFixContent").height(),$("#loadApplet").css({paddingBottom:t,paddingTop:e})},1e3)}),t.compare=function(e,t){var a=e.precedence,n=t.precedence,o=0;return a>n?o=1:a<n&&(o=-1),o},t.removeDuplicates=function(e){for(var t=[],a=[],n=0;n<e.menus.length;n++)if(-1==t.indexOf(e.menus[n].id))t.push(e.menus[n].id),a.push(e.menus[n]);else for(var o=0;o<a.length;o++)if(a[o].id==e.menus[n].id)for(var i in e.menus[n].actions)a[o].actions.hasOwnProperty(i)||(a[o].actions[i]=!0);return a},t.buildMenuTree=function(e){t.masterMenuTree=[];var a=function(e,n){angular.forEach(e,function(e,o){t.rbacFirstLanding&&e.id==t.rbacFirstLanding.pageId&&(t.rbacFirstLanding.menu=e,t.site.landingpage=t.rbacFirstLanding.menu.url),e.path.split("/")[e.path.split("/").length-1]==n.root?(e.children=e.children||[],e.children.push(n)):e.children&&a(e.children,n)})};return angular.forEach(e,function(e,n){t.rbacFirstLanding&&e.id==t.rbacFirstLanding.pageId&&(t.rbacFirstLanding.menu=e,t.site.landingpage=t.rbacFirstLanding.menu.url),e.path==e.root?(e.children=[],t.masterMenuTree.push(e)):a(t.masterMenuTree,e)}),t.masterMenuTree},t.getBaseUrl=function(e){let a="";switch(t.environment){case"dev":a="https://dev.unifyed.com";break;case"stage":a="https://unifyed-staging.unifyed.com";break;case"prod":a="https://unifyedprod.unifyed.com";break;case"qa":a="https://unifyedqa.unifyed.com";break;case"uat":a="https://uat-qa.unifyed.com";break;case"demo":a="https://nmsu4.unifyed.com"}return a+e},t.loginlogout=function(){a.path("/app/Rbacsignin/Rbacsignin")},t.goPreviousPage=function(e){var a=window.location;t.leftToRight=!0,"#/app/Rbacsignin/Rbacsignin"==a.hash&&t.appDetails.guestApp?window.location.href="#/app/Rbacmenu/Rbacmenu":"#/app/Rbacsignin/Rbacsignin"!=a.hash||t.appDetails.guestApp?("#/app/Rbacmenu/Rbacmenu"!=a.hash||t.appDetails.guestApp)&&("#/app/UnifyedGroups/UnifyedGroups"==a.hash||-1!=a.hash.indexOf("Rbacmenu")?(t.user.siteId=t.olderSiteIdPortal?t.olderSiteIdPortal:t.user.siteId,window.siteGroupId=void 0,window.history.back()):window.history.back()):navigator.app.exitApp()},document.addEventListener("backbutton",t.goPreviousPage,!0),t.loadUnacknowledgedMessage=function(){var a=t.GatewayUrl+"/unifyed-notificationcentre/v1/notifications/acknowledged?ack=false";e({method:"GET",url:a,headers:t.getHeaders(a,"GET")}).then(function(e){e&&e.data&&e.data.length&&($("#acknowledgeModal").modal("show"),t.unAcknowledgeMessages=e.data)},function(e){console.log("in callAPI, URL : "+a+" : error status="+e.status)})},window.open=function(e,t,a){return t=t||"_blank",a=a||"",cordova.InAppBrowser.open(e,t,a)},$(document).on("click","#pageContent a",function(e){e.preventDefault(),$(this).attr("href")&&"#"!=$(this).attr("href")&&(-1!=$(this).attr("href").indexOf("mailto:")||-1!=$(this).attr("href").indexOf("tel:")?window.open($(this).attr("href"),"_system"):window.open($(this).attr("href"),"_blank"))}),$(document).on("click",".bbContent a",function(e){e.preventDefault(),-1!=$(this).attr("href").indexOf("mailto")?window.open($(this).attr("href"),"_system"):window.open($(this).attr("href"),"_blank")}),$(document).on("click",".lineHeight22 a",function(e){e.preventDefault(),-1!=$(this).attr("href").indexOf("mailto")?window.open($(this).attr("href"),"_system"):window.open($(this).attr("href"),"_blank")}),t.adddynamicPadding=function(){var e=$("#appHeader").height(),t=$("#bottomFixContent").height();$("#loadApplet").css({paddingBottom:t,paddingTop:e})},t.keybordHideshow=(()=>{window.addEventListener("keyboardWillShow",function(){Keyboard.disableScroll(!1),$("#dockIcon").hide(),$("#loadApplet").css("paddingBottom","0px"),$("#bottomFixContent").addClass("fixBottomgap0px").removeClass("fixBottomgap")}),window.addEventListener("keyboardWillHide",function(){Keyboard.disableScroll(!0);var e=$("#bottomFixContent").height();$("#dockIcon").show(),$("#loadApplet").css("paddingBottom",e),$("#bottomFixContent").removeClass("fixBottomgap0px").addClass("fixBottomgap")}),window.addEventListener("keyboardDidShow",function(){"iOS"==device.platform&&setTimeout(function(){document.activeElement.scrollIntoViewIfNeeded()},100)}),window.addEventListener("keyboardDidHide",function(){t.adddynamicPadding()})}),t.keybordHideshow(),t.ackMessage=function(e,n,o){t.isRedirection=!1,console.log("dks",o);var i="/unifyed-notificationcentre/v1/notification/acknowledged/"+e;"skip"==n&&(i="/unifyed-notificationcentre/v1/notification/skip/"+e),t.callAPI(i,"PUT",{},function(e){e&&2==e.status?console.error("Failed to acknowledge message"):(t.unAcknowledgeMessages&&t.unAcknowledgeMessages.length&&(o.redirectionUrl&&"Not Found"!=o.redirectionUrl&&(t.isRedirection=!0,a.path(o.redirectionUrl),$("#acknowledgeModal").modal("hide")),t.unAcknowledgeMessages.shift()),t.unAcknowledgeMessages&&t.unAcknowledgeMessages.length||$("#acknowledgeModal").modal("hide"))},2)},window.alert=function(e,t,a){t?navigator.notification.alert(e,null,t,"Ok"):navigator.notification.alert(e,null,"Alert","Ok")},{serviceloaded:"serviceloaded"}}]),angular.module("unifyedmobile").run(["unifyedglobal",function(e){}]),angular.module("convertSvg",[]).service("convertSvgIcon",function(){return{converTeddata:function(){jQuery("img.sidebar-menu-icon , img.convertsvg , img.dock-menu-icon").each(function(){var e=jQuery(this),t=e.attr("id"),a=e.attr("class"),n=e.attr("src");jQuery.get(n,function(n){var o=jQuery(n).find("svg");void 0!==t&&(o=o.attr("id",t)),void 0!==a&&(o=o.attr("class",a+" replaced-svg")),!(o=o.removeAttr("xmlns:a")).attr("viewBox")&&o.attr("height")&&o.attr("width")&&o.attr("viewBox","0 0 "+o.attr("height")+" "+o.attr("width")),e.replaceWith(o)},"xml")})}}}),angular.module("sqlService",[]).factory("sqlLiteServ",["$http","$rootScope","$location",function(e,t,a){return{openDataBase:async function(){return await window.sqlitePlugin.openDatabase({name:`unifyed.${t.tenantId}`,location:"default"})},addUpdateData:function(e,t){t=JSON.stringify(t),this.openDataBase().transaction(function(a){a.executeSql(`CREATE TABLE IF NOT EXISTS ${e} (info)`),a.executeSql(`INSERT INTO ${e} VALUES (?1)`,[t])},function(e){console.log("Transaction ERROR: "+e.message)},function(){return"Populated database OK"})},runGetQuery:async function(e,t){(await this.openDataBase()).transaction(function(a){console.log(e[0]),a.executeSql(e[0].q,e[0].d,function(e,a){console.log("resultSet",a),a.rows.length>0?t(null,a.rows):t("record not found",a.rows)},function(e,a){console.log("error",a),t("error",a)})},function(e){console.log("Transaction ERROR: "+e.message)},function(){console.log("Transaction success")})},updateData:function(){return 0},runAddQuery:async function(e,t){(await this.openDataBase()).transaction(function(t){angular.forEach(e,function(e,a){console.log(e),e.d?t.executeSql(e.q,e.d,function(e,t){console.log("insertId: "+t.insertId+" -- probably 1"),console.log("rowsAffected: "+t.rowsAffected+" -- should be 1")},function(e,t){console.log("INSERT error: "+t.message)}):t.executeSql(e.q)})},function(e){console.log("Transaction ERROR: "+e.message),t("error",e)},function(){console.log("Transaction success:"),t(null,"data added")})}}}]);let appletCtrl=angular.module("AppletCtrl",[]);appletCtrl.controller("appletController",["$rootScope","$scope","$routeParams","$http","$compile","$sce","$location","$window","BannerService","sqlLiteServ","$injector","convertSvgIcon",function(e,t,a,n,o,i,r,s,l,c,d,p){let u={BannerService:l};t.appid=a.appid,t.pageid=a.pageid,t.evaluateApplet=function(t,a){try{return window.eval(t.pageprocessor),a(t)}catch(n){return e.isblocking||$.unblockUI(),console.error(n),a(t,n)}},t.adddynamicPadding=function(){var e=$("#appHeader").height(),t=$("#bottomFixContent").height();$("#loadApplet").css({paddingBottom:t,paddingTop:e})},t.keybordHideshow=(()=>{window.addEventListener("keyboardWillShow",function(){Keyboard.disableScroll(!1),Keyboard.setResizeMode("native"),$("#dockIcon").hide(),$("#loadApplet").css("paddingBottom","0px"),$("#bottomFixContent").addClass("fixBottomgap0px").removeClass("fixBottomgap")}),window.addEventListener("keyboardWillHide",function(){Keyboard.disableScroll(!0);var t=$("#bottomFixContent").height();"Rbacsignin"!=window.location.hash.split("/")[2]||e.appDetails.guestApp?$("#dockIcon").show():$("#dockIcon").hide(),$("#loadApplet").css("paddingBottom",t),$("#bottomFixContent").removeClass("fixBottomgap0px").addClass("fixBottomgap")}),window.addEventListener("keyboardDidShow",function(){"iOS"==device.platform&&setTimeout(function(){document.activeElement.scrollIntoViewIfNeeded()},100)}),window.addEventListener("keyboardDidHide",function(){t.adddynamicPadding()})}),t.launchPage=function(l){var d={};for(var g in d.datatemplate=l.datatemplate,d.pageprocessor=l.pageprocessor,d.pageTemplate=l.pageTemplate,l)switch(g){case"pageid":case"datatemplate":case"pageTemplate":case"pageprocessor":break;default:d[g]=l[g]}try{setTimeout(function(){$("#appContent").html(""),window[t.pname](d,t,a,o,n,e,i,s,r,u,c,p),setTimeout(function(){p.converTeddata(),t.adddynamicPadding()},100),t.$apply()},100)}catch(e){$.unblockUI()}};let g=!1;var m;t.pname="pageprocessor"+t.pageid,t.checkNewAppletVer=function(){var a={headers:{"Content-Type":"application/json",Accept:"application/json"},url:"/studio/checkappletver/"+e.tenantId+"/"+t.appid,method:"GET"};e.callCMSAPI(a,function(a,n){e.appletsData=e.appletsData||[],e.appletsData.push(n.pages[0]),t.evaluateApplet(n.pages[0],t.launchPage)})},t.getAppletFromLocal=function(a){if(angular.forEach(e.appletsData,function(e,n){if(e.pageid==t.pageid){for(var o in g=!0,a)e[o]=a[o];t.evaluateApplet(e,t.launchPage)}}),!g&&!g)if(window.device){let n=[];n.push({q:"SELECT info FROM pageDetails WHERE pageid = ?",d:[t.pageid]}),c.runGetQuery(n,function(n,o){if(n)t.checkDeviceUpdatePublish();else{e.appletsData=e.appletsData||[],e.appletsData.push(JSON.parse(o.item(0).info));let n=JSON.parse(o.item(0).info);for(var i in a)n[i]=a[i];t.evaluateApplet(n,t.launchPage)}})}else{var n={headers:{"Content-Type":"application/json",Accept:"application/json"},url:"/studio/getmobileappletmetadata/"+e.tenantId+"/"+t.appid+"/"+t.pageid,method:"POST",data:{uuid:window.device?device.uuid:"9876543210"}};e.callCMSAPI(n,function(a,n){let o=$.jStorage.get("appletVersion")?$.jStorage.get("appletVersion"):{};o[t.pageid]=n.updateApp.appletversion,$.jStorage.set("appletVersion",o),e.appletsData=e.appletsData||[],e.appletsData.push(n.updateApp.pages[0]),t.evaluateApplet(n.updateApp.pages[0],t.launchPage),t.saveApplet(t.pageid,n.updateApp.pages[0])})}},t.saveApplet=function(e,t){let a=[];a.push({q:"SELECT info FROM pageDetails WHERE pageid = ?",d:[e]}),c.runGetQuery(a,function(n,o){n?((a=[]).push({q:"CREATE TABLE IF NOT EXISTS pageDetails (info,pageid)",d:null}),a.push({q:"INSERT INTO pageDetails (info,pageid) VALUES (?,?)",d:[JSON.stringify(t),e]})):(a=[]).push({q:"UPDATE pageDetails SET info=? WHERE pageid=?",d:[JSON.stringify(t),e]}),c.runAddQuery(a,function(e,t){e&&console.log(e)})})},t.checkDeviceUpdatePublish=(m={headers:{"Content-Type":"application/json",Accept:"application/json"},url:"/studio/getmobileappletmetadata/"+e.tenantId+"/"+t.appid+"/"+t.pageid,method:"POST",body:{uuid:window.device?device.uuid:"9876543210",cver:$.jStorage.get("appletVersion")?$.jStorage.get("appletVersion")[t.pageid]:null},json:!0},void e.callCMSAPI(m,function(a,n){if(n.success)t.getAppletFromLocal(n.configs);else if(n.devicepublish)t.evaluateApplet(n.devicepublish.pages[0],t.launchPage);else{let a=$.jStorage.get("appletVersion")?$.jStorage.get("appletVersion"):{};a[t.pageid]=n.updateApp.appletversion,$.jStorage.set("appletVersion",a),e.appletsData=e.appletsData||[],t.evaluateApplet(n.updateApp.pages[0],t.launchPage),t.saveApplet(t.pageid,n.updateApp.pages[0]),angular.forEach(e.appletsData,function(e,a){e.pageid==t.pageid&&(e=n.updateApp.pages[0])})}}))}]);let pageCtrl=angular.module("pageCtrl",[]);pageCtrl.controller("unifyedPageCtrl",["$rootScope","$scope","$routeParams","$http","$compile","$sce","convertSvgIcon","$location",function(e,t,a,n,o,i,r,s){t.openReorder=function(){$("#reorderModal").modal("show"),console.log("$rootScope.pagedata",e.pagedata),e.pagedataCopy=angular.copy(e.pagedata)},t.saveReorderPage=function(){e.pagedata=angular.copy(e.pagedataCopy),e.$emit("onSavePage",{}),$("#reorderModal").modal("hide")};try{$(".menu-item").removeClass("active")}catch(e){}e.startCallback=function(t,a,n){e.curdrag=n,$("#widgetContainer").css("opacity","0.5"),e.ismove=!1},e.dropCallback=function(t,a){if(console.log("inside drop callback.. in page ctrl!!"+JSON.stringify(e.curdrag)),null!=e.curdrag){$("#widgetContainer").css("opacity","1"),$(t.target).removeClass("droparea");var n=$(t.target).attr("data-cell");if(n){var o=n.split(":")[0],i=n.split(":")[1],r={widget:angular.copy(e.curdrag),position:{x:a.position.left,y:a.position.top},dimension:{w:300,h:"100"},widgetid:e.curdragwidgetid};null!=e.curdrag.displayname&&(r={applet:angular.copy(e.curdrag),position:{x:a.position.left,y:a.position.top},dimension:{w:300,h:"100"}}),e.ismove&&e.col.components.splice(e.curindex,1),e.pagedata.rows[o].cols[i].components.push(r),e.$emit("onSavePage",{})}}},e.overDropCallback=function(t,a){console.log("overDropCallback"),null!=e.curdrag&&($(".droparea").removeClass("droparea"),$(t.target).addClass("droparea"),e.curdroppable=t.target)},e.outDropCallback=function(t,a){null!=e.curdrag&&$(t.target).removeClass("droparea")},e.menuSelected=!0,e.onSavePageAdded||(e.$on("onSavePage",function(t,o){n.put("/pages/page/"+e.pagedata._id,e.pagedata).then(function(t){console.log("USER---",e.user),n.get("/pages/page/findbypageid/"+e.site._id+"/"+a.id).then(function(t){e.pagedata=t.data,o.callback&&o.callback()})},function(e){console.log("Cannot load the file template")})}),e.onSavePageAdded=!0),e.$on("onCmsWidgetDelete",function(t,a){e.widgetForDelete={col:a.col,index:a.index},$("#deleteWidgetModal").modal("show")}),e.deleteWidgetConfirm=function(){e.widgetForDelete.col.components.splice(e.widgetForDelete.index,1),e.$emit("onSavePage",{}),$("#deleteWidgetModal").modal("hide")};angular.forEach(e.navmenu,function(e,t){e._id==a.id&&e,angular.forEach(e.pages,function(t,n){t._id==a.id&&e})}),t.selectcomp=function(t,a){for(var n=0;n<e.pagedata.rows.length;n++)for(var o=0;o<e.pagedata.rows[n].cols.length;o++)for(var i=0;i<e.pagedata.rows[n].cols[o].components.length;i++)e.pagedata.rows[n].cols[o].components[i].selected="";a.selected="selectedcomp",e.selectedcomp=a},e.selectrow=function(e){e.selected="selectedcomp"},e.getCompHtml=function(t,a){if(t.widget){window.eval(t.widget.processor);var n=window["proc"+t.widget.name](t.widget.attribs);return i.trustAsHtml(n)}if(!t.applet)return"";var r="<div><uni-Applet apps='tenantmetadata.apps' data-aid="+t.applet.id+"></uni-Applet><div class='appletdrop'>Applet..!!<br/><img src='"+t.applet.iconUrl+"'/><h1>"+t.applet.displayname+"</h1></div></div>",s=o(r)(e);a.append(s)},e.undoAction=function(){if(e.changeHistory.length>0){var t=e.changeHistory.pop();e.redoStack.length>=50&&e.redoStack.shift(),e.redoStack.push(t.newval),e.allowWatchToMarkChange=!1,e.pagedata.rows=t.oldval}},e.redoAction=function(){if(e.redoStack.length>0){var t=e.redoStack.pop();e.pagedata.rows=t}},t.adddynamicPadding=function(){var e=$("#appHeader").height(),t=$("#bottomFixContent").height();$("#loadApplet").css({paddingBottom:t,paddingTop:e})};var l=function(){setTimeout(function(){var n=window.globalsiteid;if(e.showDockIconsInGroup=!1,s.path().startsWith("/group/")){if(console.log("GROUP PAGE"),!e.groupsiteid||!e.rbacGroupMenuGenerated)return void l();n=e.groupsiteid}var i="/pages/page/findbypageid/"+n+"/"+a.id;e.user&&e.user.email&&(i+="?userMail="+e.user.email+"&tenantId="+e.user.tenant);var c={headers:{"Content-Type":"application/json",Accept:"application/json"},url:i,method:"GET"};$.blockUI(),e.callCMSAPI(c,function(a,n){console.log("pagedata",n),$.unblockUI();n.components;e.pagedata=n,e.allowWatchToMarkChange=!1,e.initpagerows=angular.copy(e.pagedata.rows),e.redoStack=[],e.changeHistory=[],e.appletName=e.pagedata.title,t.$watch("pagedata.rows",function(t,a){console.log("in watch ..."),e.pagedata&&e.pagedata.rows?e.allowWatchToMarkChange?(e.changeHistory.length>=50&&e.changeHistory.shift(),e.changeHistory.push({oldval:angular.copy(a),newval:angular.copy(t)})):e.allowWatchToMarkChange=!0:e.changeHistory=[]},!0);for(var i="<div ng-repeat='comp in pagedata.components'><div class='pagecomp' posy = '{{comp.position.y}}' posx='{{comp.position.y}}' my-draggable  ng-bind-html='getCompHtml(comp)' ></div> </div>",r="<div class='pagecomp' ng-repeat='comp in col.components'><div cmscellwidget col='col' rowindex='$parent.$parent.$index' colindex='$parent.$index' comp='comp' index='$index'><div ng-class='comp.selected' posy = '{{comp.position.y}}' posx='{{comp.position.y}}' my-draggable  uni-applet span='col.span' comp='comp' ng1-init='getCompHtml(comp, $this)' ></div></div></div>",s=(i='<div cmsrow  ng-class="row.selected" ng-repeat="row in pagedata.rows" row="row" ng-click="selectrow(row);">',!1),l=0;l<e.pagedata.rows.length&&!s;l++)for(var c=0;c<e.pagedata.rows[l].cols.length&&!s;c++)for(var d=0;d<e.pagedata.rows[l].cols[c].components.length&&!s;d++)s=e.pagedata.rows[l].cols[c].components[d].hasOwnProperty("applet");s?(i+='<div class="mainThemeContainer',1==e.pagedata.rows.length&&(i+=" addOwlCarosel owl-carousel "),i+='"><div ng-repeat="col in row.cols" class="cmscell col-xs-12 col-lg-{{col.span}}"><div ng-style="col.style" cmscellsettings col="col" row="row" colindex="$index" rowindex="$parent.$index" rows="pagedata.rows" class="layout-cell clearfix" jqyoui-droppable="{multiple:true,onDrop:\'dropCallback\',onOver:\'overDropCallback\', onOut: \'outDropCallback\'}" data-drop="true" data-cell="{{$parent.$index}}:{{$index}}" ng-drop="true" ng-drop-success="onDropComplete1($data,$event)">'+r+"</div></div></div>"):i+='<div class="mainThemeContainer appletcontent"><div ng-repeat="col in row.cols" class="cmscell col-xs-12 col-lg-{{col.span}}"><div ng-style="col.style" cmscellsettings col="col" row="row" colindex="$index" rowindex="$parent.$index" rows ="pagedata.rows" class="layout-cell clearfix" jqyoui-droppable="{multiple:true,onDrop:\'dropCallback\',onOver:\'overDropCallback\', onOut: \'outDropCallback\'}" data-drop="true" data-cell="{{$parent.$index}}:{{$index}}" ng-drop="true" ng-drop-success="onDropComplete1($data,$event)">'+r+"</div></div></div>",$("#pageContent").html(o(i)(t)),$.unblockUI()}),r.converTeddata(),t.adddynamicPadding()},500);var n=setInterval(function(){0!=$("body").find(".addOwlCarosel").length&&($("body").hasClass("studiomode")?$(".addOwlCarosel").removeAttr("id"):$(".addOwlCarosel").attr("id","themeCarosel"),clearInterval(n))},1e3)};l()}]);let mainCtrl=angular.module("MainCtrl",[]);mainCtrl.controller("mainController",["$rootScope","$scope","$routeParams","$http","$compile","$sce","$location","$injector","sqlLiteServ",function(e,t,a,n,o,i,r,s,l){t.appSetup=(a=>{t.adddynamicPadding=function(){var e=$("#appHeader").height(),t=$("#bottomFixContent").height();$("#loadApplet").css({paddingBottom:t,paddingTop:e})},e.tenantId=tenantInfo.tenantId,e.environment=tenantInfo.env,t.fetchTenantAppVer=function(){var n={headers:{"Content-Type":"application/json","X-TENANT-ID":e.tenantId},method:"GET",data:""};n.url=e.getBaseUrl("/studio/getAllVersions/"+e.tenantId),t.loadDetails=!1,e.callOpenAPI(n,function(e,n){if($.jStorage.get("AppVersion")){var o=$.jStorage.get("AppVersion");(o.cssVer<n.cssVer||o.appVer<n.appVer||o.tenantVer<n.tenantVer)&&(t.loadDetails=!0,$.jStorage.set("AppVersion",n))}else t.loadDetails=!0,$.jStorage.set("AppVersion",n);a(null)})}()}),e.trustAsHTML=function(e){return i.trustAsHtml(e)},t.loadAppDetails=(a=>{if(t.fetchTenantAppDetails=function(){var n={headers:{"Content-Type":"application/json","X-TENANT-ID":e.tenantId},method:"GET",data:""};n.url=e.getBaseUrl("/studio/getAllMobileDetails/"+e.tenantId),e.callOpenAPI(n,function(n,i){let r=[];e.appConfiguration?r.push({q:"UPDATE appDetails SET info = ? WHERE tenantId=?",d:[JSON.stringify(i),e.tenantId]}):(r.push({q:"CREATE TABLE IF NOT EXISTS appDetails (info,tenantId)",d:null}),r.push({q:"INSERT INTO appDetails (info,tenantId) VALUES (?,?)",d:[JSON.stringify(i),e.tenantId]})),e.appConfiguration=i,e.appDetails=e.appConfiguration.appDetails,e.authFunction=e.appConfiguration.authFunction,e.homeScreenTemplate=e.appConfiguration.homeScreenTemplate;try{const a=o($(e.homeScreenTemplate))(t);$("#homeScreenTemplate").html(a),window.eval(e.authFunction)}catch(e){console.log(e)}e.mobilecss=e.appConfiguration.mobilecss,e.tenantDetails=e.appConfiguration.tenantDetails;let s=e.tenantDetails;e.user=$.isEmptyObject(e.user)?{}:e.user,e.brandingUrl=s.logoUrl,e.user.tenant=e.tenantId,e.user.tenantdomain=s.idpTenantDomain,e.GatewayUrl="https://"+s.domain+s.gatewaypath,e.user.domain=s.domain,e.user.gatewaypath=s.gatewaypath,e.user.admins=s.admins||[],e.user.oauthUserInfoUrl=s.oauthUserInfoUrl,e.user.products=s.products,e.user.qlId=s.qlTenantid,e.user.siteId=s.siteId,window.globalsiteid=e.user.siteId,e.$broadcast("launchsite",{site:window.globalsiteid}),e.user.backgroundImg=s.backgroundImg;const c=e.tenantDetails.themeColors,d=e.tenantDetails.mobileThemeColors;window.device&&(StatusBar.backgroundColorByHexString(c.primaryColor),StatusBar.overlaysWebView(!1),StatusBar.show());const p=e.mobilecss.replace(/##primaryColor/g,c.primaryColor).replace(/##secondaryColor/g,c.secondaryColor).replace(/##textColor/g,c.textColor).replace(/##btnColor/g,c.btnColor).replace(/##headerColor/g,d.headerColor).replace(/##headerFontColor/g,d.headerFontColor).replace(/##footerColor/g,d.footerColor).replace(/##footerIcon/g,d.footerIcon).replace(/##menuTopBackground/g,d.menuTopBackground).replace(/##menuBottomBackground/g,d.menuBottomBackground).replace(/##menuIconColor/g,d.menuIconColor);$("#themeColorsCSS").html(p),$("#customCSS").html(e.appConfiguration.customCSS),window.device&&l.runAddQuery(r,function(e,t){e&&console.log(e)});try{a(null)}catch(e){}})},window.device){let n=[];n.push({q:"SELECT info FROM appDetails",d:null}),l.runGetQuery(n,function(n,i){if(console.log("appDetails",n,i),n)t.fetchTenantAppDetails();else{if(e.appConfiguration=JSON.parse(i.item(0).info),t.loadDetails)return navigator.notification.alert("Loading new updates for the app.",null,"Update","Ok"),void t.fetchTenantAppDetails();{e.appDetails=e.appConfiguration.appDetails,e.authFunction=e.appConfiguration.authFunction,e.homeScreenTemplate=e.appConfiguration.homeScreenTemplate;try{const a=o($(e.homeScreenTemplate))(t);$("#homeScreenTemplate").html(a),window.eval(e.authFunction)}catch(e){console.log(e)}e.mobilecss=e.appConfiguration.mobilecss,e.tenantDetails=e.appConfiguration.tenantDetails;let n=e.tenantDetails;e.user=$.isEmptyObject(e.user)?{}:e.user,e.brandingUrl=n.logoUrl,e.user.tenant=e.tenantId,e.user.tenantdomain=n.idpTenantDomain,e.GatewayUrl="https://"+n.domain+n.gatewaypath,e.user.domain=n.domain,e.user.gatewaypath=n.gatewaypath,e.user.admins=n.admins||[],e.user.oauthUserInfoUrl=n.oauthUserInfoUrl,e.user.products=n.products,e.user.qlId=n.qlTenantid,e.user.siteId=n.siteId,window.globalsiteid=e.user.siteId,e.$broadcast("launchsite",{site:window.globalsiteid}),e.user.backgroundImg=n.backgroundImg;const i=e.tenantDetails.themeColors,r=e.tenantDetails.mobileThemeColors;window.device&&(StatusBar.backgroundColorByHexString(i.primaryColor),StatusBar.overlaysWebView(!1),StatusBar.show());const s=e.mobilecss.replace(/##primaryColor/g,i.primaryColor).replace(/##secondaryColor/g,i.secondaryColor).replace(/##textColor/g,i.textColor).replace(/##btnColor/g,i.btnColor).replace(/##headerColor/g,r.headerColor).replace(/##headerFontColor/g,r.headerFontColor).replace(/##footerColor/g,r.footerColor).replace(/##footerIcon/g,r.footerIcon).replace(/##menuTopBackground/g,r.menuTopBackground).replace(/##menuBottomBackground/g,r.menuBottomBackground).replace(/##menuIconColor/g,r.menuIconColor);$("#themeColorsCSS").html(s),$("#customCSS").html(e.appConfiguration.customCSS),console.log("$rootScope.appConfiguration",e.appConfiguration),e.appConfiguration&&(a(null),t.fetchTenantAppDetails())}}})}else t.fetchTenantAppDetails()}),t.checkConfig=function(t){if($.jStorage.get("unifyedusername")&&$.jStorage.get("unifyedpassword")){let a=$.jStorage.get("token");e.loggedIn=!0,e.user.accessToken=a.access_token,e.user.refreshToken=a.refresh_token,e.user.providerData=a.access_token,e.loadUserRbac=!0,t(null)}else e.appDetails.guestApp?(e.loadPublicRbac=!0,e.loggedIn=!1,t(null)):(e.showSignInPage=!0,t(null))},t.loadRbac=(a=>{if(e.showSignInPage)a(null);else if(e.loadPublicRbac){t.getSavedPublicRbac=function(){let e=[];e.push({q:"SELECT info FROM rbacPublicDetails",d:null}),l.runGetQuery(e,function(e,t){a(null,JSON.parse(t.item(0).info))})},t.updatePublicRbac=function(t){var a=[];a.push({q:"SELECT info FROM rbacPublicDetails",d:null}),l.runGetQuery(a,function(n,o){n?((a=[]).push({q:"CREATE TABLE IF NOT EXISTS rbacPublicDetails (info,tenantId)",d:null}),a.push({q:"INSERT INTO rbacPublicDetails (info,tenantId) VALUES (?,?)",d:[JSON.stringify(t),e.tenantId]}),l.runAddQuery(a,function(e,t){})):(a=[]).push({q:"UPDATE rbacPublicDetails SET info = ? WHERE tenantId=?",d:[JSON.stringify(t),e.tenantId]})})};let o=e.getBaseUrl(e.user.gatewaypath+"/unifyedrbac/rbac/open/menus",e.environment);var n={headers:{"Content-Type":"application/json","X-TENANT-ID":e.tenantId,"site-id":e.user.siteId},url:o,method:"POST",body:[{roles:["Public"],product:"global"}],json:!0};e.callOpenAPI(n,function(e,n){try{n?t.updatePublicRbac(n.data):t.getSavedPublicRbac()}catch(e){}a(null,n)})}else if(e.loadUserRbac){let n=$.jStorage.get("user");e.user.id=n.id,e.user.profileBackground=n.profileBackground,e.user.firstName=n.firstName,e.user.lastName=n.lastName,e.user.profileImage=n.profileImage,e.user.role=n.role,e.user.tenant=n.tenant,e.user.email=n.email,e.user.phone=n.phone,e.user.countryCode=n.countryCode,e.user.provider=n.provider,e.user.gender=n.gender,e.user.devices=n.devices,e.user.areaOfInterest=n.areaOfInterest||[],e.tenantUrl=e.user.domain,t.getSavedRbac=function(){var e=[];e.push({q:"SELECT info FROM rbacRoleDetails",d:null}),l.runGetQuery(e,function(e,t){a(null,JSON.parse(t.item(0).info))})},t.updateRbac=function(t){var a=[];a.push({q:"SELECT info FROM rbacRoleDetails",d:null}),l.runGetQuery(a,function(n,o){n?((a=[]).push({q:"CREATE TABLE IF NOT EXISTS rbacRoleDetails (info,tenantId)",d:null}),a.push({q:"INSERT INTO rbacRoleDetails (info,tenantId) VALUES (?,?)",d:[JSON.stringify(t),e.tenantId]}),l.runAddQuery(a,function(e,t){})):(a=[]).push({q:"UPDATE rbacRoleDetails SET info = ? WHERE tenantId=?",d:[JSON.stringify(t),e.tenantId]})})};let o="/unifyedrbac/rbac/user?user="+e.user.email+"&device=mobile";e.callAPI(o,"GET",{},function(e){console.log("userrbac",e);try{e?t.updateRbac(e.data):t.getSavedRbac()}catch(e){}a(null,e.data)})}}),window.device&&"none"==navigator.connection.type?navigator.notification.alert("No network connection found. Please check your network settings and try again.",function(){navigator.app.exitApp()},"No Network","Ok"):async.waterfall([t.appSetup,t.loadAppDetails,t.checkConfig,t.loadRbac],function(t,a){if(MyCampusApp={},MyCampusApp.rootScope=e,console.log("results",a),a){var n=a;if(e.dockApplets=n.docks,n.menus=e.removeDuplicates(n),e.rbacnavmenu=e.buildMenuTree(n.menus),e.rbacallmenus=n.menus,console.log("$rootScope.rbacnavmenu",e.rbacnavmenu),console.log("$rootScope.rbacallmenus",e.rbacallmenus),n.landingPages.length>0&&angular.forEach(n.menus,function(t,a){t.id==n.landingPages[0].pageId&&(e.landingPage=t)}),e.loadUserRbac){e.getNotificationBadgeMobile();setInterval(e.getNotificationBadgeMobile,12e4),e.loadUnacknowledgedMessage();let t=PushNotification.init({android:{senderID:tenantInfo.senderId,icon:"myicon",iconColor:"#123456",vibrate:"true",sound:"true"},browser:{pushServiceURL:"http://push.api.phonegap.com/v1/push"},ios:{alert:"true",badge:"true",sound:"true"},windows:{}});e.inAppNotificationHandler(t)}r.path("/app/Rbacsetting/RbacsettingPage9")}else r.path("/app/Rbacsignin/Rbacsignin")})}]);var unifyedSiteGroupDirectives=angular.module("siteGroupHeaderDirective",[]);unifyedSiteGroupDirectives.directive("sitegrouppageheader",["$routeParams","$compile","$http","$rootScope","$sce","$window","$location","$q","$route",function(e,t,a,n,o,i,r,s,l){return{restrict:"E",templateUrl:"app/components/groups/sitegrouppageheader.html",link:function(t,a,o){try{var i=e.sitebaseurl,c=e.id;t.inviteloaded=!1,t.isMember=!1,t.isAdmin=!1,n.groupsiteid="",n.selectedGroupPageUrl=c,n.rbacGroupMenuGenerated=!1;var d="/unifyedsitegroups/api/v1/sitegroups/siteinfo?groupid="+i+"&pageid="+c+"&domain="+n.user.domain;n.callAPI(d,"GET",{},function(e){if(!e.data.siteid)return alert("You are trying to navigate to a group which no longer exist."),void window.history.back();var a=e.data;if(!a)return void console.error("Siteinfo for group not found !");window.globalsiteid=a.siteid,n.groupsiteid=a.siteid,window.siteGroupId=a.siteGroupId,a.siteid!=n.user.siteId&&(n.olderSiteIdPortal=n.user.siteId),n.user.siteId=a.siteid;let o="/unifyedrbac/rbac/user?user="+n.user.email;n.callAPI(o,"GET",{},function(e){if(console.log("userrbac",e),e&&e.data){n.rbacGroupMenuGenerated=!0;var t=e.data;t.menus=n.removeDuplicates(t),n.rbacnavmenu=n.buildMenuTree(t.menus),n.rbacallmenus=t.menus,n.rbacallmenus&&n.rbacallmenus.length>0&&(n.appletTitle=n.rbacallmenus[0].label)}else n.rbacallmenus=[],n.rbacnavmenu=[]});var r="/unifyedsitegroups/api/v1/sitegroups/open/find?siteid="+a.siteid+"&groupEndpoint="+i;n.callAPI(r,"GET",{},function(e){t.currentgroup=e.data,t.isAdmin=t.currentgroup.groupAdmins.users.indexOf(n.user.email)>=0,t.fetchGroupMembers(t.currentgroup).then(function(e){}),n.user&&n.user.email&&(t.isMember=t.currentgroup.groupMembers.users.indexOf(n.user.email)>=0||t.currentgroup.groupAdmins.users.indexOf(n.user.email)>=0),w(),t.isMember&&("P"!=t.currentgroup.privacy&&"R"!=t.currentgroup.privacy||(t.fetchUserGroupInvite(t.currentgroup),t.isAdmin&&n.callAPI("/unifyedsitegroups/api/v1/invites/pending","GET",{},function(e){var a=e.data,n={};a.forEach(function(e){n[e.group.id]?n[e.group.id].push(e):n[e.group.id]=[e]}),t.groupsPendingInvites=n})),"R"==t.currentgroup.privacy&&t.fetchUserGroupJoinRequests(t.currentgroup))})}),t.fetchGroupHistory=function(e){const t="/unifyedsitegroups/api/v1/history/"+e._id;n.callAPI(t,"GET",{},function(t){t&&t.data&&(e._history=t.data)})},t.getHValue=function(e){return angular.isArray(e)?e[0]:e},t.showGroupInfo=function(e){var a=-1!=e.groupMembers.users.indexOf(n.user.email),o=-1!=e.groupAdmins.users.indexOf(n.user.email);("U"==e.privacy||a||o)&&(t.fetchGroupMembers(e).then(function(e){}),t.fetchGroupHistory(e),t.fetchGroupOwnerInfo(e),t.fetchGroupAdminUsersInfo(e)),$("#groupInfoModal").modal("show")},t.fetchGroupOwnerInfo=function(e){if(e.createdBy){var a="/unifydidentity/user/search/findOneByEmail?email="+encodeURIComponent(e.createdBy);n.callAPI(a,"GET",null,function(e){e&&e.data&&(t.selectedGroupOwnerInfo=e.data)})}};var p=!1;t.removeGroupFromGroup=function(e){p||b({title:"Remove group",msg:"Please confirm, Do you want to remove group "+e},function(a){if(1==a){$.blockUI(),p=!0;const a="/unifyedsitegroups/api/v1/sitegroups/"+t.currentgroup._id+"/removegroup";n.callAPI(a,"POST",{group:e},function(a){if($.unblockUI(),p=!1,a&&a.data&&"Success"==a.data.status){var n=t.currentgroup.groupMembers.groups.indexOf(e);-1!=n&&t.currentgroup.groupMembers.groups.splice(n,1),t.currentgroup.groupMembers.users.length||t.currentgroup.groupMembers.groups.length||setTimeout(function(){$("#viewMembers").modal("hide")},200)}})}})},t.fetchGroupAdminUsersInfo=function(e){var a="/unifyedsitegroups/api/v1/sitegroups/"+e._id+"/admins";n.callAPI(a,"GET",null,function(e){e&&e.data&&(t.selectedGroupAdminsDetails=e.data)})},$("body").on("click",function(){$("#manageGroup").removeClass("open")}),t.openFolderDropDown=function(){$("#manageGroup").toggleClass("open")},t.fetchUserGroupInvite=function(e){var a=n.user.email;const o="/unifyedsitegroups/api/v1/invites/"+e._id+"/users/"+encodeURI(a)+"/invites";n.callAPI(o,"GET",{},function(e){t.userSiteGroupsInvite=e.data})},t.joinRequestsLoading=!1,t.showJoinRequests=function(){t.joinRequestsLoading||(t.joinRequestsLoading=!0,$("#joinRequestModal").modal("show"),n.callAPI("/unifyedsitegroups/api/v1/sitegroups/"+t.currentgroup._id+"/joinrequests","GET",{},function(e){t.joinRequestsLoading=!1,t.currentgroup.joinrequests=e.data}))},t.showInviteRequests=function(){$("#inviteRequestModal").modal("show"),t.fetchGroupInvitations(t.currentgroup)},t.viewRequests=function(e){"INVITE"==e?t.showInviteRequests():"JOIN"==e&&t.showJoinRequests()},t.groupInvitesLoading=!1,t.fetchGroupInvitations=function(e){if(!t.groupInvitesLoading){t.groupInvitesLoading=!0;n.user.email;var a="/unifyedsitegroups/api/v1/invites/"+e._id+"/invites";n.callAPI(a,"GET",{},function(e){t.groupInvitesLoading=!1,t.groupInvites=e.data})}};var u=!1;t.acceptRequest=function(e,a){u||(u=!0,$.blockUI(),n.callAPI("/unifyedsitegroups/api/v1/sitegroups/"+e.groupid+"/acceptrequest/"+e._id,"POST",{},function(e){t.currentgroup.joinrequests.splice(a,1),u=!1,$.unblockUI()}))};var g=!1;t.denyRequest=function(e,a){g||(g=!0,$.blockUI(),n.callAPI("/unifyedsitegroups/api/v1/sitegroups/"+e.groupid+"/denyrequest/"+e._id,"POST",{},function(e){t.currentgroup.joinrequests.splice(a,1),g=!1,$.unblockUI()}))},t.fetchUserGroupJoinRequests=function(e){var t=n.user.email;const a="/unifyedsitegroups/api/v1/sitegroups/"+e._id+"/users/"+encodeURI(t)+"/joinrequest";n.callAPI(a,"GET",{},function(t){e.joinRequests=t.data})};var m=!1;t.applyJoinGroup=function(e){if(n.user&&n.user.email||(window.location.href="/"),!m&&(m=!0,$.blockUI(),"U"==e.privacy||"R"==e.privacy)){const t="/unifyedsitegroups/api/v1/sitegroups/"+e._id+"/joinrequests";n.callAPI(t,"POST",{user:n.user.email},function(e){m=!1,$.unblockUI(),e&&e.data&&"Success"==e.data.status&&(alert(e.data.message),l.reload(!0))})}};var v=!1;t.acceptInvitationRequest=function(){v||(v=!0,$.blockUI(),n.callAPI("/unifyedsitegroups/api/v1/sitegroups/"+t.currentgroup.groupid+"/acceptrequest/"+t.userSiteGroupsInvite._id,"GET",{},function(e){console.log("request accepted",e.data),v=!1,$.unblockUI()}))},t.loadGroupMembersPending=!1,t.fetchGroupMembers=function(e){var a=s.defer();if(t.loadGroupMembersPending)return a.resolve({status:"pending"}),a.promise;t.loadGroupMembersPending=!0;var o="/unifyedsitegroups/api/v1/sitegroups/"+e._id+"/members";return $.blockUI(),n.callAPI(o,"GET",{},function(e){e&&e.data?(t.currentgroup._members=e.data,t.loadGroupMembersPending=!1,$.unblockUI(),a.resolve(e.data)):a.reject({error:"Failed to load group members"})}),a.promise};var h=!1;t.withdrawInvite=function(e){h||b({title:"Withdraw invitation request.",msg:"Do you really want to withdraw invite to "+e.invitee.firstName+" "+e.invitee.lastName},function(a){if(1==a){h=!0,$.blockUI();var o="/unifyedsitegroups/api/v1/invites/"+t.currentgroup._id+"/invites/"+e._id+"/withdraw";n.callAPI(o,"GET",{},function(a){var n=t.groupInvites.indexOf(e);t.groupInvites.splice(n,1),$.unblockUI(),h=!1,t.groupInvites.length||setTimeout(function(){$("#inviteRequestModal").modal("hide")},200),t.$digest()})}})},t.toBeAdmins=[],t.addUserTobeAdmin=function(e,a){var n=t.toBeAdmins.indexOf(a);-1==n?t.toBeAdmins.push(a):t.toBeAdmins.splice(n,1)},t.adminAssignOpPending=!1,t.assignAdminToGroup=function(e,a,o){if(!t.adminAssignOpPending)if(t.toBeAdmins.length){var i=t.toBeAdmins.map(function(e){return e.user[0].email}),r="/unifyedsitegroups/api/v1/sitegroups/"+e._id+"/admins";$ele=$(a.target),t.adminAssignOpPending=!0,$.blockUI(),$ele.text("Assigning..."),n.callAPI(r,"POST",{users:i},function(a){$.unblockUI(),a&&(e.groupAdmins.users=e.groupAdmins.users.concat(i),$ele.text("Admin Assigned")),t.adminAssignOpPending=!1,setTimeout(function(){$ele.text("Assign Admin"),o&&$("#assignAdminModal").modal("hide")},300)})}else alert("Please select atleast one member")},t.openAssignAdminModal=function(e){if(t.toBeAdmins=[],-1!=e.groupAdmins.users.indexOf(n.user.email)){var a=e.groupMembers.users.filter(function(t){return-1==e.groupAdmins.users.indexOf(t)});t.assignableAdmins=[],a.length?t.fetchGroupMembers(e).then(function(a){t.assignableAdmins=e._members.filter(function(t){return-1==e.groupAdmins.users.indexOf(t.user[0].email)}),$("#assignAdminModal").modal("show")}).catch(function(e){alert("Failed to load group members")}):alert("There is no non admin user in group to assign.")}};var f=!1;t.deleteMain=function(e){if(f)return;$.blockUI(),f=!0;const t="/unifyedsitegroups/api/v1/sitegroups/"+e._id;n.callAPI(t,"DELETE",{},function(e){$.unblockUI(),f=!1,e&&e.data&&"Success"==e.data.status&&(alert(e.data.message),r.path("/app/UnifyedGroups/UnifyedGroups"))})},t.deleteGroup=function(e){-1!=e.groupAdmins.users.indexOf(n.user.email)?b({title:"Delete group "+e.name,msg:"Are you sure you want to delete "+e.name+" group",defaultText:"Confirm delete group"},function(a){1==a&&t.deleteMain(e)}):alert("Invalid operation")},t.groupMembersLoading=!1,t.viewMembers=function(){t.groupMembersLoading||(t.groupMembersLoading=!0,t.fetchGroupMembers(t.currentgroup).then(function(e){t.groupMembersLoading=!1,t.currentgroup.groupMembers.groups||1!=t.currentgroup.groupMembers.users.length||t.currentgroup.groupMembers.users[0]!=n.user.email?$("#viewMembers").modal("show"):alert("You are the only member in the group.")}).catch(function(e){alert("Failed to load group members.")}))};var w=function(){n.callAPI("/unifydplatform/open/groups","GET",{},function(e){if(e&&e.data){var a=e.data;t.allGroups=a.filter(function(e){return-1==t.currentgroup.groupMembers.groups.indexOf(e.group)})}})};function b(e,t){window.device?navigator.notification.confirm(e.msg,t,"Are you sure ?","Yes,No"):n.webApp&&$.confirm({animation:e.animation||"none",title:e.title||"Confirm",titleClass:e.titleClass||"proximaSemiBoldFont fontSize18 textcenter",content:e.msg,columnClass:e.columnClass||"col-lg-6 col-lg-offset-3 col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1",buttons:{NO:{btnClass:"btn-cancel boxradius popBtns",action:function(){}},YES:{btnClass:"btn btn-primary btn-success boxradius marginleft30px popBtns",action:function(){t(1)}}}})}t.addGroupToInvitee=function(e,a){var n=t.tobeInvited.groups.indexOf(a);-1==n?t.tobeInvited.groups.push(a):t.tobeInvited.groups.splice(n,1)},t.tobeInvited={groups:[],users:[]},t.openInvitationModal=function(){t.tobeInvited={groups:[],users:[]},$("#inviteUsersModal").modal("show")},t.isGroupChecked=function(e,t){return-1!=t.indexOf(e)},t.inviteeSearchResults={data:[],page:{page:1,size:20},hasMore:!0};var y=!1;t.invitePeople=function(){if(!y)if(t.tobeInvited.users.length||t.tobeInvited.groups.length){var e="/unifyedsitegroups/api/v1/invites/"+t.currentgroup._id+"/invites",a={id:t.currentgroup._id,name:t.currentgroup.name,groupEndpoint:t.currentgroup.groupEndpoint},o={name:n.user.firstName+" "+n.user.lastName,email:n.user.email};y=!0,$.blockUI(),n.callAPI(e,"POST",{group:a,raisedBy:o,invitees:t.tobeInvited},function(e){if($.unblockUI(),y=!1,"P"==t.currentgroup.privacy){var a=_.map(t.tobeInvited.groups,function(e){return e.group}),n=_.map(t.tobeInvited.users,function(e){return e.email});t.currentgroup.groupMembers.groups=_.union(t.currentgroup.groupMembers.groups,a),t.currentgroup.groupMembers.users=_.union(t.currentgroup.groupMembers.users,n)}t.inviteeSearchResults={data:[],page:{page:1,size:20},hasMore:!0},setTimeout(function(){$("#inviteUsersModal").modal("hide")},100)})}else alert("Please select atlease one item.")},$("#inviteUsersModal").on("hidden.bs.modal",function(e){t.tobeInvited={groups:[],users:[]},t.inviteeSearchResults={data:[],page:{page:1,size:20},hasMore:!0},t.userSearchKey="",t.$digest()}),t.inviteeSearch=function(e,a){e?13==(a.keyCode||a.which)&&t.inviteeSearch1(e,a):t.inviteeSearchResults={data:[],page:{page:1,size:20},hasMore:!0}},t.inviteeSearch1=function(e,a){var o="/unifyedsitegroups/api/v1/invites/searchcandidate?qs="+e+"&gid="+t.currentgroup._id+"&page="+t.inviteeSearchResults.page.page+"&size="+t.inviteeSearchResults.page.size;n.callAPI(o,"GET",{},function(e){t.inviteeSearchResults.data=_.concat(t.inviteeSearchResults.data,e.data.data),t.inviteeSearchResults.page.page+=1,t.inviteeSearchResults.hasMore=e.data.data.length==t.inviteeSearchResults.page.size})},t.addUserToInvitee=function(e,a){t.inviteeSearchResults.data.splice(e,1),t.tobeInvited.users.push(a)},t.removeSelectedUser=function(e,a){t.tobeInvited.users.splice(e,1),t.inviteeSearchResults.data.push(a)};var x=!1;t.removeUserFromGroup=function(e){b({title:"Remove user",msg:"Please confirm, Do you want to remove user "+e.user[0].firstName+" "+e.user[0].lastName,defaultText:"Confirm remove user"},function(a){if(1==a){if(x)return;x=!0,$.blockUI();const a="/unifyedsitegroups/api/v1/sitegroups/"+t.currentgroup._id+"/removemember";n.callAPI(a,"POST",{user:e.user[0].email},function(a){if($.unblockUI(),x=!1,a&&a.data&&"Success"==a.data.status){var n=t.currentgroup._members.indexOf(e);t.currentgroup._members.splice(n,1);var o=t.currentgroup.groupMembers.indexOf(e.user[0].email);-1!=o&&t.currentgroup.groupMembers.splice(o,1),t.currentgroup.groupMembers.length||setTimeout(function(){$("#viewMembers").modal("hide")},200),t.$digest()}})}})};var k=!1;function C(e){if(k)return;k=!0,$.blockUI();const t="/unifyedsitegroups/api/v1/sitegroups/"+e._id+"/leavesitegroup";n.callAPI(t,"POST",{user:n.user.email},function(e){k=!1,$.unblockUI(),e&&e.data&&($("#leaveGroup").modal("hide"),"Success"==e.data.status&&(alert(e.data.message),r.path("/app/UnifyedGroups/UnifyedGroups"),setTimeout(function(){window.close()},500)))})}t.leaveGroup1=C,t.leaveGroup=function(e){b({title:"Leave group "+e.name,msg:'"Are you sure you want to leave '+e.name+' group"',defaultText:"Confirm leave group"},function(t){1==t&&C(e)})},$(".groups-applet").on("click",function(e){$("#manageGroup").removeClass("open")}),t.leveGroup0=function(e){var a=-1!=e.groupAdmins.users.indexOf(n.user.email),o=-1!=e.groupMembers.users.indexOf(n.user.email);a&&e.groupAdmins.users.length<=1&&t.fetchGroupMembers(e).then(function(e){}),$scope.otherassignable=!1,o&&!a&&(e.groupMembers.users.length>1&&($scope.otherassignable=!0),t.leaveGroup(e)),a&&$("#leaveGroup").modal("show")},$(".u8PopupBg").on("show.bs.modal",function(e){setTimeout(function(){$(".modal-backdrop.in").hide()},300)});var A=$(window).width();setTimeout(function(){A<768&&($(".u8PopupBg").on("show.bs.modal",function(e){$(".owl-stage-outer").addClass("remove-carousel"),$(".owl-stage").addClass("remove-carousel")}),$(".u8PopupBg").on("hidden.bs.modal",function(e){$(".owl-stage-outer").removeClass("remove-carousel"),$(".owl-stage").removeClass("remove-carousel")}))},1e3)}catch(e){alert("Error inside site group header..."),alert(e)}}}}]);var siteGroupCtrl=angular.module("siteGroupCtrl",[]);siteGroupCtrl.controller("unifyedSiteGroupPageCtrl",["$rootScope","$scope","$routeParams","$http","$compile","$sce",function(e,t,a,n,o,i){console.log("in site group page controller")}]);